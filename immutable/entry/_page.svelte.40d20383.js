var bf=Object.defineProperty;var _f=(i,e,t)=>e in i?bf(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var zt=(i,e,t)=>(_f(i,typeof e!="symbol"?e+"":e,t),t);import{_ as nn}from"../chunks/preload-helper.41c905a7.js";import{J as kf,S as rt,i as nt,s as Ge,k as Z,q as Be,a as be,l as K,m as G,r as xe,h as C,c as _e,n as E,K as vt,b as Y,G as B,L as wt,u as $t,g as N,v as ft,d as U,f as ut,M as an,N as wf,C as ar,D as lr,E as sr,F as ir,O as $f,w as st,P as yf,Q as Er,H as Ue,R as Cf,p as rn,T as dr,e as Ke,U as or,V as Gt,y as ce,z as he,A as ge,W as ln,X as sn,B as de,Y as Mr,Z as Ef,_ as ct,$ as ht,a0 as hl,o as Sr,a1 as ya}from"../chunks/index.61358ee6.js";var gl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dl(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var vl={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(i,e){(function(t,a){i.exports=a()})(gl,function t(){var a=typeof self<"u"?self:typeof window<"u"?window:a!==void 0?a:{},n=!a.document&&!!a.postMessage,s=a.IS_PAPA_WORKER||!1,o={},c=0,f={parse:function(v,_){var F=(_=_||{}).dynamicTyping||!1;if(x(F)&&(_.dynamicTypingFunction=F,F={}),_.dynamicTyping=F,_.transform=!!x(_.transform)&&_.transform,_.worker&&f.WORKERS_SUPPORTED){var D=function(){if(!f.WORKERS_SUPPORTED)return!1;var ee=(Te=a.URL||a.webkitURL||null,Le=t.toString(),f.BLOB_URL||(f.BLOB_URL=Te.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Le,")();"],{type:"text/javascript"})))),ie=new a.Worker(ee),Te,Le;return ie.onmessage=se,ie.id=c++,o[ie.id]=ie}();return D.userStep=_.step,D.userChunk=_.chunk,D.userComplete=_.complete,D.userError=_.error,_.step=x(_.step),_.chunk=x(_.chunk),_.complete=x(_.complete),_.error=x(_.error),delete _.worker,void D.postMessage({input:v,config:_,workerId:D.id})}var H=null;return f.NODE_STREAM_INPUT,typeof v=="string"?(v=function(ee){return ee.charCodeAt(0)===65279?ee.slice(1):ee}(v),H=_.download?new p(_):new P(_)):v.readable===!0&&x(v.read)&&x(v.on)?H=new Q(_):(a.File&&v instanceof File||v instanceof Object)&&(H=new w(_)),H.stream(v)},unparse:function(v,_){var F=!1,D=!0,H=",",ee=`\r
`,ie='"',Te=ie+ie,Le=!1,X=null,Re=!1;(function(){if(typeof _=="object"){if(typeof _.delimiter!="string"||f.BAD_DELIMITERS.filter(function(I){return _.delimiter.indexOf(I)!==-1}).length||(H=_.delimiter),(typeof _.quotes=="boolean"||typeof _.quotes=="function"||Array.isArray(_.quotes))&&(F=_.quotes),typeof _.skipEmptyLines!="boolean"&&typeof _.skipEmptyLines!="string"||(Le=_.skipEmptyLines),typeof _.newline=="string"&&(ee=_.newline),typeof _.quoteChar=="string"&&(ie=_.quoteChar),typeof _.header=="boolean"&&(D=_.header),Array.isArray(_.columns)){if(_.columns.length===0)throw new Error("Option columns is empty");X=_.columns}_.escapeChar!==void 0&&(Te=_.escapeChar+ie),(typeof _.escapeFormulae=="boolean"||_.escapeFormulae instanceof RegExp)&&(Re=_.escapeFormulae instanceof RegExp?_.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var te=new RegExp(ae(ie),"g");if(typeof v=="string"&&(v=JSON.parse(v)),Array.isArray(v)){if(!v.length||Array.isArray(v[0]))return at(null,v,Le);if(typeof v[0]=="object")return at(X||Object.keys(v[0]),v,Le)}else if(typeof v=="object")return typeof v.data=="string"&&(v.data=JSON.parse(v.data)),Array.isArray(v.data)&&(v.fields||(v.fields=v.meta&&v.meta.fields||X),v.fields||(v.fields=Array.isArray(v.data[0])?v.fields:typeof v.data[0]=="object"?Object.keys(v.data[0]):[]),Array.isArray(v.data[0])||typeof v.data[0]=="object"||(v.data=[v.data])),at(v.fields||[],v.data||[],Le);throw new Error("Unable to serialize unrecognized input");function at(I,J,ve){var oe="";typeof I=="string"&&(I=JSON.parse(I)),typeof J=="string"&&(J=JSON.parse(J));var ye=Array.isArray(I)&&0<I.length,We=!Array.isArray(J[0]);if(ye&&D){for(var De=0;De<I.length;De++)0<De&&(oe+=H),oe+=Ve(I[De],De);0<J.length&&(oe+=ee)}for(var re=0;re<J.length;re++){var Ce=ye?I.length:J[re].length,ze=!1,je=ye?Object.keys(J[re]).length===0:J[re].length===0;if(ve&&!ye&&(ze=ve==="greedy"?J[re].join("").trim()==="":J[re].length===1&&J[re][0].length===0),ve==="greedy"&&ye){for(var Ae=[],Ye=0;Ye<Ce;Ye++){var He=We?I[Ye]:Ye;Ae.push(J[re][He])}ze=Ae.join("").trim()===""}if(!ze){for(var Oe=0;Oe<Ce;Oe++){0<Oe&&!je&&(oe+=H);var pt=ye&&We?I[Oe]:Oe;oe+=Ve(J[re][pt],Oe)}re<J.length-1&&(!ve||0<Ce&&!je)&&(oe+=ee)}}return oe}function Ve(I,J){if(I==null)return"";if(I.constructor===Date)return JSON.stringify(I).slice(1,25);var ve=!1;Re&&typeof I=="string"&&Re.test(I)&&(I="'"+I,ve=!0);var oe=I.toString().replace(te,Te);return(ve=ve||F===!0||typeof F=="function"&&F(I,J)||Array.isArray(F)&&F[J]||function(ye,We){for(var De=0;De<We.length;De++)if(-1<ye.indexOf(We[De]))return!0;return!1}(oe,f.BAD_DELIMITERS)||-1<oe.indexOf(H)||oe.charAt(0)===" "||oe.charAt(oe.length-1)===" ")?ie+oe+ie:oe}}};if(f.RECORD_SEP=String.fromCharCode(30),f.UNIT_SEP=String.fromCharCode(31),f.BYTE_ORDER_MARK="\uFEFF",f.BAD_DELIMITERS=["\r",`
`,'"',f.BYTE_ORDER_MARK],f.WORKERS_SUPPORTED=!n&&!!a.Worker,f.NODE_STREAM_INPUT=1,f.LocalChunkSize=10485760,f.RemoteChunkSize=5242880,f.DefaultDelimiter=",",f.Parser=le,f.ParserHandle=M,f.NetworkStreamer=p,f.FileStreamer=w,f.StringStreamer=P,f.ReadableStreamStreamer=Q,a.jQuery){var g=a.jQuery;g.fn.parse=function(v){var _=v.config||{},F=[];return this.each(function(ee){if(!(g(this).prop("tagName").toUpperCase()==="INPUT"&&g(this).attr("type").toLowerCase()==="file"&&a.FileReader)||!this.files||this.files.length===0)return!0;for(var ie=0;ie<this.files.length;ie++)F.push({file:this.files[ie],inputElem:this,instanceConfig:g.extend({},_)})}),D(),this;function D(){if(F.length!==0){var ee,ie,Te,Le,X=F[0];if(x(v.before)){var Re=v.before(X.file,X.inputElem);if(typeof Re=="object"){if(Re.action==="abort")return ee="AbortError",ie=X.file,Te=X.inputElem,Le=Re.reason,void(x(v.error)&&v.error({name:ee},ie,Te,Le));if(Re.action==="skip")return void H();typeof Re.config=="object"&&(X.instanceConfig=g.extend(X.instanceConfig,Re.config))}else if(Re==="skip")return void H()}var te=X.instanceConfig.complete;X.instanceConfig.complete=function(at){x(te)&&te(at,X.file,X.inputElem),H()},f.parse(X.file,X.instanceConfig)}else x(v.complete)&&v.complete()}function H(){F.splice(0,1),D()}}}function d(v){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(_){var F=W(_);F.chunkSize=parseInt(F.chunkSize),_.step||_.chunk||(F.chunkSize=null),this._handle=new M(F),(this._handle.streamer=this)._config=F}.call(this,v),this.parseChunk=function(_,F){if(this.isFirstChunk&&x(this._config.beforeFirstChunk)){var D=this._config.beforeFirstChunk(_);D!==void 0&&(_=D)}this.isFirstChunk=!1,this._halted=!1;var H=this._partialLine+_;this._partialLine="";var ee=this._handle.parse(H,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var ie=ee.meta.cursor;this._finished||(this._partialLine=H.substring(ie-this._baseIndex),this._baseIndex=ie),ee&&ee.data&&(this._rowCount+=ee.data.length);var Te=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(s)a.postMessage({results:ee,workerId:f.WORKER_ID,finished:Te});else if(x(this._config.chunk)&&!F){if(this._config.chunk(ee,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);ee=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(ee.data),this._completeResults.errors=this._completeResults.errors.concat(ee.errors),this._completeResults.meta=ee.meta),this._completed||!Te||!x(this._config.complete)||ee&&ee.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),Te||ee&&ee.meta.paused||this._nextChunk(),ee}this._halted=!0},this._sendError=function(_){x(this._config.error)?this._config.error(_):s&&this._config.error&&a.postMessage({workerId:f.WORKER_ID,error:_,finished:!1})}}function p(v){var _;(v=v||{}).chunkSize||(v.chunkSize=f.RemoteChunkSize),d.call(this,v),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(F){this._input=F,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(_=new XMLHttpRequest,this._config.withCredentials&&(_.withCredentials=this._config.withCredentials),n||(_.onload=A(this._chunkLoaded,this),_.onerror=A(this._chunkError,this)),_.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var F=this._config.downloadRequestHeaders;for(var D in F)_.setRequestHeader(D,F[D])}if(this._config.chunkSize){var H=this._start+this._config.chunkSize-1;_.setRequestHeader("Range","bytes="+this._start+"-"+H)}try{_.send(this._config.downloadRequestBody)}catch(ee){this._chunkError(ee.message)}n&&_.status===0&&this._chunkError()}},this._chunkLoaded=function(){_.readyState===4&&(_.status<200||400<=_.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:_.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(F){var D=F.getResponseHeader("Content-Range");return D===null?-1:parseInt(D.substring(D.lastIndexOf("/")+1))}(_),this.parseChunk(_.responseText)))},this._chunkError=function(F){var D=_.statusText||F;this._sendError(new Error(D))}}function w(v){var _,F;(v=v||{}).chunkSize||(v.chunkSize=f.LocalChunkSize),d.call(this,v);var D=typeof FileReader<"u";this.stream=function(H){this._input=H,F=H.slice||H.webkitSlice||H.mozSlice,D?((_=new FileReader).onload=A(this._chunkLoaded,this),_.onerror=A(this._chunkError,this)):_=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var H=this._input;if(this._config.chunkSize){var ee=Math.min(this._start+this._config.chunkSize,this._input.size);H=F.call(H,this._start,ee)}var ie=_.readAsText(H,this._config.encoding);D||this._chunkLoaded({target:{result:ie}})},this._chunkLoaded=function(H){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(H.target.result)},this._chunkError=function(){this._sendError(_.error)}}function P(v){var _;d.call(this,v=v||{}),this.stream=function(F){return _=F,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var F,D=this._config.chunkSize;return D?(F=_.substring(0,D),_=_.substring(D)):(F=_,_=""),this._finished=!_,this.parseChunk(F)}}}function Q(v){d.call(this,v=v||{});var _=[],F=!0,D=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(H){this._input=H,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){D&&_.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),_.length?this.parseChunk(_.shift()):F=!0},this._streamData=A(function(H){try{_.push(typeof H=="string"?H:H.toString(this._config.encoding)),F&&(F=!1,this._checkIsFinished(),this.parseChunk(_.shift()))}catch(ee){this._streamError(ee)}},this),this._streamError=A(function(H){this._streamCleanUp(),this._sendError(H)},this),this._streamEnd=A(function(){this._streamCleanUp(),D=!0,this._streamData("")},this),this._streamCleanUp=A(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function M(v){var _,F,D,H=Math.pow(2,53),ee=-H,ie=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Te=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Le=this,X=0,Re=0,te=!1,at=!1,Ve=[],I={data:[],errors:[],meta:{}};if(x(v.step)){var J=v.step;v.step=function(re){if(I=re,ye())oe();else{if(oe(),I.data.length===0)return;X+=re.data.length,v.preview&&X>v.preview?F.abort():(I.data=I.data[0],J(I,Le))}}}function ve(re){return v.skipEmptyLines==="greedy"?re.join("").trim()==="":re.length===1&&re[0].length===0}function oe(){return I&&D&&(De("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+f.DefaultDelimiter+"'"),D=!1),v.skipEmptyLines&&(I.data=I.data.filter(function(re){return!ve(re)})),ye()&&function(){if(!I)return;function re(ze,je){x(v.transformHeader)&&(ze=v.transformHeader(ze,je)),Ve.push(ze)}if(Array.isArray(I.data[0])){for(var Ce=0;ye()&&Ce<I.data.length;Ce++)I.data[Ce].forEach(re);I.data.splice(0,1)}else I.data.forEach(re)}(),function(){if(!I||!v.header&&!v.dynamicTyping&&!v.transform)return I;function re(ze,je){var Ae,Ye=v.header?{}:[];for(Ae=0;Ae<ze.length;Ae++){var He=Ae,Oe=ze[Ae];v.header&&(He=Ae>=Ve.length?"__parsed_extra":Ve[Ae]),v.transform&&(Oe=v.transform(Oe,He)),Oe=We(He,Oe),He==="__parsed_extra"?(Ye[He]=Ye[He]||[],Ye[He].push(Oe)):Ye[He]=Oe}return v.header&&(Ae>Ve.length?De("FieldMismatch","TooManyFields","Too many fields: expected "+Ve.length+" fields but parsed "+Ae,Re+je):Ae<Ve.length&&De("FieldMismatch","TooFewFields","Too few fields: expected "+Ve.length+" fields but parsed "+Ae,Re+je)),Ye}var Ce=1;return!I.data.length||Array.isArray(I.data[0])?(I.data=I.data.map(re),Ce=I.data.length):I.data=re(I.data,0),v.header&&I.meta&&(I.meta.fields=Ve),Re+=Ce,I}()}function ye(){return v.header&&Ve.length===0}function We(re,Ce){return ze=re,v.dynamicTypingFunction&&v.dynamicTyping[ze]===void 0&&(v.dynamicTyping[ze]=v.dynamicTypingFunction(ze)),(v.dynamicTyping[ze]||v.dynamicTyping)===!0?Ce==="true"||Ce==="TRUE"||Ce!=="false"&&Ce!=="FALSE"&&(function(je){if(ie.test(je)){var Ae=parseFloat(je);if(ee<Ae&&Ae<H)return!0}return!1}(Ce)?parseFloat(Ce):Te.test(Ce)?new Date(Ce):Ce===""?null:Ce):Ce;var ze}function De(re,Ce,ze,je){var Ae={type:re,code:Ce,message:ze};je!==void 0&&(Ae.row=je),I.errors.push(Ae)}this.parse=function(re,Ce,ze){var je=v.quoteChar||'"';if(v.newline||(v.newline=function(He,Oe){He=He.substring(0,1048576);var pt=new RegExp(ae(Oe)+"([^]*?)"+ae(Oe),"gm"),lt=(He=He.replace(pt,"")).split("\r"),bt=He.split(`
`),_t=1<bt.length&&bt[0].length<lt[0].length;if(lt.length===1||_t)return`
`;for(var it=0,Pe=0;Pe<lt.length;Pe++)lt[Pe][0]===`
`&&it++;return it>=lt.length/2?`\r
`:"\r"}(re,je)),D=!1,v.delimiter)x(v.delimiter)&&(v.delimiter=v.delimiter(re),I.meta.delimiter=v.delimiter);else{var Ae=function(He,Oe,pt,lt,bt){var _t,it,Pe,qe;bt=bt||[",","	","|",";",f.RECORD_SEP,f.UNIT_SEP];for(var Ft=0;Ft<bt.length;Ft++){var Me=bt[Ft],At=0,kt=0,It=0;Pe=void 0;for(var yt=new le({comments:lt,delimiter:Me,newline:Oe,preview:10}).parse(He),Ct=0;Ct<yt.data.length;Ct++)if(pt&&ve(yt.data[Ct]))It++;else{var Lt=yt.data[Ct].length;kt+=Lt,Pe!==void 0?0<Lt&&(At+=Math.abs(Lt-Pe),Pe=Lt):Pe=Lt}0<yt.data.length&&(kt/=yt.data.length-It),(it===void 0||At<=it)&&(qe===void 0||qe<kt)&&1.99<kt&&(it=At,_t=Me,qe=kt)}return{successful:!!(v.delimiter=_t),bestDelimiter:_t}}(re,v.newline,v.skipEmptyLines,v.comments,v.delimitersToGuess);Ae.successful?v.delimiter=Ae.bestDelimiter:(D=!0,v.delimiter=f.DefaultDelimiter),I.meta.delimiter=v.delimiter}var Ye=W(v);return v.preview&&v.header&&Ye.preview++,_=re,F=new le(Ye),I=F.parse(_,Ce,ze),oe(),te?{meta:{paused:!0}}:I||{meta:{paused:!1}}},this.paused=function(){return te},this.pause=function(){te=!0,F.abort(),_=x(v.chunk)?"":_.substring(F.getCharIndex())},this.resume=function(){Le.streamer._halted?(te=!1,Le.streamer.parseChunk(_,!0)):setTimeout(Le.resume,3)},this.aborted=function(){return at},this.abort=function(){at=!0,F.abort(),I.meta.aborted=!0,x(v.complete)&&v.complete(I),_=""}}function ae(v){return v.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function le(v){var _,F=(v=v||{}).delimiter,D=v.newline,H=v.comments,ee=v.step,ie=v.preview,Te=v.fastMode,Le=_=v.quoteChar===void 0||v.quoteChar===null?'"':v.quoteChar;if(v.escapeChar!==void 0&&(Le=v.escapeChar),(typeof F!="string"||-1<f.BAD_DELIMITERS.indexOf(F))&&(F=","),H===F)throw new Error("Comment character same as delimiter");H===!0?H="#":(typeof H!="string"||-1<f.BAD_DELIMITERS.indexOf(H))&&(H=!1),D!==`
`&&D!=="\r"&&D!==`\r
`&&(D=`
`);var X=0,Re=!1;this.parse=function(te,at,Ve){if(typeof te!="string")throw new Error("Input must be a string");var I=te.length,J=F.length,ve=D.length,oe=H.length,ye=x(ee),We=[],De=[],re=[],Ce=X=0;if(!te)return gt();if(v.header&&!at){var ze=te.split(D)[0].split(F),je=[],Ae={},Ye=!1;for(var He in ze){var Oe=ze[He];x(v.transformHeader)&&(Oe=v.transformHeader(Oe,He));var pt=Oe,lt=Ae[Oe]||0;for(0<lt&&(Ye=!0,pt=Oe+"_"+lt),Ae[Oe]=lt+1;je.includes(pt);)pt=pt+"_"+lt;je.push(pt)}if(Ye){var bt=te.split(D);bt[0]=je.join(F),te=bt.join(D)}}if(Te||Te!==!1&&te.indexOf(_)===-1){for(var _t=te.split(D),it=0;it<_t.length;it++){if(re=_t[it],X+=re.length,it!==_t.length-1)X+=D.length;else if(Ve)return gt();if(!H||re.substring(0,oe)!==H){if(ye){if(We=[],It(re.split(F)),xt(),Re)return gt()}else It(re.split(F));if(ie&&ie<=it)return We=We.slice(0,ie),gt(!0)}}return gt()}for(var Pe=te.indexOf(F,X),qe=te.indexOf(D,X),Ft=new RegExp(ae(Le)+ae(_),"g"),Me=te.indexOf(_,X);;)if(te[X]!==_)if(H&&re.length===0&&te.substring(X,X+oe)===H){if(qe===-1)return gt();X=qe+ve,qe=te.indexOf(D,X),Pe=te.indexOf(F,X)}else if(Pe!==-1&&(Pe<qe||qe===-1))re.push(te.substring(X,Pe)),X=Pe+J,Pe=te.indexOf(F,X);else{if(qe===-1)break;if(re.push(te.substring(X,qe)),Lt(qe+ve),ye&&(xt(),Re))return gt();if(ie&&We.length>=ie)return gt(!0)}else for(Me=X,X++;;){if((Me=te.indexOf(_,Me+1))===-1)return Ve||De.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:We.length,index:X}),Ct();if(Me===I-1)return Ct(te.substring(X,Me).replace(Ft,_));if(_!==Le||te[Me+1]!==Le){if(_===Le||Me===0||te[Me-1]!==Le){Pe!==-1&&Pe<Me+1&&(Pe=te.indexOf(F,Me+1)),qe!==-1&&qe<Me+1&&(qe=te.indexOf(D,Me+1));var At=yt(qe===-1?Pe:Math.min(Pe,qe));if(te.substr(Me+1+At,J)===F){re.push(te.substring(X,Me).replace(Ft,_)),te[X=Me+1+At+J]!==_&&(Me=te.indexOf(_,X)),Pe=te.indexOf(F,X),qe=te.indexOf(D,X);break}var kt=yt(qe);if(te.substring(Me+1+kt,Me+1+kt+ve)===D){if(re.push(te.substring(X,Me).replace(Ft,_)),Lt(Me+1+kt+ve),Pe=te.indexOf(F,X),Me=te.indexOf(_,X),ye&&(xt(),Re))return gt();if(ie&&We.length>=ie)return gt(!0);break}De.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:We.length,index:X}),Me++}}else Me++}return Ct();function It(ot){We.push(ot),Ce=X}function yt(ot){var vr=0;if(ot!==-1){var ur=te.substring(Me+1,ot);ur&&ur.trim()===""&&(vr=ur.length)}return vr}function Ct(ot){return Ve||(ot===void 0&&(ot=te.substring(X)),re.push(ot),X=I,It(re),ye&&xt()),gt()}function Lt(ot){X=ot,It(re),re=[],qe=te.indexOf(D,X)}function gt(ot){return{data:We,errors:De,meta:{delimiter:F,linebreak:D,aborted:Re,truncated:!!ot,cursor:Ce+(at||0)}}}function xt(){ee(gt()),We=[],De=[]}},this.abort=function(){Re=!0},this.getCharIndex=function(){return X}}function se(v){var _=v.data,F=o[_.workerId],D=!1;if(_.error)F.userError(_.error,_.file);else if(_.results&&_.results.data){var H={abort:function(){D=!0,z(_.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:T,resume:T};if(x(F.userStep)){for(var ee=0;ee<_.results.data.length&&(F.userStep({data:_.results.data[ee],errors:_.results.errors,meta:_.results.meta},H),!D);ee++);delete _.results}else x(F.userChunk)&&(F.userChunk(_.results,H,_.file),delete _.results)}_.finished&&!D&&z(_.workerId,_.results)}function z(v,_){var F=o[v];x(F.userComplete)&&F.userComplete(_),F.terminate(),delete o[v]}function T(){throw new Error("Not implemented.")}function W(v){if(typeof v!="object"||v===null)return v;var _=Array.isArray(v)?[]:{};for(var F in v)_[F]=W(v[F]);return _}function A(v,_){return function(){v.apply(_,arguments)}}function x(v){return typeof v=="function"}return s&&(a.onmessage=function(v){var _=v.data;if(f.WORKER_ID===void 0&&_&&(f.WORKER_ID=_.workerId),typeof _.input=="string")a.postMessage({workerId:f.WORKER_ID,results:f.parse(_.input,_.config),finished:!0});else if(a.File&&_.input instanceof File||_.input instanceof Object){var F=f.parse(_.input,_.config);F&&a.postMessage({workerId:f.WORKER_ID,results:F,finished:!0})}}),(p.prototype=Object.create(d.prototype)).constructor=p,(w.prototype=Object.create(d.prototype)).constructor=w,(P.prototype=Object.create(P.prototype)).constructor=P,(Q.prototype=Object.create(d.prototype)).constructor=Q,f})})(vl);var Mf=vl.exports;const Ca=dl(Mf);var Ze=(i=>(i.LookingGlass="Looking Glass",i.DensityMap="Density Map",i.ValenceMap="Valence Map",i))(Ze||{});function Sf(i){i.classList.remove("hidden");const{width:e,height:t}=i.getBoundingClientRect();return i.classList.add("hidden"),{newWidth:e,newHeight:t,imgWidth:i.naturalWidth,imgHeight:i.naturalHeight}}function Ff(i,e,t){const a=i.getContext("2d");if(a==null)throw"Could not get context while resizing the canvas.";const n=window.devicePixelRatio||1;i.width=e*n,i.height=t*n,a.scale(n,n)}function Ea(i,e,t,a){const n=e.getContext("2d");if(n==null)throw"Could not get context while drawing persona on the canvas.";i.classList.remove("hidden"),n.drawImage(i,0,0,t,a),n.globalCompositeOperation="source-atop",i.classList.add("hidden")}function pl(i,e,t,a){if(i.length<2)return;e.lineJoin="round",e.lineCap="round",t&&(e.strokeStyle=t),a&&(e.lineWidth=a);let n=i[0],s=i[1];e.beginPath(),e.moveTo(s.x,s.y);for(let o=1;o<i.length;o++){const c=If(n,s);e.quadraticCurveTo(n.x,n.y,c.x,c.y),n=i[o],s=i[o+1]}n.x+=.1,n.y+=.1,e.lineTo(n.x,n.y),e.stroke()}function If(i,e){return{x:i.x+(e.x-i.x)/2,y:i.y+(e.y-i.y)/2}}function Lf(i,e,t){const a=e.getContext("2d");if(a==null)throw"Could not get context to draw strokes.";for(let n of i){let s=n.points,o=n.brushSize;t!==void 0&&(s=ml(n.points,t),o*=t),pl(s,a,n.brushColor,o)}}function ml(i,e){return i.map(t=>({x:t.x*e,y:t.y*e}))}function Af(i){return i.FemaleFront?"Female":"Male"}class Tf{constructor({id:e,drawing:t}){zt(this,"id");zt(this,"persona");zt(this,"drawing");zt(this,"totalDrawingArea");this.id=e,this.drawing=t,this.persona=Af(t),this.totalDrawingArea=0}computeStrokeAreas(){var e;for(const t of Object.values(this.drawing)){t.sensationPixelMap||(t.sensationPixelMap={}),t.drawnPoints||(t.drawnPoints=[]);for(const a of t.strokes){const n=document.createElement("canvas");n.width=t.imgWidth,n.height=t.imgHeight,Lf([a],n);const s=n.getContext("2d");if(s==null)throw`Could not get context to draw stroke ${a} of participant ${this.id}.`;const o=s.getImageData(0,0,t.imgWidth,t.imgHeight).data;let c=0,f,g,d,p;for(let w=3,P=o.length;w<P;w+=4)o[w]>0&&(++c,f=a.valence,g=a.intensity,d=Math.floor(w/4)%t.imgWidth,p=Math.floor(w/4/t.imgWidth),t.drawnPoints.push({x:d,y:p,valence:f,intensity:g}),(e=t.sensationPixelMap)[d]||(e[d]={}),t.sensationPixelMap[d][p]={valence:f,intensity:g});a.area=c,this.totalDrawingArea+=c}}}}class Ma{constructor(){zt(this,"participants",[]);zt(this,"personas",{Female:[],Male:[]});zt(this,"drawingsPerSide",{})}addParticipant(e){this.participants.push(e),this.personas[e.persona].push(e),this.classifyDrawing(e.drawing)}classifyDrawing(e){for(const t of Object.keys(e)){const a=t,n=this.drawingsPerSide[a]??[];n.push(e),this.drawingsPerSide[a]=n}}}function Rf(i,{delay:e=0,duration:t=400,easing:a=kf}={}){const n=+getComputedStyle(i).opacity;return{delay:e,duration:t,easing:a,css:s=>`opacity: ${s*n}`}}function Sa(i){let e,t,a;const n=i[8].default,s=ar(n,i,i[7],null);return{c(){e=Z("ul"),s&&s.c(),this.h()},l(o){e=K(o,"UL",{class:!0});var c=G(e);s&&s.l(c),c.forEach(C),this.h()},h(){E(e,"class","absolute top-full left-0 w-48 p-1 bg-neutral-700 shadow")},m(o,c){Y(o,e,c),s&&s.m(e,null),a=!0},p(o,c){s&&s.p&&(!a||c&128)&&lr(s,n,o,o[7],a?ir(n,o[7],c,null):sr(o[7]),null)},i(o){a||(N(s,o),t&&t.end(1),a=!0)},o(o){U(s,o),t=$f(e,Rf,{duration:100}),a=!1},d(o){o&&C(e),s&&s.d(o),o&&t&&t.end()}}}function Df(i){let e,t,a,n,s,o,c,f=i[0]&&Sa(i);return{c(){e=Z("div"),t=Z("button"),a=Be(i[1]),n=be(),f&&f.c(),this.h()},l(g){e=K(g,"DIV",{class:!0});var d=G(e);t=K(d,"BUTTON",{class:!0});var p=G(t);a=xe(p,i[1]),p.forEach(C),n=_e(d),f&&f.l(d),d.forEach(C),this.h()},h(){E(t,"class","h-full px-3 text-neutral-100 text-xs"),vt(t,"bg-neutral-700",i[0]),E(e,"class","relative flex items-center h-full")},m(g,d){Y(g,e,d),B(e,t),B(t,a),B(e,n),f&&f.m(e,null),i[9](e),s=!0,o||(c=[wt(window,"click",i[4]),wt(t,"click",i[3])],o=!0)},p(g,[d]){(!s||d&2)&&$t(a,g[1]),(!s||d&1)&&vt(t,"bg-neutral-700",g[0]),g[0]?f?(f.p(g,d),d&1&&N(f,1)):(f=Sa(g),f.c(),N(f,1),f.m(e,null)):f&&(ft(),U(f,1,1,()=>{f=null}),ut())},i(g){s||(N(f),s=!0)},o(g){U(f),s=!1},d(g){g&&C(e),f&&f.d(),i[9](null),o=!1,an(c)}}}function Of(i,e,t){let{$$slots:a={},$$scope:n}=e,{title:s}=e,{isOpen:o=!1}=e,{enableIcon:c=!1}=e;function f(){t(0,o=!1)}let g;wf("menu",{enableIcon:c});function d(){t(0,o=!o)}function p(P){P.target instanceof Node&&g.contains(P.target)===!1&&t(0,o=!1)}function w(P){st[P?"unshift":"push"](()=>{g=P,t(2,g)})}return i.$$set=P=>{"title"in P&&t(1,s=P.title),"isOpen"in P&&t(0,o=P.isOpen),"enableIcon"in P&&t(5,c=P.enableIcon),"$$scope"in P&&t(7,n=P.$$scope)},[o,s,g,d,p,c,f,n,a,w]}class bl extends rt{constructor(e){super(),nt(this,e,Of,Df,Ge,{title:1,isOpen:0,enableIcon:5,close:6})}get close(){return this.$$.ctx[6]}}const Pf=i=>({isActive:i&1}),Fa=i=>({isActive:i[0]});function Nf(i){let e,t;const a=i[3].icon,n=ar(a,i,i[2],Fa);return{c(){e=Z("span"),n&&n.c(),this.h()},l(s){e=K(s,"SPAN",{class:!0});var o=G(e);n&&n.l(o),o.forEach(C),this.h()},h(){E(e,"class","w-[16px] mr-1")},m(s,o){Y(s,e,o),n&&n.m(e,null),t=!0},p(s,o){n&&n.p&&(!t||o&5)&&lr(n,a,s,s[2],t?ir(a,s[2],o,Pf):sr(s[2]),Fa)},i(s){t||(N(n,s),t=!0)},o(s){U(n,s),t=!1},d(s){s&&C(e),n&&n.d(s)}}}function zf(i){let e,t,a,n,s,o,c=i[1]&&Nf(i);const f=i[3].default,g=ar(f,i,i[2],null);return{c(){e=Z("li"),t=Z("button"),c&&c.c(),a=be(),g&&g.c(),this.h()},l(d){e=K(d,"LI",{class:!0});var p=G(e);t=K(p,"BUTTON",{class:!0});var w=G(t);c&&c.l(w),a=_e(w),g&&g.l(w),w.forEach(C),p.forEach(C),this.h()},h(){E(t,"class","flex items-center w-full py-1 pr-2 "+(i[1]?"pl-1":"pl-2")+" text-xs text-neutral-100 text-left"),vt(t,"hover:bg-blue-500",!i[0]),E(e,"class","w-full")},m(d,p){Y(d,e,p),B(e,t),c&&c.m(t,null),B(t,a),g&&g.m(t,null),n=!0,s||(o=wt(e,"click",i[4]),s=!0)},p(d,[p]){d[1]&&c.p(d,p),g&&g.p&&(!n||p&4)&&lr(g,f,d,d[2],n?ir(f,d[2],p,null):sr(d[2]),null),(!n||p&1)&&vt(t,"hover:bg-blue-500",!d[0])},i(d){n||(N(c),N(g,d),n=!0)},o(d){U(c),U(g,d),n=!1},d(d){d&&C(e),c&&c.d(),g&&g.d(d),s=!1,o()}}}function Bf(i,e,t){let{$$slots:a={},$$scope:n}=e,{isActive:s=!1}=e;const{enableIcon:o}=yf("menu");function c(f){Er.call(this,i,f)}return i.$$set=f=>{"isActive"in f&&t(0,s=f.isActive),"$$scope"in f&&t(2,n=f.$$scope)},[s,o,n,a,c]}class Bt extends rt{constructor(e){super(),nt(this,e,Bf,zf,Ge,{isActive:0})}}function xf(i){let e;return{c(){e=Z("hr"),this.h()},l(t){e=K(t,"HR",{class:!0}),this.h()},h(){E(e,"class","my-0.5 border-0 border-b border-neutral-600")},m(t,a){Y(t,e,a)},p:Ue,i:Ue,o:Ue,d(t){t&&C(e)}}}class Uf extends rt{constructor(e){super(),nt(this,e,null,xf,Ge,{})}}const Wf=i=>({}),Ia=i=>({}),Hf=i=>({}),La=i=>({});function Aa(i){let e,t;const a=i[5].settings,n=ar(a,i,i[4],Ia);return{c(){e=Z("aside"),n&&n.c(),this.h()},l(s){e=K(s,"ASIDE",{class:!0,style:!0});var o=G(e);n&&n.l(o),o.forEach(C),this.h()},h(){E(e,"class","flex flex-col h-full bg-neutral-600 border-l border-neutral-900"),rn(e,"width",i[0])},m(s,o){Y(s,e,o),n&&n.m(e,null),i[7](e),t=!0},p(s,o){n&&n.p&&(!t||o&16)&&lr(n,a,s,s[4],t?ir(a,s[4],o,Wf):sr(s[4]),Ia),(!t||o&1)&&rn(e,"width",s[0])},i(s){t||(N(n,s),t=!0)},o(s){U(n,s),t=!1},d(s){s&&C(e),n&&n.d(s),i[7](null)}}}function qf(i){let e,t,a,n;const s=i[5].panels,o=ar(s,i,i[4],La);let c=i[3].settings&&Aa(i);return{c(){e=Z("section"),t=Z("main"),o&&o.c(),a=be(),c&&c.c(),this.h()},l(f){e=K(f,"SECTION",{class:!0});var g=G(e);t=K(g,"MAIN",{class:!0});var d=G(t);o&&o.l(d),d.forEach(C),a=_e(g),c&&c.l(g),g.forEach(C),this.h()},h(){E(t,"class","flex-grow grid grid-cols-1 gap-[2px] bg-neutral-600"),E(e,"class","w-full h-full flex items-stretch")},m(f,g){Y(f,e,g),B(e,t),o&&o.m(t,null),i[6](t),B(e,a),c&&c.m(e,null),n=!0},p(f,[g]){o&&o.p&&(!n||g&16)&&lr(o,s,f,f[4],n?ir(s,f[4],g,Hf):sr(f[4]),La),f[3].settings?c?(c.p(f,g),g&8&&N(c,1)):(c=Aa(f),c.c(),N(c,1),c.m(e,null)):c&&(ft(),U(c,1,1,()=>{c=null}),ut())},i(f){n||(N(o,f),N(c),n=!0)},o(f){U(o,f),U(c),n=!1},d(f){f&&C(e),o&&o.d(f),i[6](null),c&&c.d()}}}function Gf(i,e,t){let{$$slots:a={},$$scope:n}=e;const s=Cf(a);let{sidebarWidth:o="18rem"}=e,c,f;function g(p){st[p?"unshift":"push"](()=>{c=p,t(1,c)})}function d(p){st[p?"unshift":"push"](()=>{f=p,t(2,f)})}return i.$$set=p=>{"sidebarWidth"in p&&t(0,o=p.sidebarWidth),"$$scope"in p&&t(4,n=p.$$scope)},[o,c,f,s,n,a,g,d]}class on extends rt{constructor(e){super(),nt(this,e,Gf,qf,Ge,{sidebarWidth:0})}}function Ta(i,e,t){const a=i.slice();return a[9]=e[t],a}function Ra(i){let e=i[1],t,a=Oa(i);return{c(){a.c(),t=Ke()},l(n){a.l(n),t=Ke()},m(n,s){a.m(n,s),Y(n,t,s)},p(n,s){s&2&&Ge(e,e=n[1])?(a.d(1),a=Oa(n),a.c(),a.m(t.parentNode,t)):a.p(n,s)},d(n){n&&C(t),a.d(n)}}}function Da(i){let e,t=i[9]+"",a,n,s,o;function c(){return i[7](i[9])}return{c(){e=Z("button"),a=Be(t),n=be(),this.h()},l(f){e=K(f,"BUTTON",{class:!0});var g=G(e);a=xe(g,t),n=_e(g),g.forEach(C),this.h()},h(){E(e,"class","panel-tab svelte-143z4t9"),vt(e,"active",i[1]===i[9]),vt(e,"highlight",i[3])},m(f,g){Y(f,e,g),B(e,a),B(e,n),s||(o=wt(e,"click",c),s=!0)},p(f,g){i=f,g&1&&t!==(t=i[9]+"")&&$t(a,t),g&3&&vt(e,"active",i[1]===i[9]),g&8&&vt(e,"highlight",i[3])},d(f){f&&C(e),s=!1,o()}}}function Oa(i){let e,t=i[0],a=[];for(let n=0;n<t.length;n+=1)a[n]=Da(Ta(i,t,n));return{c(){for(let n=0;n<a.length;n+=1)a[n].c();e=Ke()},l(n){for(let s=0;s<a.length;s+=1)a[s].l(n);e=Ke()},m(n,s){for(let o=0;o<a.length;o+=1)a[o]&&a[o].m(n,s);Y(n,e,s)},p(n,s){if(s&27){t=n[0];let o;for(o=0;o<t.length;o+=1){const c=Ta(n,t,o);a[o]?a[o].p(c,s):(a[o]=Da(c),a[o].c(),a[o].m(e.parentNode,e))}for(;o<a.length;o+=1)a[o].d(1);a.length=t.length}},d(n){or(a,n),n&&C(e)}}}function Pa(i){let e,t;return{c(){e=Z("span"),t=Be(i[2]),this.h()},l(a){e=K(a,"SPAN",{class:!0});var n=G(e);t=xe(n,i[2]),n.forEach(C),this.h()},h(){E(e,"class","z-10 absolute top-4 right-4 py-1 px-2 bg-neutral-900 shadow bg-opacity-50 text-neutral-100 text-xs")},m(a,n){Y(a,e,n),B(e,t)},p(a,n){n&4&&$t(t,a[2])},d(a){a&&C(e)}}}function Vf(i){let e,t,a,n,s,o,c=i[0]!==void 0&&Ra(i),f=i[2]&&Pa(i);const g=i[6].default,d=ar(g,i,i[5],null);return{c(){e=Z("div"),t=Z("div"),c&&c.c(),a=be(),n=Z("div"),f&&f.c(),s=be(),d&&d.c(),this.h()},l(p){e=K(p,"DIV",{class:!0});var w=G(e);t=K(w,"DIV",{class:!0});var P=G(t);c&&c.l(P),P.forEach(C),a=_e(w),n=K(w,"DIV",{class:!0});var Q=G(n);f&&f.l(Q),s=_e(Q),d&&d.l(Q),Q.forEach(C),w.forEach(C),this.h()},h(){E(t,"class","panel-tabs w-full h-5 svelte-143z4t9"),E(n,"class","panel relative flex-grow w-full h-full"),E(e,"class","panel-container svelte-143z4t9")},m(p,w){Y(p,e,w),B(e,t),c&&c.m(t,null),B(e,a),B(e,n),f&&f.m(n,null),B(n,s),d&&d.m(n,null),o=!0},p(p,[w]){p[0]!==void 0?c?c.p(p,w):(c=Ra(p),c.c(),c.m(t,null)):c&&(c.d(1),c=null),p[2]?f?f.p(p,w):(f=Pa(p),f.c(),f.m(n,s)):f&&(f.d(1),f=null),d&&d.p&&(!o||w&32)&&lr(d,g,p,p[5],o?ir(g,p[5],w,null):sr(p[5]),null)},i(p){o||(N(d,p),o=!0)},o(p){U(d,p),o=!1},d(p){p&&C(e),c&&c.d(),f&&f.d(),d&&d.d(p)}}}function jf(i,e,t){let{$$slots:a={},$$scope:n}=e,{tabs:s=void 0}=e,{activeTab:o=void 0}=e,{caption:c=void 0}=e,{highlightTab:f=!0}=e;const g=dr();function d(w){g("tabClick",w)}const p=w=>d(w);return i.$$set=w=>{"tabs"in w&&t(0,s=w.tabs),"activeTab"in w&&t(1,o=w.activeTab),"caption"in w&&t(2,c=w.caption),"highlightTab"in w&&t(3,f=w.highlightTab),"$$scope"in w&&t(5,n=w.$$scope)},[s,o,c,f,d,n,a,p]}class fr extends rt{constructor(e){super(),nt(this,e,jf,Vf,Ge,{tabs:0,activeTab:1,caption:2,highlightTab:3})}}function Na(i,e,t){const a=i.slice();return a[5]=e[t],a[7]=t,a}function za(i){let e,t=i[5]+"",a,n;return{c(){e=Z("option"),a=Be(t),this.h()},l(s){e=K(s,"OPTION",{});var o=G(e);a=xe(o,t),o.forEach(C),this.h()},h(){e.__value=i[7],e.value=e.__value,e.selected=n=i[2]===i[7]},m(s,o){Y(s,e,o),B(e,a)},p(s,o){o&2&&t!==(t=s[5]+"")&&$t(a,t),o&4&&n!==(n=s[2]===s[7])&&(e.selected=n)},d(s){s&&C(e)}}}function Yf(i){let e,t,a,n,s,o,c,f=i[1],g=[];for(let d=0;d<f.length;d+=1)g[d]=za(Na(i,f,d));return{c(){e=Z("label"),t=Be(i[0]),a=Be(":"),n=be(),s=Z("select");for(let d=0;d<g.length;d+=1)g[d].c();this.h()},l(d){e=K(d,"LABEL",{class:!0});var p=G(e);t=xe(p,i[0]),a=xe(p,":"),p.forEach(C),n=_e(d),s=K(d,"SELECT",{name:!0,id:!0,class:!0});var w=G(s);for(let P=0;P<g.length;P+=1)g[P].l(w);w.forEach(C),this.h()},h(){E(e,"class","w-1/3 pr-2 text-xs text-neutral-400 text-right"),E(s,"name",i[0]),E(s,"id",i[0]),E(s,"class","emboss py-1 px-2 bg-neutral-700 border border-neutral-800 text-xs text-neutral-200")},m(d,p){Y(d,e,p),B(e,t),B(e,a),Y(d,n,p),Y(d,s,p);for(let w=0;w<g.length;w+=1)g[w]&&g[w].m(s,null);o||(c=wt(s,"change",i[3]),o=!0)},p(d,[p]){if(p&1&&$t(t,d[0]),p&6){f=d[1];let w;for(w=0;w<f.length;w+=1){const P=Na(d,f,w);g[w]?g[w].p(P,p):(g[w]=za(P),g[w].c(),g[w].m(s,null))}for(;w<g.length;w+=1)g[w].d(1);g.length=f.length}p&1&&E(s,"name",d[0]),p&1&&E(s,"id",d[0])},i:Ue,o:Ue,d(d){d&&C(e),d&&C(n),d&&C(s),or(g,d),o=!1,c()}}}function Qf(i,e,t){let{name:a}=e,{options:n}=e,{selected:s=void 0}=e;const o=dr();function c(f){if(f.target){const g=f.target;o("change",g.value)}}return i.$$set=f=>{"name"in f&&t(0,a=f.name),"options"in f&&t(1,n=f.options),"selected"in f&&t(2,s=f.selected)},[a,n,s,c]}class Xf extends rt{constructor(e){super(),nt(this,e,Qf,Yf,Ge,{name:0,options:1,selected:2})}}function Jf(i){let e;return{c(){e=Z("td"),this.h()},l(t){e=K(t,"TD",{class:!0});var a=G(e);a.forEach(C),this.h()},h(){E(e,"class","py-1 px-2 border-l border-neutral-800 text-neutral-100 text-xs")},m(t,a){Y(t,e,a),e.innerHTML=i[0]},p(t,[a]){a&1&&(e.innerHTML=t[0])},i:Ue,o:Ue,d(t){t&&C(e)}}}function Zf(i,e,t){let{value:a}=e,{formatter:n=void 0}=e,s;if(n)s=n(a);else if(typeof a=="string")s=a;else if(a.toString)s=a.toString();else throw"Error: Cannot format value.";return i.$$set=o=>{"value"in o&&t(1,a=o.value),"formatter"in o&&t(2,n=o.formatter)},[s,a,n]}class Kf extends rt{constructor(e){super(),nt(this,e,Zf,Jf,Ge,{value:1,formatter:2})}}function Ba(i,e,t){const a=i.slice();return a[3]=e[t],a}function xa(i){let e,t;const a=[i[3]];let n={};for(let s=0;s<a.length;s+=1)n=Gt(n,a[s]);return e=new Kf({props:n}),{c(){ce(e.$$.fragment)},l(s){he(e.$$.fragment,s)},m(s,o){ge(e,s,o),t=!0},p(s,o){const c=o&1?ln(a,[sn(s[3])]):{};e.$set(c)},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){U(e.$$.fragment,s),t=!1},d(s){de(e,s)}}}function eu(i){let e,t,a,n,s=i[0],o=[];for(let f=0;f<s.length;f+=1)o[f]=xa(Ba(i,s,f));const c=f=>U(o[f],1,1,()=>{o[f]=null});return{c(){e=Z("tr");for(let f=0;f<o.length;f+=1)o[f].c();this.h()},l(f){e=K(f,"TR",{class:!0});var g=G(e);for(let d=0;d<o.length;d+=1)o[d].l(g);g.forEach(C),this.h()},h(){E(e,"class","hover:bg-neutral-600 border-b last:border-b-0 border-neutral-800")},m(f,g){Y(f,e,g);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(e,null);t=!0,a||(n=[wt(e,"mouseenter",i[1]),wt(e,"mouseleave",i[2])],a=!0)},p(f,[g]){if(g&1){s=f[0];let d;for(d=0;d<s.length;d+=1){const p=Ba(f,s,d);o[d]?(o[d].p(p,g),N(o[d],1)):(o[d]=xa(p),o[d].c(),N(o[d],1),o[d].m(e,null))}for(ft(),d=s.length;d<o.length;d+=1)c(d);ut()}},i(f){if(!t){for(let g=0;g<s.length;g+=1)N(o[g]);t=!0}},o(f){o=o.filter(Boolean);for(let g=0;g<o.length;g+=1)U(o[g]);t=!1},d(f){f&&C(e),or(o,f),a=!1,an(n)}}}function tu(i,e,t){let{cells:a}=e;function n(o){Er.call(this,i,o)}function s(o){Er.call(this,i,o)}return i.$$set=o=>{"cells"in o&&t(0,a=o.cells)},[a,n,s]}class ru extends rt{constructor(e){super(),nt(this,e,tu,eu,Ge,{cells:0})}}function Ua(i,e,t){const a=i.slice();return a[10]=e[t],a[12]=t,a}function Wa(i,e,t){const a=i.slice();return a[13]=e[t],a}function Ha(i){let e,t,a=i[1],n=[];for(let s=0;s<a.length;s+=1)n[s]=qa(Wa(i,a,s));return{c(){e=Z("thead"),t=Z("tr");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=K(s,"THEAD",{});var o=G(e);t=K(o,"TR",{class:!0});var c=G(t);for(let f=0;f<n.length;f+=1)n[f].l(c);c.forEach(C),o.forEach(C),this.h()},h(){E(t,"class","sticky top-0 bg-gradient-to-t from-neutral-600 to-neutral-500 border-b border-neutral-800")},m(s,o){Y(s,e,o),B(e,t);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(t,null)},p(s,o){if(o&2){a=s[1];let c;for(c=0;c<a.length;c+=1){const f=Wa(s,a,c);n[c]?n[c].p(f,o):(n[c]=qa(f),n[c].c(),n[c].m(t,null))}for(;c<n.length;c+=1)n[c].d(1);n.length=a.length}},d(s){s&&C(e),or(n,s)}}}function qa(i){let e,t=i[13]+"",a;return{c(){e=Z("th"),a=Be(t),this.h()},l(n){e=K(n,"TH",{class:!0});var s=G(e);a=xe(s,t),s.forEach(C),this.h()},h(){E(e,"class","px-2 border-l border-neutral-800 text-neutral-300 text-[0.6875rem] font-medium lowercase small-caps svelte-2meyxc")},m(n,s){Y(n,e,s),B(e,a)},p(n,s){s&2&&t!==(t=n[13]+"")&&$t(a,t)},d(n){n&&C(e)}}}function Ga(i){let e,t;const a=[i[10]];function n(){return i[7](i[12])}function s(){return i[8](i[12])}let o={};for(let c=0;c<a.length;c+=1)o=Gt(o,a[c]);return e=new ru({props:o}),e.$on("mouseenter",n),e.$on("mouseleave",s),{c(){ce(e.$$.fragment)},l(c){he(e.$$.fragment,c)},m(c,f){ge(e,c,f),t=!0},p(c,f){i=c;const g=f&4?ln(a,[sn(i[10])]):{};e.$set(g)},i(c){t||(N(e.$$.fragment,c),t=!0)},o(c){U(e.$$.fragment,c),t=!1},d(c){de(e,c)}}}function Va(i){let e,t,a=i[2],n=[];for(let o=0;o<a.length;o+=1)n[o]=Ga(Ua(i,a,o));const s=o=>U(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=Ke()},l(o){for(let c=0;c<n.length;c+=1)n[c].l(o);e=Ke()},m(o,c){for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(o,c);Y(o,e,c),t=!0},p(o,c){if(c&52){a=o[2];let f;for(f=0;f<a.length;f+=1){const g=Ua(o,a,f);n[f]?(n[f].p(g,c),N(n[f],1)):(n[f]=Ga(g),n[f].c(),N(n[f],1),n[f].m(e.parentNode,e))}for(ft(),f=a.length;f<n.length;f+=1)s(f);ut()}},i(o){if(!t){for(let c=0;c<a.length;c+=1)N(n[c]);t=!0}},o(o){n=n.filter(Boolean);for(let c=0;c<n.length;c+=1)U(n[c]);t=!1},d(o){or(n,o),o&&C(e)}}}function nu(i){let e,t,a,n,s,o,c=i[2],f,g,d=i[3]&&Ha(i),p=Va(i);return{c(){e=Z("label"),t=Be(i[0]),a=be(),n=Z("table"),d&&d.c(),s=be(),o=Z("tbody"),p.c(),this.h()},l(w){e=K(w,"LABEL",{class:!0});var P=G(e);t=xe(P,i[0]),P.forEach(C),a=_e(w),n=K(w,"TABLE",{class:!0});var Q=G(n);d&&d.l(Q),s=_e(Q),o=K(Q,"TBODY",{});var M=G(o);p.l(M),M.forEach(C),Q.forEach(C),this.h()},h(){E(e,"class","w-1/3 pr-2 text-xs text-neutral-400 text-right"),E(n,"class",f=i[6].class+" table-shadow w-fit my-1 bg-neutral-700 border border-neutral-800 svelte-2meyxc")},m(w,P){Y(w,e,P),B(e,t),Y(w,a,P),Y(w,n,P),d&&d.m(n,null),B(n,s),B(n,o),p.m(o,null),g=!0},p(w,[P]){(!g||P&1)&&$t(t,w[0]),w[3]?d?d.p(w,P):(d=Ha(w),d.c(),d.m(n,s)):d&&(d.d(1),d=null),P&4&&Ge(c,c=w[2])?(ft(),U(p,1,1,Ue),ut(),p=Va(w),p.c(),N(p,1),p.m(o,null)):p.p(w,P),(!g||P&64&&f!==(f=w[6].class+" table-shadow w-fit my-1 bg-neutral-700 border border-neutral-800 svelte-2meyxc"))&&E(n,"class",f)},i(w){g||(N(p),g=!0)},o(w){U(p),g=!1},d(w){w&&C(e),w&&C(a),w&&C(n),d&&d.d(),p.d(w)}}}function au(i,e,t){let{name:a}=e,{columns:n}=e,{rows:s}=e,{showColumns:o=!0}=e;const c=dr();function f(w){c("rowHover",w)}function g(w){c("rowLeave",w)}const d=w=>f(w),p=w=>g(w);return i.$$set=w=>{t(6,e=Gt(Gt({},e),Mr(w))),"name"in w&&t(0,a=w.name),"columns"in w&&t(1,n=w.columns),"rows"in w&&t(2,s=w.rows),"showColumns"in w&&t(3,o=w.showColumns)},e=Mr(e),[a,n,s,o,f,g,e,d,p]}class lu extends rt{constructor(e){super(),nt(this,e,au,nu,Ge,{name:0,columns:1,rows:2,showColumns:3})}}function su(i){let e,t,a,n,s,o;return{c(){e=Z("label"),t=Be(i[0]),a=Be(":"),n=be(),s=Z("span"),o=Be(i[1]),this.h()},l(c){e=K(c,"LABEL",{class:!0});var f=G(e);t=xe(f,i[0]),a=xe(f,":"),f.forEach(C),n=_e(c),s=K(c,"SPAN",{class:!0});var g=G(s);o=xe(g,i[1]),g.forEach(C),this.h()},h(){E(e,"class","text-xs text-neutral-400 text-right"),E(s,"class","text-xs text-neutral-200")},m(c,f){Y(c,e,f),B(e,t),B(e,a),Y(c,n,f),Y(c,s,f),B(s,o)},p(c,[f]){f&1&&$t(t,c[0]),f&2&&$t(o,c[1])},i:Ue,o:Ue,d(c){c&&C(e),c&&C(n),c&&C(s)}}}function iu(i,e,t){let{name:a}=e,{label:n}=e;return i.$$set=s=>{"name"in s&&t(0,a=s.name),"label"in s&&t(1,n=s.label)},[a,n]}class qt extends rt{constructor(e){super(),nt(this,e,iu,su,Ge,{name:0,label:1})}}const ou=""+new URL("../assets/female_front.cbbf7559.svg",import.meta.url).href,fu=""+new URL("../assets/female_back.f4b0cc86.svg",import.meta.url).href,uu=""+new URL("../assets/male_front.dc1ca7a4.svg",import.meta.url).href,cu=""+new URL("../assets/male_back.27c5d660.svg",import.meta.url).href,hu={FemaleFront:ou,FemaleBack:fu,MaleFront:uu,MaleBack:cu};function ja(i){let e,t,a,n,s,o;return{c(){e=Z("div"),t=ct("svg"),a=ct("circle"),n=ct("path"),s=be(),o=Be(i[0]),this.h()},l(c){e=K(c,"DIV",{class:!0});var f=G(e);t=ht(f,"svg",{class:!0,xmlns:!0,fill:!0,viewBox:!0});var g=G(t);a=ht(g,"circle",{class:!0,cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),G(a).forEach(C),n=ht(g,"path",{class:!0,fill:!0,d:!0}),G(n).forEach(C),g.forEach(C),s=_e(f),o=xe(f,i[0]),f.forEach(C),this.h()},h(){E(a,"class","opacity-25"),E(a,"cx","12"),E(a,"cy","12"),E(a,"r","10"),E(a,"stroke","currentColor"),E(a,"stroke-width","4"),E(n,"class","opacity-75"),E(n,"fill","currentColor"),E(n,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),E(t,"class","animate-spin mr-1 h-4 w-4 text-white"),E(t,"xmlns","http://www.w3.org/2000/svg"),E(t,"fill","none"),E(t,"viewBox","0 0 24 24"),E(e,"class","z-20 absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 flex items-center py-1.5 px-2 bg-neutral-900 bg-opacity-75 text-white text-xs font-medium")},m(c,f){Y(c,e,f),B(e,t),B(t,a),B(t,n),B(e,s),B(e,o)},p(c,f){f&1&&$t(o,c[0])},d(c){c&&C(e)}}}function gu(i){let e,t,a,n,s,o,c,f,g,d=i[0]&&ja(i);return{c(){e=Z("div"),t=Z("img"),n=be(),s=Z("canvas"),o=be(),d&&d.c(),this.h()},l(p){e=K(p,"DIV",{class:!0});var w=G(e);t=K(w,"IMG",{src:!0,class:!0}),n=_e(w),s=K(w,"CANVAS",{class:!0}),G(s).forEach(C),o=_e(w),d&&d.l(w),w.forEach(C),this.h()},h(){Ef(t.src,a=i[4])||E(t,"src",a),E(t,"class","absolute left-1/2 -translate-x-1/2 h-full object-contain"),E(s,"class","z-10 absolute left-1/2 -translate-x-1/2 h-full"),E(e,"class",c=(i[6].class??"")+" relative w-full h-full bg-white")},m(p,w){Y(p,e,w),B(e,t),i[15](t),B(e,n),B(e,s),i[16](s),B(e,o),d&&d.m(e,null),i[17](e),f||(g=wt(t,"load",i[5]),f=!0)},p(p,[w]){p[0]?d?d.p(p,w):(d=ja(p),d.c(),d.m(e,null)):d&&(d.d(1),d=null),w&64&&c!==(c=(p[6].class??"")+" relative w-full h-full bg-white")&&E(e,"class",c)},i:Ue,o:Ue,d(p){p&&C(e),i[15](null),i[16](null),d&&d.d(),i[17](null),f=!1,g()}}}function du(i,e,t){let{personaSide:a}=e;function n(){return Q.toDataURL("image/png")}function s(){return Q}function o(){return le}function c(v){t(0,w=v)}function f(){t(0,w=void 0)}function g(){Ea(se,Q,M,ae)}function d(v){const _=Q.getContext("2d");if(_==null)throw"Could not get context to draw strokes.";for(let F of v){let D=F.points,H=F.brushSize;if(le!==void 0)D=ml(F.points,le),H*=le;else{const ee="Could not draw strokes because the scale factor is unknown.";throw alert(ee),ee}pl(D,_,F.brushColor,H)}}const p=dr();let w="Loading persona...",P=hu[a],Q,M=0,ae=0,le=1,se,z;function T(){const{imgWidth:v,imgHeight:_}=Sf(se);M=Math.ceil(v),ae=Math.ceil(_),le=M/se.naturalWidth,Ff(Q,M,ae),Ea(se,Q,M,ae),f(),p("ready",{personaSide:a,canvas:Q,width:M,height:ae,imgWidth:v,imgHeight:_,scaleFactor:le})}function W(v){st[v?"unshift":"push"](()=>{se=v,t(2,se)})}function A(v){st[v?"unshift":"push"](()=>{Q=v,t(1,Q)})}function x(v){st[v?"unshift":"push"](()=>{z=v,t(3,z)})}return i.$$set=v=>{t(6,e=Gt(Gt({},e),Mr(v))),"personaSide"in v&&t(7,a=v.personaSide)},e=Mr(e),[w,Q,se,z,P,T,e,a,n,s,o,c,f,g,d,W,A,x]}class nr extends rt{constructor(e){super(),nt(this,e,du,gu,Ge,{personaSide:7,getImage:8,getCanvas:9,getScaleFactor:10,setMessage:11,clearMessage:12,clear:13,drawStrokes:14})}get getImage(){return this.$$.ctx[8]}get getCanvas(){return this.$$.ctx[9]}get getScaleFactor(){return this.$$.ctx[10]}get setMessage(){return this.$$.ctx[11]}get clearMessage(){return this.$$.ctx[12]}get clear(){return this.$$.ctx[13]}get drawStrokes(){return this.$$.ctx[14]}}function Ya(i,e,t){const a=i.slice();return a[17]=e[t],a}function Qa(i){let e=i[1],t,a,n=Ja(i);return{c(){n.c(),t=Ke()},l(s){n.l(s),t=Ke()},m(s,o){n.m(s,o),Y(s,t,o),a=!0},p(s,o){o&2&&Ge(e,e=s[1])?(ft(),U(n,1,1,Ue),ut(),n=Ja(s),n.c(),N(n,1),n.m(t.parentNode,t)):n.p(s,o)},i(s){a||(N(n),a=!0)},o(s){U(n),a=!1},d(s){s&&C(t),n.d(s)}}}function vu(i){let e,t,a={personaSide:i[17]};return e=new nr({props:a}),i[14](e),e.$on("ready",i[8]),{c(){ce(e.$$.fragment)},l(n){he(e.$$.fragment,n)},m(n,s){ge(e,n,s),t=!0},p(n,s){const o={};s&4&&(o.personaSide=n[17]),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){U(e.$$.fragment,n),t=!1},d(n){i[14](null),de(e,n)}}}function pu(i){let e,t,a={personaSide:i[17]};return e=new nr({props:a}),i[13](e),e.$on("ready",i[8]),{c(){ce(e.$$.fragment)},l(n){he(e.$$.fragment,n)},m(n,s){ge(e,n,s),t=!0},p(n,s){const o={};s&4&&(o.personaSide=n[17]),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){U(e.$$.fragment,n),t=!1},d(n){i[13](null),de(e,n)}}}function Xa(i){let e,t,a,n,s;const o=[pu,vu],c=[];function f(g,d){return d&4&&(e=null),e==null&&(e=!!g[17].includes("Front")),e?0:1}return t=f(i,-1),a=c[t]=o[t](i),{c(){a.c(),n=Ke()},l(g){a.l(g),n=Ke()},m(g,d){c[t].m(g,d),Y(g,n,d),s=!0},p(g,d){let p=t;t=f(g,d),t===p?c[t].p(g,d):(ft(),U(c[p],1,1,()=>{c[p]=null}),ut(),a=c[t],a?a.p(g,d):(a=c[t]=o[t](g),a.c()),N(a,1),a.m(n.parentNode,n))},i(g){s||(N(a),s=!0)},o(g){U(a),s=!1},d(g){c[t].d(g),g&&C(n)}}}function mu(i){let e,t,a=i[2],n=[];for(let o=0;o<a.length;o+=1)n[o]=Xa(Ya(i,a,o));const s=o=>U(n[o],1,1,()=>{n[o]=null});return{c(){e=Z("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=K(o,"DIV",{class:!0});var c=G(e);for(let f=0;f<n.length;f+=1)n[f].l(c);c.forEach(C),this.h()},h(){E(e,"class","flex w-full h-full")},m(o,c){Y(o,e,c);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);t=!0},p(o,c){if(c&452){a=o[2];let f;for(f=0;f<a.length;f+=1){const g=Ya(o,a,f);n[f]?(n[f].p(g,c),N(n[f],1)):(n[f]=Xa(g),n[f].c(),N(n[f],1),n[f].m(e,null))}for(ft(),f=a.length;f<n.length;f+=1)s(f);ut()}},i(o){if(!t){for(let c=0;c<a.length;c+=1)N(n[c]);t=!0}},o(o){n=n.filter(Boolean);for(let c=0;c<n.length;c+=1)U(n[c]);t=!1},d(o){o&&C(e),or(n,o)}}}function bu(i){let e,t;return e=new fr({props:{caption:"Looking Glass",$$slots:{default:[mu]},$$scope:{ctx:i}}}),{c(){ce(e.$$.fragment)},l(a){he(e.$$.fragment,a)},m(a,n){ge(e,a,n),t=!0},p(a,n){const s={};n&1048772&&(s.$$scope={dirty:n,ctx:a}),e.$set(s)},i(a){t||(N(e.$$.fragment,a),t=!0)},o(a){U(e.$$.fragment,a),t=!1},d(a){de(e,a)}}}function _u(i){let e,t,a,n,s,o,c,f,g,d,p,w,P,Q,M,ae;a=new Xf({props:{name:"Participant",options:i[0].participants.map(el),selected:i[1].id}}),a.$on("change",i[11]),o=new qt({props:{name:"Drawing area",label:`${i[1].totalDrawingArea} pixels`}}),g=new qt({props:{name:"Avg valence",label:i[3].toString()}}),w=new qt({props:{name:"Avg intensity",label:i[4].toString()}});const le=[{class:"block h-64 overflow-auto"},i[5]];let se={};for(let z=0;z<le.length;z+=1)se=Gt(se,le[z]);return M=new lu({props:se}),M.$on("rowHover",i[9]),M.$on("rowLeave",i[10]),{c(){e=Z("ul"),t=Z("li"),ce(a.$$.fragment),n=be(),s=Z("li"),ce(o.$$.fragment),c=be(),f=Z("li"),ce(g.$$.fragment),d=be(),p=Z("li"),ce(w.$$.fragment),P=be(),Q=Z("li"),ce(M.$$.fragment),this.h()},l(z){e=K(z,"UL",{class:!0});var T=G(e);t=K(T,"LI",{});var W=G(t);he(a.$$.fragment,W),W.forEach(C),n=_e(T),s=K(T,"LI",{});var A=G(s);he(o.$$.fragment,A),A.forEach(C),c=_e(T),f=K(T,"LI",{});var x=G(f);he(g.$$.fragment,x),x.forEach(C),d=_e(T),p=K(T,"LI",{});var v=G(p);he(w.$$.fragment,v),v.forEach(C),P=_e(T),Q=K(T,"LI",{});var _=G(Q);he(M.$$.fragment,_),_.forEach(C),T.forEach(C),this.h()},h(){E(e,"class","p-2")},m(z,T){Y(z,e,T),B(e,t),ge(a,t,null),B(e,n),B(e,s),ge(o,s,null),B(e,c),B(e,f),ge(g,f,null),B(e,d),B(e,p),ge(w,p,null),B(e,P),B(e,Q),ge(M,Q,null),ae=!0},p(z,T){const W={};T&1&&(W.options=z[0].participants.map(el)),T&2&&(W.selected=z[1].id),a.$set(W);const A={};T&2&&(A.label=`${z[1].totalDrawingArea} pixels`),o.$set(A);const x={};T&8&&(x.label=z[3].toString()),g.$set(x);const v={};T&16&&(v.label=z[4].toString()),w.$set(v);const _=T&32?ln(le,[le[0],sn(z[5])]):{};M.$set(_)},i(z){ae||(N(a.$$.fragment,z),N(o.$$.fragment,z),N(g.$$.fragment,z),N(w.$$.fragment,z),N(M.$$.fragment,z),ae=!0)},o(z){U(a.$$.fragment,z),U(o.$$.fragment,z),U(g.$$.fragment,z),U(w.$$.fragment,z),U(M.$$.fragment,z),ae=!1},d(z){z&&C(e),de(a),de(o),de(g),de(w),de(M)}}}function ku(i){let e,t;return e=new fr({props:{tabs:["Details"],highlightTab:!1,$$slots:{default:[_u]},$$scope:{ctx:i}}}),{c(){ce(e.$$.fragment)},l(a){he(e.$$.fragment,a)},m(a,n){ge(e,a,n),t=!0},p(a,n){const s={};n&1048635&&(s.$$scope={dirty:n,ctx:a}),e.$set(s)},i(a){t||(N(e.$$.fragment,a),t=!0)},o(a){U(e.$$.fragment,a),t=!1},d(a){de(e,a)}}}function Ja(i){let e,t;return e=new on({props:{$$slots:{settings:[ku],panels:[bu]},$$scope:{ctx:i}}}),{c(){ce(e.$$.fragment)},l(a){he(e.$$.fragment,a)},m(a,n){ge(e,a,n),t=!0},p(a,n){const s={};n&1048831&&(s.$$scope={dirty:n,ctx:a}),e.$set(s)},i(a){t||(N(e.$$.fragment,a),t=!0)},o(a){U(e.$$.fragment,a),t=!1},d(a){de(e,a)}}}function wu(i){let e,t,a=i[1]&&Qa(i);return{c(){a&&a.c(),e=Ke()},l(n){a&&a.l(n),e=Ke()},m(n,s){a&&a.m(n,s),Y(n,e,s),t=!0},p(n,[s]){n[1]?a?(a.p(n,s),s&2&&N(a,1)):(a=Qa(n),a.c(),N(a,1),a.m(e.parentNode,e)):a&&(ft(),U(a,1,1,()=>{a=null}),ut())},i(n){t||(N(a),t=!0)},o(n){U(a),t=!1},d(n){a&&a.d(n),n&&C(e)}}}function $u(i){const e={name:`${i.length} strokes:`,columns:["Valence","Intensity","Color","Size"],rows:[]};return i.forEach(t=>{e.rows.push({cells:[{value:t.valence},{value:t.intensity},{value:t.brushColor,formatter:a=>`<span class="block w-full h-3" style="background-color: ${a};"></span>`},{value:t.area}]})}),e}function Za(i,e){const t={};let a=0;e.forEach(c=>{var f;t[f=c[i]]||(t[f]=0),t[c[i]]+=c.area??0,a+=c.area??0});let n=0;for(let c in t){const f=parseInt(c);n+=f*t[c]}const s=n/a;return Math.round(s*100)/100}function Ka(i,e){const t=i.drawing[e];if(t===void 0)throw`Could not get ${e} drawing of participant ${i.id}.`;return t.strokes}const el=(i,e)=>`Participant #${e+1}`;function yu(i,e,t){let{survey:a}=e,n,s,o,c,f,g={name:"Strokes",columns:[],rows:[]},d,p;function w(){const T=`Participant${n.id+1}-${n.persona}`;return[{name:`LookingGlass-${T}Front.png`,dataUrl:d.getImage()},{name:`LookingGlass-${T}Back.png`,dataUrl:p.getImage()}]}function P(T){const{personaSide:W}=T.detail,A=Ka(n,W);let x;W.includes("Front")?x=d:x=p,x.drawStrokes(A)}function Q({detail:T}){const W=Object.keys(n.drawing),A=n.drawing[W[0]],x=o[T];let v;A&&T<A.strokes.length?W[0].includes("Front")?v=d:v=p:W[1].includes("Front")?v=d:v=p,d.clear(),p.clear(),v.drawStrokes([x])}function M(){var x,v,_,F;const T=Object.keys(n.drawing);let W,A;T[0].includes("Front")?(W=((x=n.drawing[T[0]])==null?void 0:x.strokes)??[],A=((v=n.drawing[T[1]])==null?void 0:v.strokes)??[]):(W=((_=n.drawing[T[1]])==null?void 0:_.strokes)??[],A=((F=n.drawing[T[0]])==null?void 0:F.strokes)??[]),d.clear(),p.clear(),d.drawStrokes(W),p.drawStrokes(A)}function ae(T){const W=a.participants[T],A=Object.keys(W.drawing);let x=[];A.forEach(F=>{x=x.concat(Ka(W,F))});const v=Za("valence",x),_=Za("intensity",x);t(1,n=W),t(2,s=A),o=x,t(3,c=v),t(4,f=_),t(5,g=$u(x))}function le({detail:T}){const W=parseInt(T);ae(W)}Sr(()=>{ae(0)});function se(T){st[T?"unshift":"push"](()=>{d=T,t(6,d)})}function z(T){st[T?"unshift":"push"](()=>{p=T,t(7,p)})}return i.$$set=T=>{"survey"in T&&t(0,a=T.survey)},[a,n,s,c,f,g,d,p,P,Q,M,le,w,se,z]}class Cu extends rt{constructor(e){super(),nt(this,e,yu,wu,Ge,{survey:0,getImages:12})}get survey(){return this.$$.ctx[0]}set survey(e){this.$$set({survey:e}),hl()}get getImages(){return this.$$.ctx[12]}}var _l={exports:{}};/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */(function(i,e){(function(t,a){i.exports=a()})(gl,function(){for(var t=function(r,l,u){return l===void 0&&(l=0),u===void 0&&(u=1),r<l?l:r>u?u:r},a=t,n=function(r){r._clipped=!1,r._unclipped=r.slice(0);for(var l=0;l<=3;l++)l<3?((r[l]<0||r[l]>255)&&(r._clipped=!0),r[l]=a(r[l],0,255)):l===3&&(r[l]=a(r[l],0,1));return r},s={},o=0,c=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];o<c.length;o+=1){var f=c[o];s["[object "+f+"]"]=f.toLowerCase()}var g=function(r){return s[Object.prototype.toString.call(r)]||"object"},d=g,p=function(r,l){return l===void 0&&(l=null),r.length>=3?Array.prototype.slice.call(r):d(r[0])=="object"&&l?l.split("").filter(function(u){return r[0][u]!==void 0}).map(function(u){return r[0][u]}):r[0]},w=g,P=function(r){if(r.length<2)return null;var l=r.length-1;return w(r[l])=="string"?r[l].toLowerCase():null},Q=Math.PI,M={clip_rgb:n,limit:t,type:g,unpack:p,last:P,PI:Q,TWOPI:Q*2,PITHIRD:Q/3,DEG2RAD:Q/180,RAD2DEG:180/Q},ae={format:{},autodetect:[]},le=M.last,se=M.clip_rgb,z=M.type,T=ae,W=function(){for(var l=[],u=arguments.length;u--;)l[u]=arguments[u];var h=this;if(z(l[0])==="object"&&l[0].constructor&&l[0].constructor===this.constructor)return l[0];var b=le(l),k=!1;if(!b){k=!0,T.sorted||(T.autodetect=T.autodetect.sort(function(L,q){return q.p-L.p}),T.sorted=!0);for(var m=0,$=T.autodetect;m<$.length;m+=1){var y=$[m];if(b=y.test.apply(y,l),b)break}}if(T.format[b]){var S=T.format[b].apply(null,k?l:l.slice(0,-1));h._rgb=se(S)}else throw new Error("unknown format: "+l);h._rgb.length===3&&h._rgb.push(1)};W.prototype.toString=function(){return z(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var A=W,x=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];return new(Function.prototype.bind.apply(x.Color,[null].concat(r)))};x.Color=A,x.version="2.4.2";var v=x,_=M.unpack,F=Math.max,D=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];var u=_(r,"rgb"),h=u[0],b=u[1],k=u[2];h=h/255,b=b/255,k=k/255;var m=1-F(h,F(b,k)),$=m<1?1/(1-m):0,y=(1-h-m)*$,S=(1-b-m)*$,L=(1-k-m)*$;return[y,S,L,m]},H=D,ee=M.unpack,ie=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];r=ee(r,"cmyk");var u=r[0],h=r[1],b=r[2],k=r[3],m=r.length>4?r[4]:1;return k===1?[0,0,0,m]:[u>=1?0:255*(1-u)*(1-k),h>=1?0:255*(1-h)*(1-k),b>=1?0:255*(1-b)*(1-k),m]},Te=ie,Le=v,X=A,Re=ae,te=M.unpack,at=M.type,Ve=H;X.prototype.cmyk=function(){return Ve(this._rgb)},Le.cmyk=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];return new(Function.prototype.bind.apply(X,[null].concat(r,["cmyk"])))},Re.format.cmyk=Te,Re.autodetect.push({p:2,test:function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];if(r=te(r,"cmyk"),at(r)==="array"&&r.length===4)return"cmyk"}});var I=M.unpack,J=M.last,ve=function(r){return Math.round(r*100)/100},oe=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];var u=I(r,"hsla"),h=J(r)||"lsa";return u[0]=ve(u[0]||0),u[1]=ve(u[1]*100)+"%",u[2]=ve(u[2]*100)+"%",h==="hsla"||u.length>3&&u[3]<1?(u[3]=u.length>3?u[3]:1,h="hsla"):u.length=3,h+"("+u.join(",")+")"},ye=oe,We=M.unpack,De=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];r=We(r,"rgba");var u=r[0],h=r[1],b=r[2];u/=255,h/=255,b/=255;var k=Math.min(u,h,b),m=Math.max(u,h,b),$=(m+k)/2,y,S;return m===k?(y=0,S=Number.NaN):y=$<.5?(m-k)/(m+k):(m-k)/(2-m-k),u==m?S=(h-b)/(m-k):h==m?S=2+(b-u)/(m-k):b==m&&(S=4+(u-h)/(m-k)),S*=60,S<0&&(S+=360),r.length>3&&r[3]!==void 0?[S,y,$,r[3]]:[S,y,$]},re=De,Ce=M.unpack,ze=M.last,je=ye,Ae=re,Ye=Math.round,He=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];var u=Ce(r,"rgba"),h=ze(r)||"rgb";return h.substr(0,3)=="hsl"?je(Ae(u),h):(u[0]=Ye(u[0]),u[1]=Ye(u[1]),u[2]=Ye(u[2]),(h==="rgba"||u.length>3&&u[3]<1)&&(u[3]=u.length>3?u[3]:1,h="rgba"),h+"("+u.slice(0,h==="rgb"?3:4).join(",")+")")},Oe=He,pt=M.unpack,lt=Math.round,bt=function(){for(var r,l=[],u=arguments.length;u--;)l[u]=arguments[u];l=pt(l,"hsl");var h=l[0],b=l[1],k=l[2],m,$,y;if(b===0)m=$=y=k*255;else{var S=[0,0,0],L=[0,0,0],q=k<.5?k*(1+b):k+b-k*b,R=2*k-q,j=h/360;S[0]=j+1/3,S[1]=j,S[2]=j-1/3;for(var V=0;V<3;V++)S[V]<0&&(S[V]+=1),S[V]>1&&(S[V]-=1),6*S[V]<1?L[V]=R+(q-R)*6*S[V]:2*S[V]<1?L[V]=q:3*S[V]<2?L[V]=R+(q-R)*(2/3-S[V])*6:L[V]=R;r=[lt(L[0]*255),lt(L[1]*255),lt(L[2]*255)],m=r[0],$=r[1],y=r[2]}return l.length>3?[m,$,y,l[3]]:[m,$,y,1]},_t=bt,it=_t,Pe=ae,qe=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,Ft=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,Me=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,At=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,kt=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,It=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,yt=Math.round,Ct=function(r){r=r.toLowerCase().trim();var l;if(Pe.format.named)try{return Pe.format.named(r)}catch{}if(l=r.match(qe)){for(var u=l.slice(1,4),h=0;h<3;h++)u[h]=+u[h];return u[3]=1,u}if(l=r.match(Ft)){for(var b=l.slice(1,5),k=0;k<4;k++)b[k]=+b[k];return b}if(l=r.match(Me)){for(var m=l.slice(1,4),$=0;$<3;$++)m[$]=yt(m[$]*2.55);return m[3]=1,m}if(l=r.match(At)){for(var y=l.slice(1,5),S=0;S<3;S++)y[S]=yt(y[S]*2.55);return y[3]=+y[3],y}if(l=r.match(kt)){var L=l.slice(1,4);L[1]*=.01,L[2]*=.01;var q=it(L);return q[3]=1,q}if(l=r.match(It)){var R=l.slice(1,4);R[1]*=.01,R[2]*=.01;var j=it(R);return j[3]=+l[4],j}};Ct.test=function(r){return qe.test(r)||Ft.test(r)||Me.test(r)||At.test(r)||kt.test(r)||It.test(r)};var Lt=Ct,gt=v,xt=A,ot=ae,vr=M.type,ur=Oe,fn=Lt;xt.prototype.css=function(r){return ur(this._rgb,r)},gt.css=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];return new(Function.prototype.bind.apply(xt,[null].concat(r,["css"])))},ot.format.css=fn,ot.autodetect.push({p:5,test:function(r){for(var l=[],u=arguments.length-1;u-- >0;)l[u]=arguments[u+1];if(!l.length&&vr(r)==="string"&&fn.test(r))return"css"}});var un=A,kl=v,wl=ae,$l=M.unpack;wl.format.gl=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];var u=$l(r,"rgba");return u[0]*=255,u[1]*=255,u[2]*=255,u},kl.gl=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];return new(Function.prototype.bind.apply(un,[null].concat(r,["gl"])))},un.prototype.gl=function(){var r=this._rgb;return[r[0]/255,r[1]/255,r[2]/255,r[3]]};var yl=M.unpack,Cl=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];var u=yl(r,"rgb"),h=u[0],b=u[1],k=u[2],m=Math.min(h,b,k),$=Math.max(h,b,k),y=$-m,S=y*100/255,L=m/(255-y)*100,q;return y===0?q=Number.NaN:(h===$&&(q=(b-k)/y),b===$&&(q=2+(k-h)/y),k===$&&(q=4+(h-b)/y),q*=60,q<0&&(q+=360)),[q,S,L]},El=Cl,Ml=M.unpack,Sl=Math.floor,Fl=function(){for(var r,l,u,h,b,k,m=[],$=arguments.length;$--;)m[$]=arguments[$];m=Ml(m,"hcg");var y=m[0],S=m[1],L=m[2],q,R,j;L=L*255;var V=S*255;if(S===0)q=R=j=L;else{y===360&&(y=0),y>360&&(y-=360),y<0&&(y+=360),y/=60;var fe=Sl(y),me=y-fe,we=L*(1-S),Ee=we+V*(1-me),et=we+V*me,Je=we+V;switch(fe){case 0:r=[Je,et,we],q=r[0],R=r[1],j=r[2];break;case 1:l=[Ee,Je,we],q=l[0],R=l[1],j=l[2];break;case 2:u=[we,Je,et],q=u[0],R=u[1],j=u[2];break;case 3:h=[we,Ee,Je],q=h[0],R=h[1],j=h[2];break;case 4:b=[et,we,Je],q=b[0],R=b[1],j=b[2];break;case 5:k=[Je,we,Ee],q=k[0],R=k[1],j=k[2];break}}return[q,R,j,m.length>3?m[3]:1]},Il=Fl,Ll=M.unpack,Al=M.type,Tl=v,cn=A,hn=ae,Rl=El;cn.prototype.hcg=function(){return Rl(this._rgb)},Tl.hcg=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];return new(Function.prototype.bind.apply(cn,[null].concat(r,["hcg"])))},hn.format.hcg=Il,hn.autodetect.push({p:1,test:function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];if(r=Ll(r,"hcg"),Al(r)==="array"&&r.length===3)return"hcg"}});var Dl=M.unpack,Ol=M.last,pr=Math.round,Pl=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];var u=Dl(r,"rgba"),h=u[0],b=u[1],k=u[2],m=u[3],$=Ol(r)||"auto";m===void 0&&(m=1),$==="auto"&&($=m<1?"rgba":"rgb"),h=pr(h),b=pr(b),k=pr(k);var y=h<<16|b<<8|k,S="000000"+y.toString(16);S=S.substr(S.length-6);var L="0"+pr(m*255).toString(16);switch(L=L.substr(L.length-2),$.toLowerCase()){case"rgba":return"#"+S+L;case"argb":return"#"+L+S;default:return"#"+S}},gn=Pl,Nl=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,zl=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Bl=function(r){if(r.match(Nl)){(r.length===4||r.length===7)&&(r=r.substr(1)),r.length===3&&(r=r.split(""),r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]);var l=parseInt(r,16),u=l>>16,h=l>>8&255,b=l&255;return[u,h,b,1]}if(r.match(zl)){(r.length===5||r.length===9)&&(r=r.substr(1)),r.length===4&&(r=r.split(""),r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]+r[3]+r[3]);var k=parseInt(r,16),m=k>>24&255,$=k>>16&255,y=k>>8&255,S=Math.round((k&255)/255*100)/100;return[m,$,y,S]}throw new Error("unknown hex color: "+r)},dn=Bl,xl=v,vn=A,Ul=M.type,pn=ae,Wl=gn;vn.prototype.hex=function(r){return Wl(this._rgb,r)},xl.hex=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];return new(Function.prototype.bind.apply(vn,[null].concat(r,["hex"])))},pn.format.hex=dn,pn.autodetect.push({p:4,test:function(r){for(var l=[],u=arguments.length-1;u-- >0;)l[u]=arguments[u+1];if(!l.length&&Ul(r)==="string"&&[3,4,5,6,7,8,9].indexOf(r.length)>=0)return"hex"}});var Hl=M.unpack,mn=M.TWOPI,ql=Math.min,Gl=Math.sqrt,Vl=Math.acos,jl=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];var u=Hl(r,"rgb"),h=u[0],b=u[1],k=u[2];h/=255,b/=255,k/=255;var m,$=ql(h,b,k),y=(h+b+k)/3,S=y>0?1-$/y:0;return S===0?m=NaN:(m=(h-b+(h-k))/2,m/=Gl((h-b)*(h-b)+(h-k)*(b-k)),m=Vl(m),k>b&&(m=mn-m),m/=mn),[m*360,S,y]},Yl=jl,Ql=M.unpack,Fr=M.limit,Vt=M.TWOPI,Ir=M.PITHIRD,jt=Math.cos,Xl=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];r=Ql(r,"hsi");var u=r[0],h=r[1],b=r[2],k,m,$;return isNaN(u)&&(u=0),isNaN(h)&&(h=0),u>360&&(u-=360),u<0&&(u+=360),u/=360,u<1/3?($=(1-h)/3,k=(1+h*jt(Vt*u)/jt(Ir-Vt*u))/3,m=1-($+k)):u<2/3?(u-=1/3,k=(1-h)/3,m=(1+h*jt(Vt*u)/jt(Ir-Vt*u))/3,$=1-(k+m)):(u-=2/3,m=(1-h)/3,$=(1+h*jt(Vt*u)/jt(Ir-Vt*u))/3,k=1-(m+$)),k=Fr(b*k*3),m=Fr(b*m*3),$=Fr(b*$*3),[k*255,m*255,$*255,r.length>3?r[3]:1]},Jl=Xl,Zl=M.unpack,Kl=M.type,es=v,bn=A,_n=ae,ts=Yl;bn.prototype.hsi=function(){return ts(this._rgb)},es.hsi=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];return new(Function.prototype.bind.apply(bn,[null].concat(r,["hsi"])))},_n.format.hsi=Jl,_n.autodetect.push({p:2,test:function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];if(r=Zl(r,"hsi"),Kl(r)==="array"&&r.length===3)return"hsi"}});var rs=M.unpack,ns=M.type,as=v,kn=A,wn=ae,ls=re;kn.prototype.hsl=function(){return ls(this._rgb)},as.hsl=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];return new(Function.prototype.bind.apply(kn,[null].concat(r,["hsl"])))},wn.format.hsl=_t,wn.autodetect.push({p:2,test:function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];if(r=rs(r,"hsl"),ns(r)==="array"&&r.length===3)return"hsl"}});var ss=M.unpack,is=Math.min,os=Math.max,fs=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];r=ss(r,"rgb");var u=r[0],h=r[1],b=r[2],k=is(u,h,b),m=os(u,h,b),$=m-k,y,S,L;return L=m/255,m===0?(y=Number.NaN,S=0):(S=$/m,u===m&&(y=(h-b)/$),h===m&&(y=2+(b-u)/$),b===m&&(y=4+(u-h)/$),y*=60,y<0&&(y+=360)),[y,S,L]},us=fs,cs=M.unpack,hs=Math.floor,gs=function(){for(var r,l,u,h,b,k,m=[],$=arguments.length;$--;)m[$]=arguments[$];m=cs(m,"hsv");var y=m[0],S=m[1],L=m[2],q,R,j;if(L*=255,S===0)q=R=j=L;else{y===360&&(y=0),y>360&&(y-=360),y<0&&(y+=360),y/=60;var V=hs(y),fe=y-V,me=L*(1-S),we=L*(1-S*fe),Ee=L*(1-S*(1-fe));switch(V){case 0:r=[L,Ee,me],q=r[0],R=r[1],j=r[2];break;case 1:l=[we,L,me],q=l[0],R=l[1],j=l[2];break;case 2:u=[me,L,Ee],q=u[0],R=u[1],j=u[2];break;case 3:h=[me,we,L],q=h[0],R=h[1],j=h[2];break;case 4:b=[Ee,me,L],q=b[0],R=b[1],j=b[2];break;case 5:k=[L,me,we],q=k[0],R=k[1],j=k[2];break}}return[q,R,j,m.length>3?m[3]:1]},ds=gs,vs=M.unpack,ps=M.type,ms=v,$n=A,yn=ae,bs=us;$n.prototype.hsv=function(){return bs(this._rgb)},ms.hsv=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];return new(Function.prototype.bind.apply($n,[null].concat(r,["hsv"])))},yn.format.hsv=ds,yn.autodetect.push({p:2,test:function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];if(r=vs(r,"hsv"),ps(r)==="array"&&r.length===3)return"hsv"}});var mr={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},Yt=mr,_s=M.unpack,Cn=Math.pow,ks=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];var u=_s(r,"rgb"),h=u[0],b=u[1],k=u[2],m=ws(h,b,k),$=m[0],y=m[1],S=m[2],L=116*y-16;return[L<0?0:L,500*($-y),200*(y-S)]},Lr=function(r){return(r/=255)<=.04045?r/12.92:Cn((r+.055)/1.055,2.4)},Ar=function(r){return r>Yt.t3?Cn(r,1/3):r/Yt.t2+Yt.t0},ws=function(r,l,u){r=Lr(r),l=Lr(l),u=Lr(u);var h=Ar((.4124564*r+.3575761*l+.1804375*u)/Yt.Xn),b=Ar((.2126729*r+.7151522*l+.072175*u)/Yt.Yn),k=Ar((.0193339*r+.119192*l+.9503041*u)/Yt.Zn);return[h,b,k]},En=ks,Qt=mr,$s=M.unpack,ys=Math.pow,Cs=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];r=$s(r,"lab");var u=r[0],h=r[1],b=r[2],k,m,$,y,S,L;return m=(u+16)/116,k=isNaN(h)?m:m+h/500,$=isNaN(b)?m:m-b/200,m=Qt.Yn*Rr(m),k=Qt.Xn*Rr(k),$=Qt.Zn*Rr($),y=Tr(3.2404542*k-1.5371385*m-.4985314*$),S=Tr(-.969266*k+1.8760108*m+.041556*$),L=Tr(.0556434*k-.2040259*m+1.0572252*$),[y,S,L,r.length>3?r[3]:1]},Tr=function(r){return 255*(r<=.00304?12.92*r:1.055*ys(r,1/2.4)-.055)},Rr=function(r){return r>Qt.t1?r*r*r:Qt.t2*(r-Qt.t0)},Mn=Cs,Es=M.unpack,Ms=M.type,Ss=v,Sn=A,Fn=ae,Fs=En;Sn.prototype.lab=function(){return Fs(this._rgb)},Ss.lab=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];return new(Function.prototype.bind.apply(Sn,[null].concat(r,["lab"])))},Fn.format.lab=Mn,Fn.autodetect.push({p:2,test:function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];if(r=Es(r,"lab"),Ms(r)==="array"&&r.length===3)return"lab"}});var Is=M.unpack,Ls=M.RAD2DEG,As=Math.sqrt,Ts=Math.atan2,Rs=Math.round,Ds=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];var u=Is(r,"lab"),h=u[0],b=u[1],k=u[2],m=As(b*b+k*k),$=(Ts(k,b)*Ls+360)%360;return Rs(m*1e4)===0&&($=Number.NaN),[h,m,$]},In=Ds,Os=M.unpack,Ps=En,Ns=In,zs=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];var u=Os(r,"rgb"),h=u[0],b=u[1],k=u[2],m=Ps(h,b,k),$=m[0],y=m[1],S=m[2];return Ns($,y,S)},Bs=zs,xs=M.unpack,Us=M.DEG2RAD,Ws=Math.sin,Hs=Math.cos,qs=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];var u=xs(r,"lch"),h=u[0],b=u[1],k=u[2];return isNaN(k)&&(k=0),k=k*Us,[h,Hs(k)*b,Ws(k)*b]},Ln=qs,Gs=M.unpack,Vs=Ln,js=Mn,Ys=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];r=Gs(r,"lch");var u=r[0],h=r[1],b=r[2],k=Vs(u,h,b),m=k[0],$=k[1],y=k[2],S=js(m,$,y),L=S[0],q=S[1],R=S[2];return[L,q,R,r.length>3?r[3]:1]},An=Ys,Qs=M.unpack,Xs=An,Js=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];var u=Qs(r,"hcl").reverse();return Xs.apply(void 0,u)},Zs=Js,Ks=M.unpack,ei=M.type,Tn=v,br=A,Dr=ae,Rn=Bs;br.prototype.lch=function(){return Rn(this._rgb)},br.prototype.hcl=function(){return Rn(this._rgb).reverse()},Tn.lch=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];return new(Function.prototype.bind.apply(br,[null].concat(r,["lch"])))},Tn.hcl=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];return new(Function.prototype.bind.apply(br,[null].concat(r,["hcl"])))},Dr.format.lch=An,Dr.format.hcl=Zs,["lch","hcl"].forEach(function(r){return Dr.autodetect.push({p:2,test:function(){for(var l=[],u=arguments.length;u--;)l[u]=arguments[u];if(l=Ks(l,r),ei(l)==="array"&&l.length===3)return r}})});var ti={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Dn=ti,ri=A,On=ae,ni=M.type,cr=Dn,ai=dn,li=gn;ri.prototype.name=function(){for(var r=li(this._rgb,"rgb"),l=0,u=Object.keys(cr);l<u.length;l+=1){var h=u[l];if(cr[h]===r)return h.toLowerCase()}return r},On.format.named=function(r){if(r=r.toLowerCase(),cr[r])return ai(cr[r]);throw new Error("unknown color name: "+r)},On.autodetect.push({p:5,test:function(r){for(var l=[],u=arguments.length-1;u-- >0;)l[u]=arguments[u+1];if(!l.length&&ni(r)==="string"&&cr[r.toLowerCase()])return"named"}});var si=M.unpack,ii=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];var u=si(r,"rgb"),h=u[0],b=u[1],k=u[2];return(h<<16)+(b<<8)+k},oi=ii,fi=M.type,ui=function(r){if(fi(r)=="number"&&r>=0&&r<=16777215){var l=r>>16,u=r>>8&255,h=r&255;return[l,u,h,1]}throw new Error("unknown num color: "+r)},ci=ui,hi=v,Pn=A,Nn=ae,gi=M.type,di=oi;Pn.prototype.num=function(){return di(this._rgb)},hi.num=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];return new(Function.prototype.bind.apply(Pn,[null].concat(r,["num"])))},Nn.format.num=ci,Nn.autodetect.push({p:5,test:function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];if(r.length===1&&gi(r[0])==="number"&&r[0]>=0&&r[0]<=16777215)return"num"}});var vi=v,Or=A,zn=ae,Bn=M.unpack,xn=M.type,Un=Math.round;Or.prototype.rgb=function(r){return r===void 0&&(r=!0),r===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Un)},Or.prototype.rgba=function(r){return r===void 0&&(r=!0),this._rgb.slice(0,4).map(function(l,u){return u<3?r===!1?l:Un(l):l})},vi.rgb=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];return new(Function.prototype.bind.apply(Or,[null].concat(r,["rgb"])))},zn.format.rgb=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];var u=Bn(r,"rgba");return u[3]===void 0&&(u[3]=1),u},zn.autodetect.push({p:3,test:function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];if(r=Bn(r,"rgba"),xn(r)==="array"&&(r.length===3||r.length===4&&xn(r[3])=="number"&&r[3]>=0&&r[3]<=1))return"rgb"}});var _r=Math.log,pi=function(r){var l=r/100,u,h,b;return l<66?(u=255,h=l<6?0:-155.25485562709179-.44596950469579133*(h=l-2)+104.49216199393888*_r(h),b=l<20?0:-254.76935184120902+.8274096064007395*(b=l-10)+115.67994401066147*_r(b)):(u=351.97690566805693+.114206453784165*(u=l-55)-40.25366309332127*_r(u),h=325.4494125711974+.07943456536662342*(h=l-50)-28.0852963507957*_r(h),b=255),[u,h,b,1]},Wn=pi,mi=Wn,bi=M.unpack,_i=Math.round,ki=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];for(var u=bi(r,"rgb"),h=u[0],b=u[2],k=1e3,m=4e4,$=.4,y;m-k>$;){y=(m+k)*.5;var S=mi(y);S[2]/S[0]>=b/h?m=y:k=y}return _i(y)},wi=ki,Pr=v,kr=A,Nr=ae,$i=wi;kr.prototype.temp=kr.prototype.kelvin=kr.prototype.temperature=function(){return $i(this._rgb)},Pr.temp=Pr.kelvin=Pr.temperature=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];return new(Function.prototype.bind.apply(kr,[null].concat(r,["temp"])))},Nr.format.temp=Nr.format.kelvin=Nr.format.temperature=Wn;var yi=M.unpack,zr=Math.cbrt,Ci=Math.pow,Ei=Math.sign,Mi=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];var u=yi(r,"rgb"),h=u[0],b=u[1],k=u[2],m=[Br(h/255),Br(b/255),Br(k/255)],$=m[0],y=m[1],S=m[2],L=zr(.4122214708*$+.5363325363*y+.0514459929*S),q=zr(.2119034982*$+.6806995451*y+.1073969566*S),R=zr(.0883024619*$+.2817188376*y+.6299787005*S);return[.2104542553*L+.793617785*q-.0040720468*R,1.9779984951*L-2.428592205*q+.4505937099*R,.0259040371*L+.7827717662*q-.808675766*R]},Hn=Mi;function Br(r){var l=Math.abs(r);return l<.04045?r/12.92:(Ei(r)||1)*Ci((l+.055)/1.055,2.4)}var Si=M.unpack,wr=Math.pow,Fi=Math.sign,Ii=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];r=Si(r,"lab");var u=r[0],h=r[1],b=r[2],k=wr(u+.3963377774*h+.2158037573*b,3),m=wr(u-.1055613458*h-.0638541728*b,3),$=wr(u-.0894841775*h-1.291485548*b,3);return[255*xr(4.0767416621*k-3.3077115913*m+.2309699292*$),255*xr(-1.2684380046*k+2.6097574011*m-.3413193965*$),255*xr(-.0041960863*k-.7034186147*m+1.707614701*$),r.length>3?r[3]:1]},qn=Ii;function xr(r){var l=Math.abs(r);return l>.0031308?(Fi(r)||1)*(1.055*wr(l,1/2.4)-.055):r*12.92}var Li=M.unpack,Ai=M.type,Ti=v,Gn=A,Vn=ae,Ri=Hn;Gn.prototype.oklab=function(){return Ri(this._rgb)},Ti.oklab=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];return new(Function.prototype.bind.apply(Gn,[null].concat(r,["oklab"])))},Vn.format.oklab=qn,Vn.autodetect.push({p:3,test:function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];if(r=Li(r,"oklab"),Ai(r)==="array"&&r.length===3)return"oklab"}});var Di=M.unpack,Oi=Hn,Pi=In,Ni=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];var u=Di(r,"rgb"),h=u[0],b=u[1],k=u[2],m=Oi(h,b,k),$=m[0],y=m[1],S=m[2];return Pi($,y,S)},zi=Ni,Bi=M.unpack,xi=Ln,Ui=qn,Wi=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];r=Bi(r,"lch");var u=r[0],h=r[1],b=r[2],k=xi(u,h,b),m=k[0],$=k[1],y=k[2],S=Ui(m,$,y),L=S[0],q=S[1],R=S[2];return[L,q,R,r.length>3?r[3]:1]},Hi=Wi,qi=M.unpack,Gi=M.type,Vi=v,jn=A,Yn=ae,ji=zi;jn.prototype.oklch=function(){return ji(this._rgb)},Vi.oklch=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];return new(Function.prototype.bind.apply(jn,[null].concat(r,["oklch"])))},Yn.format.oklch=Hi,Yn.autodetect.push({p:3,test:function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];if(r=qi(r,"oklch"),Gi(r)==="array"&&r.length===3)return"oklch"}});var Qn=A,Yi=M.type;Qn.prototype.alpha=function(r,l){return l===void 0&&(l=!1),r!==void 0&&Yi(r)==="number"?l?(this._rgb[3]=r,this):new Qn([this._rgb[0],this._rgb[1],this._rgb[2],r],"rgb"):this._rgb[3]};var Qi=A;Qi.prototype.clipped=function(){return this._rgb._clipped||!1};var Ut=A,Xi=mr;Ut.prototype.darken=function(r){r===void 0&&(r=1);var l=this,u=l.lab();return u[0]-=Xi.Kn*r,new Ut(u,"lab").alpha(l.alpha(),!0)},Ut.prototype.brighten=function(r){return r===void 0&&(r=1),this.darken(-r)},Ut.prototype.darker=Ut.prototype.darken,Ut.prototype.brighter=Ut.prototype.brighten;var Ji=A;Ji.prototype.get=function(r){var l=r.split("."),u=l[0],h=l[1],b=this[u]();if(h){var k=u.indexOf(h)-(u.substr(0,2)==="ok"?2:0);if(k>-1)return b[k];throw new Error("unknown channel "+h+" in mode "+u)}else return b};var Xt=A,Zi=M.type,Ki=Math.pow,eo=1e-7,to=20;Xt.prototype.luminance=function(r){if(r!==void 0&&Zi(r)==="number"){if(r===0)return new Xt([0,0,0,this._rgb[3]],"rgb");if(r===1)return new Xt([255,255,255,this._rgb[3]],"rgb");var l=this.luminance(),u="rgb",h=to,b=function(m,$){var y=m.interpolate($,.5,u),S=y.luminance();return Math.abs(r-S)<eo||!h--?y:S>r?b(m,y):b(y,$)},k=(l>r?b(new Xt([0,0,0]),this):b(this,new Xt([255,255,255]))).rgb();return new Xt(k.concat([this._rgb[3]]))}return ro.apply(void 0,this._rgb.slice(0,3))};var ro=function(r,l,u){return r=Ur(r),l=Ur(l),u=Ur(u),.2126*r+.7152*l+.0722*u},Ur=function(r){return r/=255,r<=.03928?r/12.92:Ki((r+.055)/1.055,2.4)},mt={},Xn=A,Jn=M.type,$r=mt,Zn=function(r,l,u){u===void 0&&(u=.5);for(var h=[],b=arguments.length-3;b-- >0;)h[b]=arguments[b+3];var k=h[0]||"lrgb";if(!$r[k]&&!h.length&&(k=Object.keys($r)[0]),!$r[k])throw new Error("interpolation mode "+k+" is not defined");return Jn(r)!=="object"&&(r=new Xn(r)),Jn(l)!=="object"&&(l=new Xn(l)),$r[k](r,l,u).alpha(r.alpha()+u*(l.alpha()-r.alpha()))},Kn=A,no=Zn;Kn.prototype.mix=Kn.prototype.interpolate=function(r,l){l===void 0&&(l=.5);for(var u=[],h=arguments.length-2;h-- >0;)u[h]=arguments[h+2];return no.apply(void 0,[this,r,l].concat(u))};var ea=A;ea.prototype.premultiply=function(r){r===void 0&&(r=!1);var l=this._rgb,u=l[3];return r?(this._rgb=[l[0]*u,l[1]*u,l[2]*u,u],this):new ea([l[0]*u,l[1]*u,l[2]*u,u],"rgb")};var Wr=A,ao=mr;Wr.prototype.saturate=function(r){r===void 0&&(r=1);var l=this,u=l.lch();return u[1]+=ao.Kn*r,u[1]<0&&(u[1]=0),new Wr(u,"lch").alpha(l.alpha(),!0)},Wr.prototype.desaturate=function(r){return r===void 0&&(r=1),this.saturate(-r)};var ta=A,ra=M.type;ta.prototype.set=function(r,l,u){u===void 0&&(u=!1);var h=r.split("."),b=h[0],k=h[1],m=this[b]();if(k){var $=b.indexOf(k)-(b.substr(0,2)==="ok"?2:0);if($>-1){if(ra(l)=="string")switch(l.charAt(0)){case"+":m[$]+=+l;break;case"-":m[$]+=+l;break;case"*":m[$]*=+l.substr(1);break;case"/":m[$]/=+l.substr(1);break;default:m[$]=+l}else if(ra(l)==="number")m[$]=l;else throw new Error("unsupported value for Color.set");var y=new ta(m,b);return u?(this._rgb=y._rgb,this):y}throw new Error("unknown channel "+k+" in mode "+b)}else return m};var lo=A,so=function(r,l,u){var h=r._rgb,b=l._rgb;return new lo(h[0]+u*(b[0]-h[0]),h[1]+u*(b[1]-h[1]),h[2]+u*(b[2]-h[2]),"rgb")};mt.rgb=so;var io=A,Hr=Math.sqrt,Jt=Math.pow,oo=function(r,l,u){var h=r._rgb,b=h[0],k=h[1],m=h[2],$=l._rgb,y=$[0],S=$[1],L=$[2];return new io(Hr(Jt(b,2)*(1-u)+Jt(y,2)*u),Hr(Jt(k,2)*(1-u)+Jt(S,2)*u),Hr(Jt(m,2)*(1-u)+Jt(L,2)*u),"rgb")};mt.lrgb=oo;var fo=A,uo=function(r,l,u){var h=r.lab(),b=l.lab();return new fo(h[0]+u*(b[0]-h[0]),h[1]+u*(b[1]-h[1]),h[2]+u*(b[2]-h[2]),"lab")};mt.lab=uo;var na=A,Zt=function(r,l,u,h){var b,k,m,$;h==="hsl"?(m=r.hsl(),$=l.hsl()):h==="hsv"?(m=r.hsv(),$=l.hsv()):h==="hcg"?(m=r.hcg(),$=l.hcg()):h==="hsi"?(m=r.hsi(),$=l.hsi()):h==="lch"||h==="hcl"?(h="hcl",m=r.hcl(),$=l.hcl()):h==="oklch"&&(m=r.oklch().reverse(),$=l.oklch().reverse());var y,S,L,q,R,j;(h.substr(0,1)==="h"||h==="oklch")&&(b=m,y=b[0],L=b[1],R=b[2],k=$,S=k[0],q=k[1],j=k[2]);var V,fe,me,we;return!isNaN(y)&&!isNaN(S)?(S>y&&S-y>180?we=S-(y+360):S<y&&y-S>180?we=S+360-y:we=S-y,fe=y+u*we):isNaN(y)?isNaN(S)?fe=Number.NaN:(fe=S,(R==1||R==0)&&h!="hsv"&&(V=q)):(fe=y,(j==1||j==0)&&h!="hsv"&&(V=L)),V===void 0&&(V=L+u*(q-L)),me=R+u*(j-R),h==="oklch"?new na([me,V,fe],h):new na([fe,V,me],h)},co=Zt,aa=function(r,l,u){return co(r,l,u,"lch")};mt.lch=aa,mt.hcl=aa;var ho=A,go=function(r,l,u){var h=r.num(),b=l.num();return new ho(h+u*(b-h),"num")};mt.num=go;var vo=Zt,po=function(r,l,u){return vo(r,l,u,"hcg")};mt.hcg=po;var mo=Zt,bo=function(r,l,u){return mo(r,l,u,"hsi")};mt.hsi=bo;var _o=Zt,ko=function(r,l,u){return _o(r,l,u,"hsl")};mt.hsl=ko;var wo=Zt,$o=function(r,l,u){return wo(r,l,u,"hsv")};mt.hsv=$o;var yo=A,Co=function(r,l,u){var h=r.oklab(),b=l.oklab();return new yo(h[0]+u*(b[0]-h[0]),h[1]+u*(b[1]-h[1]),h[2]+u*(b[2]-h[2]),"oklab")};mt.oklab=Co;var Eo=Zt,Mo=function(r,l,u){return Eo(r,l,u,"oklch")};mt.oklch=Mo;var qr=A,So=M.clip_rgb,Gr=Math.pow,Vr=Math.sqrt,jr=Math.PI,la=Math.cos,sa=Math.sin,Fo=Math.atan2,Io=function(r,l,u){l===void 0&&(l="lrgb"),u===void 0&&(u=null);var h=r.length;u||(u=Array.from(new Array(h)).map(function(){return 1}));var b=h/u.reduce(function(fe,me){return fe+me});if(u.forEach(function(fe,me){u[me]*=b}),r=r.map(function(fe){return new qr(fe)}),l==="lrgb")return Lo(r,u);for(var k=r.shift(),m=k.get(l),$=[],y=0,S=0,L=0;L<m.length;L++)if(m[L]=(m[L]||0)*u[0],$.push(isNaN(m[L])?0:u[0]),l.charAt(L)==="h"&&!isNaN(m[L])){var q=m[L]/180*jr;y+=la(q)*u[0],S+=sa(q)*u[0]}var R=k.alpha()*u[0];r.forEach(function(fe,me){var we=fe.get(l);R+=fe.alpha()*u[me+1];for(var Ee=0;Ee<m.length;Ee++)if(!isNaN(we[Ee]))if($[Ee]+=u[me+1],l.charAt(Ee)==="h"){var et=we[Ee]/180*jr;y+=la(et)*u[me+1],S+=sa(et)*u[me+1]}else m[Ee]+=we[Ee]*u[me+1]});for(var j=0;j<m.length;j++)if(l.charAt(j)==="h"){for(var V=Fo(S/$[j],y/$[j])/jr*180;V<0;)V+=360;for(;V>=360;)V-=360;m[j]=V}else m[j]=m[j]/$[j];return R/=h,new qr(m,l).alpha(R>.99999?1:R,!0)},Lo=function(r,l){for(var u=r.length,h=[0,0,0,0],b=0;b<r.length;b++){var k=r[b],m=l[b]/u,$=k._rgb;h[0]+=Gr($[0],2)*m,h[1]+=Gr($[1],2)*m,h[2]+=Gr($[2],2)*m,h[3]+=$[3]*m}return h[0]=Vr(h[0]),h[1]=Vr(h[1]),h[2]=Vr(h[2]),h[3]>.9999999&&(h[3]=1),new qr(So(h))},Et=v,Kt=M.type,Ao=Math.pow,Yr=function(r){var l="rgb",u=Et("#ccc"),h=0,b=[0,1],k=[],m=[0,0],$=!1,y=[],S=!1,L=0,q=1,R=!1,j={},V=!0,fe=1,me=function(O){if(O=O||["#fff","#000"],O&&Kt(O)==="string"&&Et.brewer&&Et.brewer[O.toLowerCase()]&&(O=Et.brewer[O.toLowerCase()]),Kt(O)==="array"){O.length===1&&(O=[O[0],O[0]]),O=O.slice(0);for(var ne=0;ne<O.length;ne++)O[ne]=Et(O[ne]);k.length=0;for(var pe=0;pe<O.length;pe++)k.push(pe/(O.length-1))}return dt(),y=O},we=function(O){if($!=null){for(var ne=$.length-1,pe=0;pe<ne&&O>=$[pe];)pe++;return pe-1}return 0},Ee=function(O){return O},et=function(O){return O},Je=function(O,ne){var pe,ue;if(ne==null&&(ne=!1),isNaN(O)||O===null)return u;if(ne)ue=O;else if($&&$.length>2){var tt=we(O);ue=tt/($.length-2)}else q!==L?ue=(O-L)/(q-L):ue=1;ue=et(ue),ne||(ue=Ee(ue)),fe!==1&&(ue=Ao(ue,fe)),ue=m[0]+ue*(1-m[0]-m[1]),ue=Math.min(1,Math.max(0,ue));var Ne=Math.floor(ue*1e4);if(V&&j[Ne])pe=j[Ne];else{if(Kt(y)==="array")for(var $e=0;$e<k.length;$e++){var Se=k[$e];if(ue<=Se){pe=y[$e];break}if(ue>=Se&&$e===k.length-1){pe=y[$e];break}if(ue>Se&&ue<k[$e+1]){ue=(ue-Se)/(k[$e+1]-Se),pe=Et.interpolate(y[$e],y[$e+1],ue,l);break}}else Kt(y)==="function"&&(pe=y(ue));V&&(j[Ne]=pe)}return pe},dt=function(){return j={}};me(r);var ke=function(O){var ne=Et(Je(O));return S&&ne[S]?ne[S]():ne};return ke.classes=function(O){if(O!=null){if(Kt(O)==="array")$=O,b=[O[0],O[O.length-1]];else{var ne=Et.analyze(b);O===0?$=[ne.min,ne.max]:$=Et.limits(ne,"e",O)}return ke}return $},ke.domain=function(O){if(!arguments.length)return b;L=O[0],q=O[O.length-1],k=[];var ne=y.length;if(O.length===ne&&L!==q)for(var pe=0,ue=Array.from(O);pe<ue.length;pe+=1){var tt=ue[pe];k.push((tt-L)/(q-L))}else{for(var Ne=0;Ne<ne;Ne++)k.push(Ne/(ne-1));if(O.length>2){var $e=O.map(function(Fe,Ie){return Ie/(O.length-1)}),Se=O.map(function(Fe){return(Fe-L)/(q-L)});Se.every(function(Fe,Ie){return $e[Ie]===Fe})||(et=function(Fe){if(Fe<=0||Fe>=1)return Fe;for(var Ie=0;Fe>=Se[Ie+1];)Ie++;var St=(Fe-Se[Ie])/(Se[Ie+1]-Se[Ie]),Pt=$e[Ie]+St*($e[Ie+1]-$e[Ie]);return Pt})}}return b=[L,q],ke},ke.mode=function(O){return arguments.length?(l=O,dt(),ke):l},ke.range=function(O,ne){return me(O),ke},ke.out=function(O){return S=O,ke},ke.spread=function(O){return arguments.length?(h=O,ke):h},ke.correctLightness=function(O){return O==null&&(O=!0),R=O,dt(),R?Ee=function(ne){for(var pe=Je(0,!0).lab()[0],ue=Je(1,!0).lab()[0],tt=pe>ue,Ne=Je(ne,!0).lab()[0],$e=pe+(ue-pe)*ne,Se=Ne-$e,Fe=0,Ie=1,St=20;Math.abs(Se)>.01&&St-- >0;)(function(){return tt&&(Se*=-1),Se<0?(Fe=ne,ne+=(Ie-ne)*.5):(Ie=ne,ne+=(Fe-ne)*.5),Ne=Je(ne,!0).lab()[0],Se=Ne-$e})();return ne}:Ee=function(ne){return ne},ke},ke.padding=function(O){return O!=null?(Kt(O)==="number"&&(O=[O,O]),m=O,ke):m},ke.colors=function(O,ne){arguments.length<2&&(ne="hex");var pe=[];if(arguments.length===0)pe=y.slice(0);else if(O===1)pe=[ke(.5)];else if(O>1){var ue=b[0],tt=b[1]-ue;pe=To(0,O,!1).map(function(Ie){return ke(ue+Ie/(O-1)*tt)})}else{r=[];var Ne=[];if($&&$.length>2)for(var $e=1,Se=$.length,Fe=1<=Se;Fe?$e<Se:$e>Se;Fe?$e++:$e--)Ne.push(($[$e-1]+$[$e])*.5);else Ne=b;pe=Ne.map(function(Ie){return ke(Ie)})}return Et[ne]&&(pe=pe.map(function(Ie){return Ie[ne]()})),pe},ke.cache=function(O){return O!=null?(V=O,ke):V},ke.gamma=function(O){return O!=null?(fe=O,ke):fe},ke.nodata=function(O){return O!=null?(u=Et(O),ke):u},ke};function To(r,l,u){for(var h=[],b=r<l,k=u?b?l+1:l-1:l,m=r;b?m<k:m>k;b?m++:m--)h.push(m);return h}var hr=A,Ro=Yr,Do=function(r){for(var l=[1,1],u=1;u<r;u++){for(var h=[1],b=1;b<=l.length;b++)h[b]=(l[b]||0)+l[b-1];l=h}return l},Oo=function(r){var l,u,h,b,k,m,$;if(r=r.map(function(R){return new hr(R)}),r.length===2)l=r.map(function(R){return R.lab()}),k=l[0],m=l[1],b=function(R){var j=[0,1,2].map(function(V){return k[V]+R*(m[V]-k[V])});return new hr(j,"lab")};else if(r.length===3)u=r.map(function(R){return R.lab()}),k=u[0],m=u[1],$=u[2],b=function(R){var j=[0,1,2].map(function(V){return(1-R)*(1-R)*k[V]+2*(1-R)*R*m[V]+R*R*$[V]});return new hr(j,"lab")};else if(r.length===4){var y;h=r.map(function(R){return R.lab()}),k=h[0],m=h[1],$=h[2],y=h[3],b=function(R){var j=[0,1,2].map(function(V){return(1-R)*(1-R)*(1-R)*k[V]+3*(1-R)*(1-R)*R*m[V]+3*(1-R)*R*R*$[V]+R*R*R*y[V]});return new hr(j,"lab")}}else if(r.length>=5){var S,L,q;S=r.map(function(R){return R.lab()}),q=r.length-1,L=Do(q),b=function(R){var j=1-R,V=[0,1,2].map(function(fe){return S.reduce(function(me,we,Ee){return me+L[Ee]*Math.pow(j,q-Ee)*Math.pow(R,Ee)*we[fe]},0)});return new hr(V,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return b},Po=function(r){var l=Oo(r);return l.scale=function(){return Ro(l)},l},Qr=v,Mt=function(r,l,u){if(!Mt[u])throw new Error("unknown blend mode "+u);return Mt[u](r,l)},Dt=function(r){return function(l,u){var h=Qr(u).rgb(),b=Qr(l).rgb();return Qr.rgb(r(h,b))}},Ot=function(r){return function(l,u){var h=[];return h[0]=r(l[0],u[0]),h[1]=r(l[1],u[1]),h[2]=r(l[2],u[2]),h}},No=function(r){return r},zo=function(r,l){return r*l/255},Bo=function(r,l){return r>l?l:r},xo=function(r,l){return r>l?r:l},Uo=function(r,l){return 255*(1-(1-r/255)*(1-l/255))},Wo=function(r,l){return l<128?2*r*l/255:255*(1-2*(1-r/255)*(1-l/255))},Ho=function(r,l){return 255*(1-(1-l/255)/(r/255))},qo=function(r,l){return r===255?255:(r=255*(l/255)/(1-r/255),r>255?255:r)};Mt.normal=Dt(Ot(No)),Mt.multiply=Dt(Ot(zo)),Mt.screen=Dt(Ot(Uo)),Mt.overlay=Dt(Ot(Wo)),Mt.darken=Dt(Ot(Bo)),Mt.lighten=Dt(Ot(xo)),Mt.dodge=Dt(Ot(qo)),Mt.burn=Dt(Ot(Ho));for(var Go=Mt,Xr=M.type,Vo=M.clip_rgb,jo=M.TWOPI,Yo=Math.pow,Qo=Math.sin,Xo=Math.cos,ia=v,Jo=function(r,l,u,h,b){r===void 0&&(r=300),l===void 0&&(l=-1.5),u===void 0&&(u=1),h===void 0&&(h=1),b===void 0&&(b=[0,1]);var k=0,m;Xr(b)==="array"?m=b[1]-b[0]:(m=0,b=[b,b]);var $=function(y){var S=jo*((r+120)/360+l*y),L=Yo(b[0]+m*y,h),q=k!==0?u[0]+y*k:u,R=q*L*(1-L)/2,j=Xo(S),V=Qo(S),fe=L+R*(-.14861*j+1.78277*V),me=L+R*(-.29227*j-.90649*V),we=L+R*(1.97294*j);return ia(Vo([fe*255,me*255,we*255,1]))};return $.start=function(y){return y==null?r:(r=y,$)},$.rotations=function(y){return y==null?l:(l=y,$)},$.gamma=function(y){return y==null?h:(h=y,$)},$.hue=function(y){return y==null?u:(u=y,Xr(u)==="array"?(k=u[1]-u[0],k===0&&(u=u[1])):k=0,$)},$.lightness=function(y){return y==null?b:(Xr(y)==="array"?(b=y,m=y[1]-y[0]):(b=[y,y],m=0),$)},$.scale=function(){return ia.scale($)},$.hue(u),$},Zo=A,Ko="0123456789abcdef",ef=Math.floor,tf=Math.random,rf=function(){for(var r="#",l=0;l<6;l++)r+=Ko.charAt(ef(tf()*16));return new Zo(r,"hex")},Jr=g,oa=Math.log,nf=Math.pow,af=Math.floor,lf=Math.abs,fa=function(r,l){l===void 0&&(l=null);var u={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return Jr(r)==="object"&&(r=Object.values(r)),r.forEach(function(h){l&&Jr(h)==="object"&&(h=h[l]),h!=null&&!isNaN(h)&&(u.values.push(h),u.sum+=h,h<u.min&&(u.min=h),h>u.max&&(u.max=h),u.count+=1)}),u.domain=[u.min,u.max],u.limits=function(h,b){return ua(u,h,b)},u},ua=function(r,l,u){l===void 0&&(l="equal"),u===void 0&&(u=7),Jr(r)=="array"&&(r=fa(r));var h=r.min,b=r.max,k=r.values.sort(function(Kr,en){return Kr-en});if(u===1)return[h,b];var m=[];if(l.substr(0,1)==="c"&&(m.push(h),m.push(b)),l.substr(0,1)==="e"){m.push(h);for(var $=1;$<u;$++)m.push(h+$/u*(b-h));m.push(b)}else if(l.substr(0,1)==="l"){if(h<=0)throw new Error("Logarithmic scales are only possible for values > 0");var y=Math.LOG10E*oa(h),S=Math.LOG10E*oa(b);m.push(h);for(var L=1;L<u;L++)m.push(nf(10,y+L/u*(S-y)));m.push(b)}else if(l.substr(0,1)==="q"){m.push(h);for(var q=1;q<u;q++){var R=(k.length-1)*q/u,j=af(R);if(j===R)m.push(k[j]);else{var V=R-j;m.push(k[j]*(1-V)+k[j+1]*V)}}m.push(b)}else if(l.substr(0,1)==="k"){var fe,me=k.length,we=new Array(me),Ee=new Array(u),et=!0,Je=0,dt=null;dt=[],dt.push(h);for(var ke=1;ke<u;ke++)dt.push(h+ke/u*(b-h));for(dt.push(b);et;){for(var O=0;O<u;O++)Ee[O]=0;for(var ne=0;ne<me;ne++)for(var pe=k[ne],ue=Number.MAX_VALUE,tt=void 0,Ne=0;Ne<u;Ne++){var $e=lf(dt[Ne]-pe);$e<ue&&(ue=$e,tt=Ne),Ee[tt]++,we[ne]=tt}for(var Se=new Array(u),Fe=0;Fe<u;Fe++)Se[Fe]=null;for(var Ie=0;Ie<me;Ie++)fe=we[Ie],Se[fe]===null?Se[fe]=k[Ie]:Se[fe]+=k[Ie];for(var St=0;St<u;St++)Se[St]*=1/Ee[St];et=!1;for(var Pt=0;Pt<u;Pt++)if(Se[Pt]!==dt[Pt]){et=!0;break}dt=Se,Je++,Je>200&&(et=!1)}for(var Nt={},er=0;er<u;er++)Nt[er]=[];for(var tr=0;tr<me;tr++)fe=we[tr],Nt[fe].push(k[tr]);for(var Rt=[],Wt=0;Wt<u;Wt++)Rt.push(Nt[Wt][0]),Rt.push(Nt[Wt][Nt[Wt].length-1]);Rt=Rt.sort(function(Kr,en){return Kr-en}),m.push(Rt[0]);for(var gr=1;gr<Rt.length;gr+=2){var Ht=Rt[gr];!isNaN(Ht)&&m.indexOf(Ht)===-1&&m.push(Ht)}}return m},ca={analyze:fa,limits:ua},ha=A,sf=function(r,l){r=new ha(r),l=new ha(l);var u=r.luminance(),h=l.luminance();return u>h?(u+.05)/(h+.05):(h+.05)/(u+.05)},ga=A,Tt=Math.sqrt,Qe=Math.pow,of=Math.min,ff=Math.max,da=Math.atan2,va=Math.abs,yr=Math.cos,pa=Math.sin,uf=Math.exp,ma=Math.PI,cf=function(r,l,u,h,b){u===void 0&&(u=1),h===void 0&&(h=1),b===void 0&&(b=1);var k=function(Ht){return 360*Ht/(2*ma)},m=function(Ht){return 2*ma*Ht/360};r=new ga(r),l=new ga(l);var $=Array.from(r.lab()),y=$[0],S=$[1],L=$[2],q=Array.from(l.lab()),R=q[0],j=q[1],V=q[2],fe=(y+R)/2,me=Tt(Qe(S,2)+Qe(L,2)),we=Tt(Qe(j,2)+Qe(V,2)),Ee=(me+we)/2,et=.5*(1-Tt(Qe(Ee,7)/(Qe(Ee,7)+Qe(25,7)))),Je=S*(1+et),dt=j*(1+et),ke=Tt(Qe(Je,2)+Qe(L,2)),O=Tt(Qe(dt,2)+Qe(V,2)),ne=(ke+O)/2,pe=k(da(L,Je)),ue=k(da(V,dt)),tt=pe>=0?pe:pe+360,Ne=ue>=0?ue:ue+360,$e=va(tt-Ne)>180?(tt+Ne+360)/2:(tt+Ne)/2,Se=1-.17*yr(m($e-30))+.24*yr(m(2*$e))+.32*yr(m(3*$e+6))-.2*yr(m(4*$e-63)),Fe=Ne-tt;Fe=va(Fe)<=180?Fe:Ne<=tt?Fe+360:Fe-360,Fe=2*Tt(ke*O)*pa(m(Fe)/2);var Ie=R-y,St=O-ke,Pt=1+.015*Qe(fe-50,2)/Tt(20+Qe(fe-50,2)),Nt=1+.045*ne,er=1+.015*ne*Se,tr=30*uf(-Qe(($e-275)/25,2)),Rt=2*Tt(Qe(ne,7)/(Qe(ne,7)+Qe(25,7))),Wt=-Rt*pa(2*m(tr)),gr=Tt(Qe(Ie/(u*Pt),2)+Qe(St/(h*Nt),2)+Qe(Fe/(b*er),2)+Wt*(St/(h*Nt))*(Fe/(b*er)));return ff(0,of(100,gr))},ba=A,hf=function(r,l,u){u===void 0&&(u="lab"),r=new ba(r),l=new ba(l);var h=r.get(u),b=l.get(u),k=0;for(var m in h){var $=(h[m]||0)-(b[m]||0);k+=$*$}return Math.sqrt(k)},gf=A,df=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];try{return new(Function.prototype.bind.apply(gf,[null].concat(r))),!0}catch{return!1}},_a=v,ka=Yr,vf={cool:function(){return ka([_a.hsl(180,1,.9),_a.hsl(250,.7,.4)])},hot:function(){return ka(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Cr={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Zr=0,wa=Object.keys(Cr);Zr<wa.length;Zr+=1){var $a=wa[Zr];Cr[$a.toLowerCase()]=Cr[$a]}var pf=Cr,Xe=v;Xe.average=Io,Xe.bezier=Po,Xe.blend=Go,Xe.cubehelix=Jo,Xe.mix=Xe.interpolate=Zn,Xe.random=rf,Xe.scale=Yr,Xe.analyze=ca.analyze,Xe.contrast=sf,Xe.deltaE=cf,Xe.distance=hf,Xe.limits=ca.limits,Xe.valid=df,Xe.scales=vf,Xe.colors=Dn,Xe.brewer=pf;var mf=Xe;return mf})})(_l);var Eu=_l.exports;const rr=dl(Eu);function Mu(i){let e,t,a,n,s,o,c,f;return{c(){e=Z("div"),t=Z("label"),a=Be(i[1]),n=Be(":"),s=be(),o=Z("input"),this.h()},l(g){e=K(g,"DIV",{class:!0});var d=G(e);t=K(d,"LABEL",{class:!0});var p=G(t);a=xe(p,i[1]),n=xe(p,":"),p.forEach(C),s=_e(d),o=K(d,"INPUT",{type:!0,name:!0,id:!0,class:!0}),d.forEach(C),this.h()},h(){E(t,"class","pr-2 text-xs text-neutral-400 text-right"),E(o,"type","color"),E(o,"name",i[1]),E(o,"id",i[1]),E(o,"class","emboss py-1 px-2 bg-neutral-700 border border-neutral-800 text-xs text-neutral-200"),E(e,"class","flex items-center")},m(g,d){Y(g,e,d),B(e,t),B(t,a),B(t,n),B(e,s),B(e,o),ya(o,i[0]),c||(f=[wt(o,"input",i[2]),wt(o,"input",i[3])],c=!0)},p(g,[d]){d&2&&$t(a,g[1]),d&2&&E(o,"name",g[1]),d&2&&E(o,"id",g[1]),d&1&&ya(o,g[0])},i:Ue,o:Ue,d(g){g&&C(e),c=!1,an(f)}}}function Su(i,e,t){let{name:a}=e,{value:n="#0000FF"}=e;const s=dr();function o(f){if(f.target){const g=f.target;s("change",g.value)}}function c(){n=this.value,t(0,n)}return i.$$set=f=>{"name"in f&&t(1,a=f.name),"value"in f&&t(0,n=f.value)},[n,a,o,c]}class Fu extends rt{constructor(e){super(),nt(this,e,Su,Mu,Ge,{name:1,value:0})}}function Iu(i){let e,t,a,n,s,o={personaSide:`${i[4]}Front`};t=new nr({props:o}),i[11](t),t.$on("ready",i[9]);let c={personaSide:`${i[4]}Back`};return n=new nr({props:c}),i[12](n),n.$on("ready",i[9]),{c(){e=Z("div"),ce(t.$$.fragment),a=be(),ce(n.$$.fragment),this.h()},l(f){e=K(f,"DIV",{class:!0});var g=G(e);he(t.$$.fragment,g),a=_e(g),he(n.$$.fragment,g),g.forEach(C),this.h()},h(){E(e,"class","flex w-full h-full")},m(f,g){Y(f,e,g),ge(t,e,null),B(e,a),ge(n,e,null),s=!0},p(f,g){const d={};g&16&&(d.personaSide=`${f[4]}Front`),t.$set(d);const p={};g&16&&(p.personaSide=`${f[4]}Back`),n.$set(p)},i(f){s||(N(t.$$.fragment,f),N(n.$$.fragment,f),s=!0)},o(f){U(t.$$.fragment,f),U(n.$$.fragment,f),s=!1},d(f){f&&C(e),i[11](null),de(t),i[12](null),de(n)}}}function Lu(i){let e,t;return e=new fr({props:{tabs:["Female","Male"],activeTab:i[4],caption:"Density Map",$$slots:{default:[Iu]},$$scope:{ctx:i}}}),e.$on("tabClick",i[8]),{c(){ce(e.$$.fragment)},l(a){he(e.$$.fragment,a)},m(a,n){ge(e,a,n),t=!0},p(a,n){const s={};n&16&&(s.activeTab=a[4]),n&2097180&&(s.$$scope={dirty:n,ctx:a}),e.$set(s)},i(a){t||(N(e.$$.fragment,a),t=!0)},o(a){U(e.$$.fragment,a),t=!1},d(a){de(e,a)}}}function Au(i){let e,t,a,n,s,o,c,f,g,d;return a=new Fu({props:{value:i[1],name:"Color"}}),a.$on("change",i[7]),o=new qt({props:{name:"Participants count",label:i[0].participants.length.toString()}}),g=new qt({props:{name:`${i[4]} participants count`,label:i[4]==="Female"?i[5].toString():i[6].toString()}}),{c(){e=Z("ul"),t=Z("li"),ce(a.$$.fragment),n=be(),s=Z("li"),ce(o.$$.fragment),c=be(),f=Z("li"),ce(g.$$.fragment),this.h()},l(p){e=K(p,"UL",{class:!0});var w=G(e);t=K(w,"LI",{});var P=G(t);he(a.$$.fragment,P),P.forEach(C),n=_e(w),s=K(w,"LI",{});var Q=G(s);he(o.$$.fragment,Q),Q.forEach(C),c=_e(w),f=K(w,"LI",{});var M=G(f);he(g.$$.fragment,M),M.forEach(C),w.forEach(C),this.h()},h(){E(e,"class","p-2")},m(p,w){Y(p,e,w),B(e,t),ge(a,t,null),B(e,n),B(e,s),ge(o,s,null),B(e,c),B(e,f),ge(g,f,null),d=!0},p(p,w){const P={};w&2&&(P.value=p[1]),a.$set(P);const Q={};w&1&&(Q.label=p[0].participants.length.toString()),o.$set(Q);const M={};w&16&&(M.name=`${p[4]} participants count`),w&112&&(M.label=p[4]==="Female"?p[5].toString():p[6].toString()),g.$set(M)},i(p){d||(N(a.$$.fragment,p),N(o.$$.fragment,p),N(g.$$.fragment,p),d=!0)},o(p){U(a.$$.fragment,p),U(o.$$.fragment,p),U(g.$$.fragment,p),d=!1},d(p){p&&C(e),de(a),de(o),de(g)}}}function Tu(i){let e,t;return e=new fr({props:{tabs:["Details"],highlightTab:!1,$$slots:{default:[Au]},$$scope:{ctx:i}}}),{c(){ce(e.$$.fragment)},l(a){he(e.$$.fragment,a)},m(a,n){ge(e,a,n),t=!0},p(a,n){const s={};n&2097267&&(s.$$scope={dirty:n,ctx:a}),e.$set(s)},i(a){t||(N(e.$$.fragment,a),t=!0)},o(a){U(e.$$.fragment,a),t=!1},d(a){de(e,a)}}}function tl(i){let e,t;return e=new on({props:{$$slots:{settings:[Tu],panels:[Lu]},$$scope:{ctx:i}}}),{c(){ce(e.$$.fragment)},l(a){he(e.$$.fragment,a)},m(a,n){ge(e,a,n),t=!0},p(a,n){const s={};n&2097279&&(s.$$scope={dirty:n,ctx:a}),e.$set(s)},i(a){t||(N(e.$$.fragment,a),t=!0)},o(a){U(e.$$.fragment,a),t=!1},d(a){de(e,a)}}}function Ru(i){let e=i[4],t,a,n=tl(i);return{c(){n.c(),t=Ke()},l(s){n.l(s),t=Ke()},m(s,o){n.m(s,o),Y(s,t,o),a=!0},p(s,[o]){o&16&&Ge(e,e=s[4])?(ft(),U(n,1,1,Ue),ut(),n=tl(s),n.c(),N(n,1),n.m(t.parentNode,t)):n.p(s,o)},i(s){a||(N(n),a=!0)},o(s){U(n),a=!1},d(s){s&&C(t),n.d(s)}}}let rl=1,nl=1;function Du(i,e,t){let a,{survey:n}=e,s,o,c="Female",f="#0000ff",g,d,p=0,w=0,P=0,Q;function M(){return[{name:`DensityMap-${c}Front.png`,dataUrl:s.getImage()},{name:`DensityMap-${c}Back.png`,dataUrl:o.getImage()}]}function ae(v,_,F){const D=[];n.participants.forEach(H=>{const ee=H.drawing[v];ee&&D.push(ee)}),v.includes("Female")?t(5,p=D.length):t(6,w=D.length),Q==null||Q.postMessage({command:"getBins",params:{drawings:D,side:v.includes("Front")?"Front":"Back",binWidth:rl,binHeight:nl,width:_,height:F}})}function le(v,_){let F,D,H;c==="Female"?H=p:H=w;const ee=a.domain([0,H]);v==="Front"?(F=s.getCanvas(),D=s.getScaleFactor(),s.clear()):(F=o.getCanvas(),D=o.getScaleFactor(),o.clear());const ie=F.getContext("2d");if(ie==null)throw"Could not get context to draw density map.";for(let Te of _)ie.fillStyle=ee(Te.length).hex(),ie.fillRect(Te.x*D,Te.y*D,rl*D,nl*D)}function se({detail:v}){t(1,f=v),le("Front",g),le("Back",d)}function z({detail:v}){if(P>0){alert("Please wait until computations have completed.");return}t(4,c=v)}function T(v){const{personaSide:_,imgWidth:F,imgHeight:D}=v.detail,H="Computing density...";_.includes("Front")?s.setMessage(H):o.setMessage(H),P++,ae(_,F,D)}async function W(){const v=await nn(()=>import("../chunks/binning.worker.673b3133.js"),[],import.meta.url);Q=new v.default,Q.onmessage=_=>{if(_.data.event==="bins"){const{side:F,bins:D}=_.data.params;F==="Front"?(g=D,s.clearMessage()):(d=D,o.clearMessage()),P--,le(F,D)}}}Sr(()=>{W()});function A(v){st[v?"unshift":"push"](()=>{s=v,t(2,s)})}function x(v){st[v?"unshift":"push"](()=>{o=v,t(3,o)})}return i.$$set=v=>{"survey"in v&&t(0,n=v.survey)},i.$$.update=()=>{i.$$.dirty&2&&(a=rr.scale([rr(f).alpha(0),rr(f)]))},[n,f,s,o,c,p,w,se,z,T,M,A,x]}class Ou extends rt{constructor(e){super(),nt(this,e,Du,Ru,Ge,{survey:0,getImages:10})}get survey(){return this.$$.ctx[0]}set survey(e){this.$$set({survey:e}),hl()}get getImages(){return this.$$.ctx[10]}}function Pu(i){let e,t,a,n,s,o={personaSide:`${i[3]}Front`};t=new nr({props:o}),i[9](t),t.$on("ready",i[7]);let c={personaSide:`${i[3]}Back`};return n=new nr({props:c}),i[10](n),n.$on("ready",i[7]),{c(){e=Z("div"),ce(t.$$.fragment),a=be(),ce(n.$$.fragment),this.h()},l(f){e=K(f,"DIV",{class:!0});var g=G(e);he(t.$$.fragment,g),a=_e(g),he(n.$$.fragment,g),g.forEach(C),this.h()},h(){E(e,"class","flex w-full h-full")},m(f,g){Y(f,e,g),ge(t,e,null),B(e,a),ge(n,e,null),s=!0},p(f,g){const d={};g&8&&(d.personaSide=`${f[3]}Front`),t.$set(d);const p={};g&8&&(p.personaSide=`${f[3]}Back`),n.$set(p)},i(f){s||(N(t.$$.fragment,f),N(n.$$.fragment,f),s=!0)},o(f){U(t.$$.fragment,f),U(n.$$.fragment,f),s=!1},d(f){f&&C(e),i[9](null),de(t),i[10](null),de(n)}}}function Nu(i){let e,t;return e=new fr({props:{tabs:["Female","Male"],activeTab:i[3],caption:"Valence Map",$$slots:{default:[Pu]},$$scope:{ctx:i}}}),e.$on("tabClick",i[6]),{c(){ce(e.$$.fragment)},l(a){he(e.$$.fragment,a)},m(a,n){ge(e,a,n),t=!0},p(a,n){const s={};n&8&&(s.activeTab=a[3]),n&262158&&(s.$$scope={dirty:n,ctx:a}),e.$set(s)},i(a){t||(N(e.$$.fragment,a),t=!0)},o(a){U(e.$$.fragment,a),t=!1},d(a){de(e,a)}}}function zu(i){let e,t,a,n,s,o,c;return a=new qt({props:{name:"Participants count",label:i[0].participants.length.toString()}}),o=new qt({props:{name:`${i[3]} participants count`,label:i[3]==="Female"?i[4].toString():i[5].toString()}}),{c(){e=Z("ul"),t=Z("li"),ce(a.$$.fragment),n=be(),s=Z("li"),ce(o.$$.fragment),this.h()},l(f){e=K(f,"UL",{class:!0});var g=G(e);t=K(g,"LI",{});var d=G(t);he(a.$$.fragment,d),d.forEach(C),n=_e(g),s=K(g,"LI",{});var p=G(s);he(o.$$.fragment,p),p.forEach(C),g.forEach(C),this.h()},h(){E(e,"class","p-2")},m(f,g){Y(f,e,g),B(e,t),ge(a,t,null),B(e,n),B(e,s),ge(o,s,null),c=!0},p(f,g){const d={};g&1&&(d.label=f[0].participants.length.toString()),a.$set(d);const p={};g&8&&(p.name=`${f[3]} participants count`),g&56&&(p.label=f[3]==="Female"?f[4].toString():f[5].toString()),o.$set(p)},i(f){c||(N(a.$$.fragment,f),N(o.$$.fragment,f),c=!0)},o(f){U(a.$$.fragment,f),U(o.$$.fragment,f),c=!1},d(f){f&&C(e),de(a),de(o)}}}function Bu(i){let e,t;return e=new fr({props:{tabs:["Details"],highlightTab:!1,$$slots:{default:[zu]},$$scope:{ctx:i}}}),{c(){ce(e.$$.fragment)},l(a){he(e.$$.fragment,a)},m(a,n){ge(e,a,n),t=!0},p(a,n){const s={};n&262201&&(s.$$scope={dirty:n,ctx:a}),e.$set(s)},i(a){t||(N(e.$$.fragment,a),t=!0)},o(a){U(e.$$.fragment,a),t=!1},d(a){de(e,a)}}}function al(i){let e,t;return e=new on({props:{$$slots:{settings:[Bu],panels:[Nu]},$$scope:{ctx:i}}}),{c(){ce(e.$$.fragment)},l(a){he(e.$$.fragment,a)},m(a,n){ge(e,a,n),t=!0},p(a,n){const s={};n&262207&&(s.$$scope={dirty:n,ctx:a}),e.$set(s)},i(a){t||(N(e.$$.fragment,a),t=!0)},o(a){U(e.$$.fragment,a),t=!1},d(a){de(e,a)}}}function xu(i){let e=i[3],t,a,n=al(i);return{c(){n.c(),t=Ke()},l(s){n.l(s),t=Ke()},m(s,o){n.m(s,o),Y(s,t,o),a=!0},p(s,[o]){o&8&&Ge(e,e=s[3])?(ft(),U(n,1,1,Ue),ut(),n=al(s),n.c(),N(n,1),n.m(t.parentNode,t)):n.p(s,o)},i(s){a||(N(n),a=!0)},o(s){U(n),a=!1},d(s){s&&C(t),n.d(s)}}}let ll=1,sl=1;function Uu(i,e,t){let{survey:a}=e,n,s,o="Female",c=0,f=0,g=0,d;function p(){return[{name:`ValenceMap-${o}Front.png`,dataUrl:n.getImage()},{name:`ValenceMap-${o}Back.png`,dataUrl:s.getImage()}]}function w(z){const T=[];let W,A;if(a.participants.forEach(x=>{const v=x.drawing[z];v&&(W||(W=v.imgWidth),A||(A=v.imgHeight),T.push(v))}),z.includes("Female")?t(4,c=T.length):t(5,f=T.length),W===void 0||A===void 0)throw"Could not get original dimensions of persona side image before binning.";d==null||d.postMessage({command:"getBins",params:{drawings:T,side:z.includes("Front")?"Front":"Back",binWidth:ll,binHeight:sl,width:W,height:A}})}function P(z,T){const A=rr.scale(["red","green"]).domain([1,11]);let x,v,_;o==="Female"?_=c:_=f,z==="Front"?(x=n.getCanvas(),v=n.getScaleFactor()):(x=s.getCanvas(),v=s.getScaleFactor());const F=x.getContext("2d");if(F==null)throw"Could not get context to draw density map.";for(let D of T){const H=D.map(J=>J.valence),ee=D.map(J=>J.intensity),ie=H.reduce((J,ve)=>J+ve,0)/D.length,Te=ee.reduce((J,ve)=>J+ve,0)/D.length,Le=A(ie),te=rr.scale(["white",Le]).domain([1,11])(Te),I=rr.scale([te.alpha(0),te]).domain([0,_])(D.length/_);F.fillStyle=I.hex(),F.fillRect(D.x*v,D.y*v,ll,sl)}}function Q({detail:z}){if(g>0){alert("Please wait until computations have completed.");return}t(3,o=z)}function M(z){const{personaSide:T,width:W,height:A}=z.detail,x="Computing sensations...";T.includes("Front")?n.setMessage(x):s.setMessage(x),g++,w(T)}async function ae(){const z=await nn(()=>import("../chunks/binning.worker.673b3133.js"),[],import.meta.url);d=new z.default,d.onmessage=T=>{if(T.data.event==="bins"){const{side:W,bins:A}=T.data.params;W==="Front"?n.clearMessage():s.clearMessage(),g--,P(W,A)}}}Sr(()=>{ae()});function le(z){st[z?"unshift":"push"](()=>{n=z,t(1,n)})}function se(z){st[z?"unshift":"push"](()=>{s=z,t(2,s)})}return i.$$set=z=>{"survey"in z&&t(0,a=z.survey)},[a,n,s,o,c,f,Q,M,p,le,se]}class Wu extends rt{constructor(e){super(),nt(this,e,Uu,xu,Ge,{survey:0,getImages:8})}get getImages(){return this.$$.ctx[8]}}function Hu(i){let e,t,a,n,s;return{c(){e=Z("div"),t=Z("button"),a=Be("Load Survey Data"),this.h()},l(o){e=K(o,"DIV",{class:!0});var c=G(e);t=K(c,"BUTTON",{class:!0});var f=G(t);a=xe(f,"Load Survey Data"),f.forEach(C),c.forEach(C),this.h()},h(){E(t,"class","py-1 px-2 bg-neutral-600 hover:bg-neutral-700 border border-neutral-900 shadow text-neutral-100 text-xs"),E(e,"class","flex items-center justify-center w-full h-full bg-neutral-800")},m(o,c){Y(o,e,c),B(e,t),B(t,a),n||(s=wt(t,"click",i[0]),n=!0)},p:Ue,i:Ue,o:Ue,d(o){o&&C(e),n=!1,s()}}}function qu(i){function e(t){Er.call(this,i,t)}return[e]}class Gu extends rt{constructor(e){super(),nt(this,e,qu,Hu,Ge,{})}}function il(i){let e,t,a={title:"Project",$$slots:{default:[Ju]},$$scope:{ctx:i}};return e=new bl({props:a}),i[16](e),{c(){ce(e.$$.fragment)},l(n){he(e.$$.fragment,n)},m(n,s){ge(e,n,s),t=!0},p(n,s){const o={};s[0]&4|s[1]&32&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){U(e.$$.fragment,n),t=!1},d(n){i[16](null),de(e,n)}}}function Vu(i){let e;return{c(){e=Be("Load Survey Data")},l(t){e=xe(t,"Load Survey Data")},m(t,a){Y(t,e,a)},d(t){t&&C(e)}}}function ol(i){let e,t,a,n,s,o,c,f,g,d;return e=new Bt({props:{$$slots:{default:[ju]},$$scope:{ctx:i}}}),e.$on("click",i[13]),a=new Bt({props:{$$slots:{default:[Yu]},$$scope:{ctx:i}}}),a.$on("click",i[14]),s=new Bt({props:{$$slots:{default:[Qu]},$$scope:{ctx:i}}}),s.$on("click",i[15]),c=new Uf({}),g=new Bt({props:{$$slots:{default:[Xu]},$$scope:{ctx:i}}}),g.$on("click",i[10]),{c(){ce(e.$$.fragment),t=be(),ce(a.$$.fragment),n=be(),ce(s.$$.fragment),o=be(),ce(c.$$.fragment),f=be(),ce(g.$$.fragment)},l(p){he(e.$$.fragment,p),t=_e(p),he(a.$$.fragment,p),n=_e(p),he(s.$$.fragment,p),o=_e(p),he(c.$$.fragment,p),f=_e(p),he(g.$$.fragment,p)},m(p,w){ge(e,p,w),Y(p,t,w),ge(a,p,w),Y(p,n,w),ge(s,p,w),Y(p,o,w),ge(c,p,w),Y(p,f,w),ge(g,p,w),d=!0},p(p,w){const P={};w[1]&32&&(P.$$scope={dirty:w,ctx:p}),e.$set(P);const Q={};w[1]&32&&(Q.$$scope={dirty:w,ctx:p}),a.$set(Q);const M={};w[1]&32&&(M.$$scope={dirty:w,ctx:p}),s.$set(M);const ae={};w[1]&32&&(ae.$$scope={dirty:w,ctx:p}),g.$set(ae)},i(p){d||(N(e.$$.fragment,p),N(a.$$.fragment,p),N(s.$$.fragment,p),N(c.$$.fragment,p),N(g.$$.fragment,p),d=!0)},o(p){U(e.$$.fragment,p),U(a.$$.fragment,p),U(s.$$.fragment,p),U(c.$$.fragment,p),U(g.$$.fragment,p),d=!1},d(p){de(e,p),p&&C(t),de(a,p),p&&C(n),de(s,p),p&&C(o),de(c,p),p&&C(f),de(g,p)}}}function ju(i){let e;return{c(){e=Be("Export images")},l(t){e=xe(t,"Export images")},m(t,a){Y(t,e,a)},d(t){t&&C(e)}}}function Yu(i){let e;return{c(){e=Be("Export strokes")},l(t){e=xe(t,"Export strokes")},m(t,a){Y(t,e,a)},d(t){t&&C(e)}}}function Qu(i){let e;return{c(){e=Be("Export pixel maps")},l(t){e=xe(t,"Export pixel maps")},m(t,a){Y(t,e,a)},d(t){t&&C(e)}}}function Xu(i){let e;return{c(){e=Be("Close project")},l(t){e=xe(t,"Close project")},m(t,a){Y(t,e,a)},d(t){t&&C(e)}}}function Ju(i){let e,t,a,n;e=new Bt({props:{$$slots:{default:[Vu]},$$scope:{ctx:i}}}),e.$on("click",i[9]);let s=i[2]&&ol(i);return{c(){ce(e.$$.fragment),t=be(),s&&s.c(),a=Ke()},l(o){he(e.$$.fragment,o),t=_e(o),s&&s.l(o),a=Ke()},m(o,c){ge(e,o,c),Y(o,t,c),s&&s.m(o,c),Y(o,a,c),n=!0},p(o,c){const f={};c[1]&32&&(f.$$scope={dirty:c,ctx:o}),e.$set(f),o[2]?s?(s.p(o,c),c[0]&4&&N(s,1)):(s=ol(o),s.c(),N(s,1),s.m(a.parentNode,a)):s&&(ft(),U(s,1,1,()=>{s=null}),ut())},i(o){n||(N(e.$$.fragment,o),N(s),n=!0)},o(o){U(e.$$.fragment,o),U(s),n=!1},d(o){de(e,o),o&&C(t),s&&s.d(o),o&&C(a)}}}function fl(i){let e,t,a={title:"Tools",enableIcon:!0,$$slots:{default:[ac]},$$scope:{ctx:i}};return e=new bl({props:a}),i[20](e),{c(){ce(e.$$.fragment)},l(n){he(e.$$.fragment,n)},m(n,s){ge(e,n,s),t=!0},p(n,s){const o={};s[0]&64|s[1]&32&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){U(e.$$.fragment,n),t=!1},d(n){i[20](null),de(e,n)}}}function Zu(i){let e=Ze.LookingGlass+"",t;return{c(){t=Be(e)},l(a){t=xe(a,e)},m(a,n){Y(a,t,n)},p:Ue,d(a){a&&C(t)}}}function Ku(i){let e,t,a;return{c(){e=ct("svg"),t=ct("path"),a=ct("path"),this.h()},l(n){e=ht(n,"svg",{slot:!0,xmlns:!0,width:!0,height:!0,viewBox:!0,"stroke-width":!0,stroke:!0,fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0});var s=G(e);t=ht(s,"path",{stroke:!0,d:!0,fill:!0}),G(t).forEach(C),a=ht(s,"path",{d:!0}),G(a).forEach(C),s.forEach(C),this.h()},h(){E(t,"stroke","none"),E(t,"d","M0 0h24v24H0z"),E(t,"fill","none"),E(a,"d","M5 12l5 5l10 -10"),E(e,"slot","icon"),E(e,"xmlns","http://www.w3.org/2000/svg"),E(e,"width","14"),E(e,"height","14"),E(e,"viewBox","0 0 24 24"),E(e,"stroke-width","2"),E(e,"stroke","currentColor"),E(e,"fill","none"),E(e,"stroke-linecap","round"),E(e,"stroke-linejoin","round"),vt(e,"hidden",!i[35])},m(n,s){Y(n,e,s),B(e,t),B(e,a)},p(n,s){s[1]&16&&vt(e,"hidden",!n[35])},d(n){n&&C(e)}}}function ec(i){let e=Ze.DensityMap+"",t;return{c(){t=Be(e)},l(a){t=xe(a,e)},m(a,n){Y(a,t,n)},p:Ue,d(a){a&&C(t)}}}function tc(i){let e,t,a;return{c(){e=ct("svg"),t=ct("path"),a=ct("path"),this.h()},l(n){e=ht(n,"svg",{slot:!0,xmlns:!0,width:!0,height:!0,viewBox:!0,"stroke-width":!0,stroke:!0,fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0});var s=G(e);t=ht(s,"path",{stroke:!0,d:!0,fill:!0}),G(t).forEach(C),a=ht(s,"path",{d:!0}),G(a).forEach(C),s.forEach(C),this.h()},h(){E(t,"stroke","none"),E(t,"d","M0 0h24v24H0z"),E(t,"fill","none"),E(a,"d","M5 12l5 5l10 -10"),E(e,"slot","icon"),E(e,"xmlns","http://www.w3.org/2000/svg"),E(e,"width","16"),E(e,"height","16"),E(e,"viewBox","0 0 24 24"),E(e,"stroke-width","2"),E(e,"stroke","currentColor"),E(e,"fill","none"),E(e,"stroke-linecap","round"),E(e,"stroke-linejoin","round"),vt(e,"hidden",!i[35])},m(n,s){Y(n,e,s),B(e,t),B(e,a)},p(n,s){s[1]&16&&vt(e,"hidden",!n[35])},d(n){n&&C(e)}}}function rc(i){let e=Ze.ValenceMap+"",t;return{c(){t=Be(e)},l(a){t=xe(a,e)},m(a,n){Y(a,t,n)},p:Ue,d(a){a&&C(t)}}}function nc(i){let e,t,a;return{c(){e=ct("svg"),t=ct("path"),a=ct("path"),this.h()},l(n){e=ht(n,"svg",{slot:!0,xmlns:!0,width:!0,height:!0,viewBox:!0,"stroke-width":!0,stroke:!0,fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0});var s=G(e);t=ht(s,"path",{stroke:!0,d:!0,fill:!0}),G(t).forEach(C),a=ht(s,"path",{d:!0}),G(a).forEach(C),s.forEach(C),this.h()},h(){E(t,"stroke","none"),E(t,"d","M0 0h24v24H0z"),E(t,"fill","none"),E(a,"d","M5 12l5 5l10 -10"),E(e,"slot","icon"),E(e,"xmlns","http://www.w3.org/2000/svg"),E(e,"width","16"),E(e,"height","16"),E(e,"viewBox","0 0 24 24"),E(e,"stroke-width","2"),E(e,"stroke","currentColor"),E(e,"fill","none"),E(e,"stroke-linecap","round"),E(e,"stroke-linejoin","round"),vt(e,"hidden",!i[35])},m(n,s){Y(n,e,s),B(e,t),B(e,a)},p(n,s){s[1]&16&&vt(e,"hidden",!n[35])},d(n){n&&C(e)}}}function ac(i){let e,t,a,n,s,o;return e=new Bt({props:{isActive:i[6]===Ze.LookingGlass,$$slots:{icon:[Ku,({isActive:c})=>({35:c}),({isActive:c})=>[0,c?16:0]],default:[Zu]},$$scope:{ctx:i}}}),e.$on("click",i[17]),a=new Bt({props:{isActive:i[6]===Ze.DensityMap,$$slots:{icon:[tc,({isActive:c})=>({35:c}),({isActive:c})=>[0,c?16:0]],default:[ec]},$$scope:{ctx:i}}}),a.$on("click",i[18]),s=new Bt({props:{isActive:i[6]===Ze.ValenceMap,$$slots:{icon:[nc,({isActive:c})=>({35:c}),({isActive:c})=>[0,c?16:0]],default:[rc]},$$scope:{ctx:i}}}),s.$on("click",i[19]),{c(){ce(e.$$.fragment),t=be(),ce(a.$$.fragment),n=be(),ce(s.$$.fragment)},l(c){he(e.$$.fragment,c),t=_e(c),he(a.$$.fragment,c),n=_e(c),he(s.$$.fragment,c)},m(c,f){ge(e,c,f),Y(c,t,f),ge(a,c,f),Y(c,n,f),ge(s,c,f),o=!0},p(c,f){const g={};f[0]&64&&(g.isActive=c[6]===Ze.LookingGlass),f[1]&48&&(g.$$scope={dirty:f,ctx:c}),e.$set(g);const d={};f[0]&64&&(d.isActive=c[6]===Ze.DensityMap),f[1]&48&&(d.$$scope={dirty:f,ctx:c}),a.$set(d);const p={};f[0]&64&&(p.isActive=c[6]===Ze.ValenceMap),f[1]&48&&(p.$$scope={dirty:f,ctx:c}),s.$set(p)},i(c){o||(N(e.$$.fragment,c),N(a.$$.fragment,c),N(s.$$.fragment,c),o=!0)},o(c){U(e.$$.fragment,c),U(a.$$.fragment,c),U(s.$$.fragment,c),o=!1},d(c){de(e,c),c&&C(t),de(a,c),c&&C(n),de(s,c)}}}function ul(i){let e,t,a,n,s,o;return{c(){e=Z("div"),t=ct("svg"),a=ct("circle"),n=ct("path"),s=be(),o=Be(i[8]),this.h()},l(c){e=K(c,"DIV",{class:!0});var f=G(e);t=ht(f,"svg",{class:!0,xmlns:!0,fill:!0,viewBox:!0});var g=G(t);a=ht(g,"circle",{class:!0,cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),G(a).forEach(C),n=ht(g,"path",{class:!0,fill:!0,d:!0}),G(n).forEach(C),g.forEach(C),s=_e(f),o=xe(f,i[8]),f.forEach(C),this.h()},h(){E(a,"class","opacity-25"),E(a,"cx","12"),E(a,"cy","12"),E(a,"r","10"),E(a,"stroke","currentColor"),E(a,"stroke-width","4"),E(n,"class","opacity-75"),E(n,"fill","currentColor"),E(n,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),E(t,"class","animate-spin -ml-1 mr-3 h-5 w-5 text-white"),E(t,"xmlns","http://www.w3.org/2000/svg"),E(t,"fill","none"),E(t,"viewBox","0 0 24 24"),E(e,"class","z-20 absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 flex items-center justify-center py-2 px-4 bg-neutral-800 text-neutral-400")},m(c,f){Y(c,e,f),B(e,t),B(t,a),B(t,n),B(e,s),B(e,o)},p(c,f){f[0]&256&&$t(o,c[8])},d(c){c&&C(e)}}}function cl(i){let e,t;return e=new Gu({}),e.$on("click",i[9]),{c(){ce(e.$$.fragment)},l(a){he(e.$$.fragment,a)},m(a,n){ge(e,a,n),t=!0},p:Ue,i(a){t||(N(e.$$.fragment,a),t=!0)},o(a){U(e.$$.fragment,a),t=!1},d(a){de(e,a)}}}function lc(i){let e,t,a,n,s,o,c,f,g,d,p,w,P,Q,M,ae,le=i[3]===!1&&il(i),se=i[2]&&fl(i),z=i[3]&&ul(i),T=i[7]===void 0&&cl(i);return{c(){e=Z("section"),t=Z("header"),le&&le.c(),a=be(),se&&se.c(),n=be(),s=Z("span"),o=be(),c=Z("h1"),f=Be("InteroMap"),g=be(),d=Z("main"),z&&z.c(),p=be(),T&&T.c(),w=be(),P=Z("input"),this.h()},l(W){e=K(W,"SECTION",{class:!0});var A=G(e);t=K(A,"HEADER",{class:!0});var x=G(t);le&&le.l(x),a=_e(x),se&&se.l(x),n=_e(x),s=K(x,"SPAN",{class:!0}),G(s).forEach(C),o=_e(x),c=K(x,"H1",{class:!0,style:!0});var v=G(c);f=xe(v,"InteroMap"),v.forEach(C),x.forEach(C),g=_e(A),d=K(A,"MAIN",{class:!0});var _=G(d);z&&z.l(_),p=_e(_),T&&T.l(_),_.forEach(C),A.forEach(C),w=_e(W),P=K(W,"INPUT",{type:!0,class:!0,accept:!0}),this.h()},h(){E(s,"class","flex-grow"),E(c,"class","flex items-center h-full px-2 bg-gradient-to-t from-orange-600 to-orange-500 text-neutral-100 font-bold text-xs lowercase tracking-wider"),rn(c,"font-variant","small-caps"),E(t,"class","emboss z-20 flex items-center bg-neutral-600 border-b border-neutral-800"),E(d,"class","relative row-start-2 row-end-4"),E(e,"class","app-layout w-screen h-screen svelte-14urve1"),E(P,"type","file"),E(P,"class","hidden"),E(P,"accept",".csv")},m(W,A){Y(W,e,A),B(e,t),le&&le.m(t,null),B(t,a),se&&se.m(t,null),B(t,n),B(t,s),B(t,o),B(t,c),B(c,f),B(e,g),B(e,d),z&&z.m(d,null),B(d,p),T&&T.m(d,null),i[21](d),Y(W,w,A),Y(W,P,A),i[22](P),Q=!0,M||(ae=wt(P,"change",i[11]),M=!0)},p(W,A){W[3]===!1?le?(le.p(W,A),A[0]&8&&N(le,1)):(le=il(W),le.c(),N(le,1),le.m(t,a)):le&&(ft(),U(le,1,1,()=>{le=null}),ut()),W[2]?se?(se.p(W,A),A[0]&4&&N(se,1)):(se=fl(W),se.c(),N(se,1),se.m(t,n)):se&&(ft(),U(se,1,1,()=>{se=null}),ut()),W[3]?z?z.p(W,A):(z=ul(W),z.c(),z.m(d,p)):z&&(z.d(1),z=null),W[7]===void 0?T?(T.p(W,A),A[0]&128&&N(T,1)):(T=cl(W),T.c(),N(T,1),T.m(d,null)):T&&(ft(),U(T,1,1,()=>{T=null}),ut())},i(W){Q||(N(le),N(se),N(T),Q=!0)},o(W){U(le),U(se),U(T),Q=!1},d(W){W&&C(e),le&&le.d(),se&&se.d(),z&&z.d(),T&&T.d(),i[21](null),W&&C(w),W&&C(P),i[22](null),M=!1,ae()}}}function sc(i){return JSON.parse(i)}function tn(i,e){const t=document.createElement("a");t.href=e,t.target="_blank",t.download=i,t.click()}function ic(i,e,t){let a,n,s=!1,o=!1,c,f,g=Ze.LookingGlass,d=new Ma,p,w="Loading",P;function Q(){n.click()}function M(){p&&(p.$destroy(),t(7,p=void 0)),t(2,s=!1)}function ae(){n.files&&n.files.length>0&&(M(),t(3,o=!0),le(n.files[0]))}function le(I){t(8,w="Reading file..."),Ca.parse(I,{worker:!0,header:!0,complete:se})}function se(I){const J=T(I.data);d=z(J),t(7,p=_(Ze.LookingGlass))}function z(I){t(8,w="Loading survey data...");const J=I.length;if(J===0){const oe=`Sorry, we could not parse any InteroMap data from your file.
      Maybe the Qualtrics variable is incorrect?`;throw alert(oe),t(3,o=!1),oe}const ve=new Ma;for(let oe=0;oe<J;oe++){t(8,w=`Loading participant ${oe+1} data...`);const ye=new Tf({id:oe,drawing:I[oe]});ye.computeStrokeAreas(),ve.addParticipant(ye)}return ve}function T(I){const J=[];let ve=prompt("Specify the Qualtrics variable you wish to load:");if(ve==null||ve==="")throw alert("Error: You did not specify the Qualtrics variable."),t(3,o=!1),"No Qualtrics variable specified. Aborting.";for(let oe of I)if(ve in oe)try{const ye=sc(oe[ve]);Object.keys(ye).every(De=>["FemaleFront","FemaleBack","MaleFront","MaleBack"].includes(De))&&J.push(ye)}catch{console.error("Could not parse row:",oe)}return J}function W(I){I!==g&&t(7,p=_(I)),c.close()}function A(I){return new Cu({target:a,props:{survey:I}})}function x(I){return new Ou({target:a,props:{survey:I}})}function v(I){return new Wu({target:a,props:{survey:I}})}function _(I){let J;switch(p&&p.$destroy(),I){case Ze.LookingGlass:J=A(d);break;case Ze.DensityMap:J=x(d);break;case Ze.ValenceMap:J=v(d);break;default:throw`Unknown tool: ${I}.`}return t(6,g=I),t(3,o=!1),t(2,s=!0),J}function F(){const I=p==null?void 0:p.getImages();I==null||I.forEach(J=>{tn(J.name,J.dataUrl)}),f.close()}function D(){var oe;const J=[["Participant Number","Stroke Valence","Stroke Intensity","Area (pixels)","Brush Size (pixels)"]];for(let ye of d.participants)for(let We of Object.values(ye.drawing))for(let De of We.strokes)J.push([`${ye.id+1}`,De.valence.toString(),De.intensity.toString(),((oe=De.area)==null?void 0:oe.toString())??"",De.brushSize.toString()]);const ve=Ca.unparse(J);return"data:text/csv;base64,"+btoa(ve)}function H(){const I=D();tn("InteroMap-Strokes.csv",I),f.close()}function ee(){t(3,o=!0),t(8,w="Exporting pixel maps..."),P==null||P.postMessage({command:"get-pixelmaps-zip",params:{survey:d}}),f.close()}async function ie(){const I=await nn(()=>import("../chunks/export.worker.1b66d0f3.js"),[],import.meta.url);P=new I.default,P.onmessage=J=>{if(J.data.event==="pixelmaps-zip-progress"){const{current:ve,total:oe,msg:ye}=J.data.params;t(8,w=`(${Math.round(100*ve/oe)}%) ${ye}`)}else if(J.data.event==="pixelmaps-zip-data"){const{dataUrl:ve}=J.data.params;tn("InteroMap-Pixel-Maps.zip",ve),t(3,o=!1)}}}Sr(()=>{ie()});function Te(I){st[I?"unshift":"push"](()=>{f=I,t(5,f)})}const Le=()=>W(Ze.LookingGlass),X=()=>W(Ze.DensityMap),Re=()=>W(Ze.ValenceMap);function te(I){st[I?"unshift":"push"](()=>{c=I,t(4,c)})}function at(I){st[I?"unshift":"push"](()=>{a=I,t(0,a)})}function Ve(I){st[I?"unshift":"push"](()=>{n=I,t(1,n)})}return[a,n,s,o,c,f,g,p,w,Q,M,ae,W,F,H,ee,Te,Le,X,Re,te,at,Ve]}class cc extends rt{constructor(e){super(),nt(this,e,ic,lc,Ge,{},null,[-1,-1])}}export{cc as default};
