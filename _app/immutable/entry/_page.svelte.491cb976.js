var gf=Object.defineProperty;var pf=(i,e,t)=>e in i?gf(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var At=(i,e,t)=>(pf(i,typeof e!="symbol"?e+"":e,t),t);import{_ as ls}from"../chunks/preload-helper.41c905a7.js";import{J as vf,S as rt,i as nt,s as Ge,k as Z,q as Be,a as be,l as K,m as j,r as Ue,h as C,c as _e,n as E,K as vt,b as Q,G as z,L as wt,u as $t,g as P,v as ft,d as U,f as ut,M as rn,N as df,C as ar,D as sr,E as lr,F as ir,O as mf,w as lt,P as bf,Q as Er,H as We,R as _f,p as tn,T as pr,e as Ke,U as or,V as Gt,y as he,z as ge,A as pe,W as nn,X as an,B as ve,Y as Mr,Z as kf,_ as ct,$ as ht,a0 as is,o as Ir,a1 as wa}from"../chunks/index.61358ee6.js";var os=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fs(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var us={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(i,e){(function(t,a){i.exports=a()})(os,function t(){var a=typeof self<"u"?self:typeof window<"u"?window:a!==void 0?a:{},r=!a.document&&!!a.postMessage,l=a.IS_PAPA_WORKER||!1,o={},c=0,f={parse:function(b,m){var M=(m=m||{}).dynamicTyping||!1;if(X(M)&&(m.dynamicTypingFunction=M,M={}),m.dynamicTyping=M,m.transform=!!X(m.transform)&&m.transform,m.worker&&f.WORKERS_SUPPORTED){var O=function(){if(!f.WORKERS_SUPPORTED)return!1;var te=(Re=a.URL||a.webkitURL||null,Ae=t.toString(),f.BLOB_URL||(f.BLOB_URL=Re.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Ae,")();"],{type:"text/javascript"})))),oe=new a.Worker(te),Re,Ae;return oe.onmessage=ie,oe.id=c++,o[oe.id]=oe}();return O.userStep=m.step,O.userChunk=m.chunk,O.userComplete=m.complete,O.userError=m.error,m.step=X(m.step),m.chunk=X(m.chunk),m.complete=X(m.complete),m.error=X(m.error),delete m.worker,void O.postMessage({input:b,config:m,workerId:O.id})}var W=null;return f.NODE_STREAM_INPUT,typeof b=="string"?(b=function(te){return te.charCodeAt(0)===65279?te.slice(1):te}(b),W=m.download?new v(m):new D(m)):b.readable===!0&&X(b.read)&&X(b.on)?W=new G(m):(a.File&&b instanceof File||b instanceof Object)&&(W=new w(m)),W.stream(b)},unparse:function(b,m){var M=!1,O=!0,W=",",te=`\r
`,oe='"',Re=oe+oe,Ae=!1,J=null,De=!1;(function(){if(typeof m=="object"){if(typeof m.delimiter!="string"||f.BAD_DELIMITERS.filter(function(V){return m.delimiter.indexOf(V)!==-1}).length||(W=m.delimiter),(typeof m.quotes=="boolean"||typeof m.quotes=="function"||Array.isArray(m.quotes))&&(M=m.quotes),typeof m.skipEmptyLines!="boolean"&&typeof m.skipEmptyLines!="string"||(Ae=m.skipEmptyLines),typeof m.newline=="string"&&(te=m.newline),typeof m.quoteChar=="string"&&(oe=m.quoteChar),typeof m.header=="boolean"&&(O=m.header),Array.isArray(m.columns)){if(m.columns.length===0)throw new Error("Option columns is empty");J=m.columns}m.escapeChar!==void 0&&(Re=m.escapeChar+oe),(typeof m.escapeFormulae=="boolean"||m.escapeFormulae instanceof RegExp)&&(De=m.escapeFormulae instanceof RegExp?m.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var ne=new RegExp(ee(oe),"g");if(typeof b=="string"&&(b=JSON.parse(b)),Array.isArray(b)){if(!b.length||Array.isArray(b[0]))return at(null,b,Ae);if(typeof b[0]=="object")return at(J||Object.keys(b[0]),b,Ae)}else if(typeof b=="object")return typeof b.data=="string"&&(b.data=JSON.parse(b.data)),Array.isArray(b.data)&&(b.fields||(b.fields=b.meta&&b.meta.fields||J),b.fields||(b.fields=Array.isArray(b.data[0])?b.fields:typeof b.data[0]=="object"?Object.keys(b.data[0]):[]),Array.isArray(b.data[0])||typeof b.data[0]=="object"||(b.data=[b.data])),at(b.fields||[],b.data||[],Ae);throw new Error("Unable to serialize unrecognized input");function at(V,B,ae){var fe="";typeof V=="string"&&(V=JSON.parse(V)),typeof B=="string"&&(B=JSON.parse(B));var Fe=Array.isArray(V)&&0<V.length,Ee=!Array.isArray(B[0]);if(Fe&&O){for(var ze=0;ze<V.length;ze++)0<ze&&(fe+=W),fe+=He(V[ze],ze);0<B.length&&(fe+=te)}for(var re=0;re<B.length;re++){var ye=Fe?V.length:B[re].length,xe=!1,Ve=Fe?Object.keys(B[re]).length===0:B[re].length===0;if(ae&&!Fe&&(xe=ae==="greedy"?B[re].join("").trim()==="":B[re].length===1&&B[re][0].length===0),ae==="greedy"&&Fe){for(var Te=[],Ye=0;Ye<ye;Ye++){var qe=Ee?V[Ye]:Ye;Te.push(B[re][qe])}xe=Te.join("").trim()===""}if(!xe){for(var Oe=0;Oe<ye;Oe++){0<Oe&&!Ve&&(fe+=W);var dt=Fe&&Ee?V[Oe]:Oe;fe+=He(B[re][dt],Oe)}re<B.length-1&&(!ae||0<ye&&!Ve)&&(fe+=te)}}return fe}function He(V,B){if(V==null)return"";if(V.constructor===Date)return JSON.stringify(V).slice(1,25);var ae=!1;De&&typeof V=="string"&&De.test(V)&&(V="'"+V,ae=!0);var fe=V.toString().replace(ne,Re);return(ae=ae||M===!0||typeof M=="function"&&M(V,B)||Array.isArray(M)&&M[B]||function(Fe,Ee){for(var ze=0;ze<Ee.length;ze++)if(-1<Fe.indexOf(Ee[ze]))return!0;return!1}(fe,f.BAD_DELIMITERS)||-1<fe.indexOf(W)||fe.charAt(0)===" "||fe.charAt(fe.length-1)===" ")?oe+fe+oe:fe}}};if(f.RECORD_SEP=String.fromCharCode(30),f.UNIT_SEP=String.fromCharCode(31),f.BYTE_ORDER_MARK="\uFEFF",f.BAD_DELIMITERS=["\r",`
`,'"',f.BYTE_ORDER_MARK],f.WORKERS_SUPPORTED=!r&&!!a.Worker,f.NODE_STREAM_INPUT=1,f.LocalChunkSize=10485760,f.RemoteChunkSize=5242880,f.DefaultDelimiter=",",f.Parser=le,f.ParserHandle=S,f.NetworkStreamer=v,f.FileStreamer=w,f.StringStreamer=D,f.ReadableStreamStreamer=G,a.jQuery){var g=a.jQuery;g.fn.parse=function(b){var m=b.config||{},M=[];return this.each(function(te){if(!(g(this).prop("tagName").toUpperCase()==="INPUT"&&g(this).attr("type").toLowerCase()==="file"&&a.FileReader)||!this.files||this.files.length===0)return!0;for(var oe=0;oe<this.files.length;oe++)M.push({file:this.files[oe],inputElem:this,instanceConfig:g.extend({},m)})}),O(),this;function O(){if(M.length!==0){var te,oe,Re,Ae,J=M[0];if(X(b.before)){var De=b.before(J.file,J.inputElem);if(typeof De=="object"){if(De.action==="abort")return te="AbortError",oe=J.file,Re=J.inputElem,Ae=De.reason,void(X(b.error)&&b.error({name:te},oe,Re,Ae));if(De.action==="skip")return void W();typeof De.config=="object"&&(J.instanceConfig=g.extend(J.instanceConfig,De.config))}else if(De==="skip")return void W()}var ne=J.instanceConfig.complete;J.instanceConfig.complete=function(at){X(ne)&&ne(at,J.file,J.inputElem),W()},f.parse(J.file,J.instanceConfig)}else X(b.complete)&&b.complete()}function W(){M.splice(0,1),O()}}}function p(b){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(m){var M=x(m);M.chunkSize=parseInt(M.chunkSize),m.step||m.chunk||(M.chunkSize=null),this._handle=new S(M),(this._handle.streamer=this)._config=M}.call(this,b),this.parseChunk=function(m,M){if(this.isFirstChunk&&X(this._config.beforeFirstChunk)){var O=this._config.beforeFirstChunk(m);O!==void 0&&(m=O)}this.isFirstChunk=!1,this._halted=!1;var W=this._partialLine+m;this._partialLine="";var te=this._handle.parse(W,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var oe=te.meta.cursor;this._finished||(this._partialLine=W.substring(oe-this._baseIndex),this._baseIndex=oe),te&&te.data&&(this._rowCount+=te.data.length);var Re=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(l)a.postMessage({results:te,workerId:f.WORKER_ID,finished:Re});else if(X(this._config.chunk)&&!M){if(this._config.chunk(te,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);te=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(te.data),this._completeResults.errors=this._completeResults.errors.concat(te.errors),this._completeResults.meta=te.meta),this._completed||!Re||!X(this._config.complete)||te&&te.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),Re||te&&te.meta.paused||this._nextChunk(),te}this._halted=!0},this._sendError=function(m){X(this._config.error)?this._config.error(m):l&&this._config.error&&a.postMessage({workerId:f.WORKER_ID,error:m,finished:!1})}}function v(b){var m;(b=b||{}).chunkSize||(b.chunkSize=f.RemoteChunkSize),p.call(this,b),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(M){this._input=M,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(m=new XMLHttpRequest,this._config.withCredentials&&(m.withCredentials=this._config.withCredentials),r||(m.onload=A(this._chunkLoaded,this),m.onerror=A(this._chunkError,this)),m.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var M=this._config.downloadRequestHeaders;for(var O in M)m.setRequestHeader(O,M[O])}if(this._config.chunkSize){var W=this._start+this._config.chunkSize-1;m.setRequestHeader("Range","bytes="+this._start+"-"+W)}try{m.send(this._config.downloadRequestBody)}catch(te){this._chunkError(te.message)}r&&m.status===0&&this._chunkError()}},this._chunkLoaded=function(){m.readyState===4&&(m.status<200||400<=m.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:m.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(M){var O=M.getResponseHeader("Content-Range");return O===null?-1:parseInt(O.substring(O.lastIndexOf("/")+1))}(m),this.parseChunk(m.responseText)))},this._chunkError=function(M){var O=m.statusText||M;this._sendError(new Error(O))}}function w(b){var m,M;(b=b||{}).chunkSize||(b.chunkSize=f.LocalChunkSize),p.call(this,b);var O=typeof FileReader<"u";this.stream=function(W){this._input=W,M=W.slice||W.webkitSlice||W.mozSlice,O?((m=new FileReader).onload=A(this._chunkLoaded,this),m.onerror=A(this._chunkError,this)):m=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var W=this._input;if(this._config.chunkSize){var te=Math.min(this._start+this._config.chunkSize,this._input.size);W=M.call(W,this._start,te)}var oe=m.readAsText(W,this._config.encoding);O||this._chunkLoaded({target:{result:oe}})},this._chunkLoaded=function(W){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(W.target.result)},this._chunkError=function(){this._sendError(m.error)}}function D(b){var m;p.call(this,b=b||{}),this.stream=function(M){return m=M,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var M,O=this._config.chunkSize;return O?(M=m.substring(0,O),m=m.substring(O)):(M=m,m=""),this._finished=!m,this.parseChunk(M)}}}function G(b){p.call(this,b=b||{});var m=[],M=!0,O=!1;this.pause=function(){p.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){p.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(W){this._input=W,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){O&&m.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),m.length?this.parseChunk(m.shift()):M=!0},this._streamData=A(function(W){try{m.push(typeof W=="string"?W:W.toString(this._config.encoding)),M&&(M=!1,this._checkIsFinished(),this.parseChunk(m.shift()))}catch(te){this._streamError(te)}},this),this._streamError=A(function(W){this._streamCleanUp(),this._sendError(W)},this),this._streamEnd=A(function(){this._streamCleanUp(),O=!0,this._streamData("")},this),this._streamCleanUp=A(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function S(b){var m,M,O,W=Math.pow(2,53),te=-W,oe=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Re=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Ae=this,J=0,De=0,ne=!1,at=!1,He=[],V={data:[],errors:[],meta:{}};if(X(b.step)){var B=b.step;b.step=function(re){if(V=re,Fe())fe();else{if(fe(),V.data.length===0)return;J+=re.data.length,b.preview&&J>b.preview?M.abort():(V.data=V.data[0],B(V,Ae))}}}function ae(re){return b.skipEmptyLines==="greedy"?re.join("").trim()==="":re.length===1&&re[0].length===0}function fe(){return V&&O&&(ze("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+f.DefaultDelimiter+"'"),O=!1),b.skipEmptyLines&&(V.data=V.data.filter(function(re){return!ae(re)})),Fe()&&function(){if(!V)return;function re(xe,Ve){X(b.transformHeader)&&(xe=b.transformHeader(xe,Ve)),He.push(xe)}if(Array.isArray(V.data[0])){for(var ye=0;Fe()&&ye<V.data.length;ye++)V.data[ye].forEach(re);V.data.splice(0,1)}else V.data.forEach(re)}(),function(){if(!V||!b.header&&!b.dynamicTyping&&!b.transform)return V;function re(xe,Ve){var Te,Ye=b.header?{}:[];for(Te=0;Te<xe.length;Te++){var qe=Te,Oe=xe[Te];b.header&&(qe=Te>=He.length?"__parsed_extra":He[Te]),b.transform&&(Oe=b.transform(Oe,qe)),Oe=Ee(qe,Oe),qe==="__parsed_extra"?(Ye[qe]=Ye[qe]||[],Ye[qe].push(Oe)):Ye[qe]=Oe}return b.header&&(Te>He.length?ze("FieldMismatch","TooManyFields","Too many fields: expected "+He.length+" fields but parsed "+Te,De+Ve):Te<He.length&&ze("FieldMismatch","TooFewFields","Too few fields: expected "+He.length+" fields but parsed "+Te,De+Ve)),Ye}var ye=1;return!V.data.length||Array.isArray(V.data[0])?(V.data=V.data.map(re),ye=V.data.length):V.data=re(V.data,0),b.header&&V.meta&&(V.meta.fields=He),De+=ye,V}()}function Fe(){return b.header&&He.length===0}function Ee(re,ye){return xe=re,b.dynamicTypingFunction&&b.dynamicTyping[xe]===void 0&&(b.dynamicTyping[xe]=b.dynamicTypingFunction(xe)),(b.dynamicTyping[xe]||b.dynamicTyping)===!0?ye==="true"||ye==="TRUE"||ye!=="false"&&ye!=="FALSE"&&(function(Ve){if(oe.test(Ve)){var Te=parseFloat(Ve);if(te<Te&&Te<W)return!0}return!1}(ye)?parseFloat(ye):Re.test(ye)?new Date(ye):ye===""?null:ye):ye;var xe}function ze(re,ye,xe,Ve){var Te={type:re,code:ye,message:xe};Ve!==void 0&&(Te.row=Ve),V.errors.push(Te)}this.parse=function(re,ye,xe){var Ve=b.quoteChar||'"';if(b.newline||(b.newline=function(qe,Oe){qe=qe.substring(0,1048576);var dt=new RegExp(ee(Oe)+"([^]*?)"+ee(Oe),"gm"),st=(qe=qe.replace(dt,"")).split("\r"),bt=qe.split(`
`),_t=1<bt.length&&bt[0].length<st[0].length;if(st.length===1||_t)return`
`;for(var it=0,Pe=0;Pe<st.length;Pe++)st[Pe][0]===`
`&&it++;return it>=st.length/2?`\r
`:"\r"}(re,Ve)),O=!1,b.delimiter)X(b.delimiter)&&(b.delimiter=b.delimiter(re),V.meta.delimiter=b.delimiter);else{var Te=function(qe,Oe,dt,st,bt){var _t,it,Pe,je;bt=bt||[",","	","|",";",f.RECORD_SEP,f.UNIT_SEP];for(var St=0;St<bt.length;St++){var Me=bt[St],Tt=0,kt=0,Ft=0;Pe=void 0;for(var yt=new le({comments:st,delimiter:Me,newline:Oe,preview:10}).parse(qe),Ct=0;Ct<yt.data.length;Ct++)if(dt&&ae(yt.data[Ct]))Ft++;else{var Lt=yt.data[Ct].length;kt+=Lt,Pe!==void 0?0<Lt&&(Tt+=Math.abs(Lt-Pe),Pe=Lt):Pe=Lt}0<yt.data.length&&(kt/=yt.data.length-Ft),(it===void 0||Tt<=it)&&(je===void 0||je<kt)&&1.99<kt&&(it=Tt,_t=Me,je=kt)}return{successful:!!(b.delimiter=_t),bestDelimiter:_t}}(re,b.newline,b.skipEmptyLines,b.comments,b.delimitersToGuess);Te.successful?b.delimiter=Te.bestDelimiter:(O=!0,b.delimiter=f.DefaultDelimiter),V.meta.delimiter=b.delimiter}var Ye=x(b);return b.preview&&b.header&&Ye.preview++,m=re,M=new le(Ye),V=M.parse(m,ye,xe),fe(),ne?{meta:{paused:!0}}:V||{meta:{paused:!1}}},this.paused=function(){return ne},this.pause=function(){ne=!0,M.abort(),m=X(b.chunk)?"":m.substring(M.getCharIndex())},this.resume=function(){Ae.streamer._halted?(ne=!1,Ae.streamer.parseChunk(m,!0)):setTimeout(Ae.resume,3)},this.aborted=function(){return at},this.abort=function(){at=!0,M.abort(),V.meta.aborted=!0,X(b.complete)&&b.complete(V),m=""}}function ee(b){return b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function le(b){var m,M=(b=b||{}).delimiter,O=b.newline,W=b.comments,te=b.step,oe=b.preview,Re=b.fastMode,Ae=m=b.quoteChar===void 0||b.quoteChar===null?'"':b.quoteChar;if(b.escapeChar!==void 0&&(Ae=b.escapeChar),(typeof M!="string"||-1<f.BAD_DELIMITERS.indexOf(M))&&(M=","),W===M)throw new Error("Comment character same as delimiter");W===!0?W="#":(typeof W!="string"||-1<f.BAD_DELIMITERS.indexOf(W))&&(W=!1),O!==`
`&&O!=="\r"&&O!==`\r
`&&(O=`
`);var J=0,De=!1;this.parse=function(ne,at,He){if(typeof ne!="string")throw new Error("Input must be a string");var V=ne.length,B=M.length,ae=O.length,fe=W.length,Fe=X(te),Ee=[],ze=[],re=[],ye=J=0;if(!ne)return gt();if(b.header&&!at){var xe=ne.split(O)[0].split(M),Ve=[],Te={},Ye=!1;for(var qe in xe){var Oe=xe[qe];X(b.transformHeader)&&(Oe=b.transformHeader(Oe,qe));var dt=Oe,st=Te[Oe]||0;for(0<st&&(Ye=!0,dt=Oe+"_"+st),Te[Oe]=st+1;Ve.includes(dt);)dt=dt+"_"+st;Ve.push(dt)}if(Ye){var bt=ne.split(O);bt[0]=Ve.join(M),ne=bt.join(O)}}if(Re||Re!==!1&&ne.indexOf(m)===-1){for(var _t=ne.split(O),it=0;it<_t.length;it++){if(re=_t[it],J+=re.length,it!==_t.length-1)J+=O.length;else if(He)return gt();if(!W||re.substring(0,fe)!==W){if(Fe){if(Ee=[],Ft(re.split(M)),Bt(),De)return gt()}else Ft(re.split(M));if(oe&&oe<=it)return Ee=Ee.slice(0,oe),gt(!0)}}return gt()}for(var Pe=ne.indexOf(M,J),je=ne.indexOf(O,J),St=new RegExp(ee(Ae)+ee(m),"g"),Me=ne.indexOf(m,J);;)if(ne[J]!==m)if(W&&re.length===0&&ne.substring(J,J+fe)===W){if(je===-1)return gt();J=je+ae,je=ne.indexOf(O,J),Pe=ne.indexOf(M,J)}else if(Pe!==-1&&(Pe<je||je===-1))re.push(ne.substring(J,Pe)),J=Pe+B,Pe=ne.indexOf(M,J);else{if(je===-1)break;if(re.push(ne.substring(J,je)),Lt(je+ae),Fe&&(Bt(),De))return gt();if(oe&&Ee.length>=oe)return gt(!0)}else for(Me=J,J++;;){if((Me=ne.indexOf(m,Me+1))===-1)return He||ze.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Ee.length,index:J}),Ct();if(Me===V-1)return Ct(ne.substring(J,Me).replace(St,m));if(m!==Ae||ne[Me+1]!==Ae){if(m===Ae||Me===0||ne[Me-1]!==Ae){Pe!==-1&&Pe<Me+1&&(Pe=ne.indexOf(M,Me+1)),je!==-1&&je<Me+1&&(je=ne.indexOf(O,Me+1));var Tt=yt(je===-1?Pe:Math.min(Pe,je));if(ne.substr(Me+1+Tt,B)===M){re.push(ne.substring(J,Me).replace(St,m)),ne[J=Me+1+Tt+B]!==m&&(Me=ne.indexOf(m,J)),Pe=ne.indexOf(M,J),je=ne.indexOf(O,J);break}var kt=yt(je);if(ne.substring(Me+1+kt,Me+1+kt+ae)===O){if(re.push(ne.substring(J,Me).replace(St,m)),Lt(Me+1+kt+ae),Pe=ne.indexOf(M,J),Me=ne.indexOf(m,J),Fe&&(Bt(),De))return gt();if(oe&&Ee.length>=oe)return gt(!0);break}ze.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Ee.length,index:J}),Me++}}else Me++}return Ct();function Ft(ot){Ee.push(ot),ye=J}function yt(ot){var vr=0;if(ot!==-1){var ur=ne.substring(Me+1,ot);ur&&ur.trim()===""&&(vr=ur.length)}return vr}function Ct(ot){return He||(ot===void 0&&(ot=ne.substring(J)),re.push(ot),J=V,Ft(re),Fe&&Bt()),gt()}function Lt(ot){J=ot,Ft(re),re=[],je=ne.indexOf(O,J)}function gt(ot){return{data:Ee,errors:ze,meta:{delimiter:M,linebreak:O,aborted:De,truncated:!!ot,cursor:ye+(at||0)}}}function Bt(){te(gt()),Ee=[],ze=[]}},this.abort=function(){De=!0},this.getCharIndex=function(){return J}}function ie(b){var m=b.data,M=o[m.workerId],O=!1;if(m.error)M.userError(m.error,m.file);else if(m.results&&m.results.data){var W={abort:function(){O=!0,N(m.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:L,resume:L};if(X(M.userStep)){for(var te=0;te<m.results.data.length&&(M.userStep({data:m.results.data[te],errors:m.results.errors,meta:m.results.meta},W),!O);te++);delete m.results}else X(M.userChunk)&&(M.userChunk(m.results,W,m.file),delete m.results)}m.finished&&!O&&N(m.workerId,m.results)}function N(b,m){var M=o[b];X(M.userComplete)&&M.userComplete(m),M.terminate(),delete o[b]}function L(){throw new Error("Not implemented.")}function x(b){if(typeof b!="object"||b===null)return b;var m=Array.isArray(b)?[]:{};for(var M in b)m[M]=x(b[M]);return m}function A(b,m){return function(){b.apply(m,arguments)}}function X(b){return typeof b=="function"}return l&&(a.onmessage=function(b){var m=b.data;if(f.WORKER_ID===void 0&&m&&(f.WORKER_ID=m.workerId),typeof m.input=="string")a.postMessage({workerId:f.WORKER_ID,results:f.parse(m.input,m.config),finished:!0});else if(a.File&&m.input instanceof File||m.input instanceof Object){var M=f.parse(m.input,m.config);M&&a.postMessage({workerId:f.WORKER_ID,results:M,finished:!0})}}),(v.prototype=Object.create(p.prototype)).constructor=v,(w.prototype=Object.create(p.prototype)).constructor=w,(D.prototype=Object.create(D.prototype)).constructor=D,(G.prototype=Object.create(p.prototype)).constructor=G,f})})(us);var wf=us.exports;const $a=fs(wf);var Ze=(i=>(i.LookingGlass="Looking Glass",i.DensityMap="Density Map",i.ValenceMap="Valence Map",i))(Ze||{});function $f(i){i.classList.remove("hidden");const{width:e,height:t}=i.getBoundingClientRect();return i.classList.add("hidden"),{newWidth:e,newHeight:t,imgWidth:i.naturalWidth,imgHeight:i.naturalHeight}}function yf(i,e,t){const a=i.getContext("2d");if(a==null)throw"Could not get context while resizing the canvas.";const r=window.devicePixelRatio||1;i.width=e*r,i.height=t*r,a.scale(r,r)}function ya(i,e,t,a){const r=e.getContext("2d");if(r==null)throw"Could not get context while drawing persona on the canvas.";i.classList.remove("hidden"),r.drawImage(i,0,0,t,a),r.globalCompositeOperation="source-atop",i.classList.add("hidden")}function cs(i,e,t,a){if(i.length<2)return;e.lineJoin="round",e.lineCap="round",t&&(e.strokeStyle=t),a&&(e.lineWidth=a);let r=i[0],l=i[1];e.beginPath(),e.moveTo(l.x,l.y);for(let o=1;o<i.length;o++){const c=Cf(r,l);e.quadraticCurveTo(r.x,r.y,c.x,c.y),r=i[o],l=i[o+1]}r.x+=.1,r.y+=.1,e.lineTo(r.x,r.y),e.stroke()}function Cf(i,e){return{x:i.x+(e.x-i.x)/2,y:i.y+(e.y-i.y)/2}}function Ef(i,e,t){const a=e.getContext("2d",{alpha:!1});if(a==null)throw"Could not get context to draw strokes.";for(const r of i){let l=r.points,o=r.brushSize;t!==void 0&&(l=hs(r.points,t),o*=t),cs(l,a,r.brushColor,o)}}function hs(i,e){return i.map(t=>({x:t.x*e,y:t.y*e}))}function Mf(i){return i.FemaleFront?"Female":"Male"}class If{constructor({id:e,drawing:t}){At(this,"id");At(this,"persona");At(this,"drawing");At(this,"areas");At(this,"totalDrawingArea");At(this,"computed");this.id=e,this.drawing=t,this.persona=Mf(t),this.totalDrawingArea=0,this.areas={},this.computed=!1}computeStrokeAreas(e){var t,a;e??(e=document.createElement("canvas"));for(const r of Object.values(this.drawing)){r.sensationPixelMap||(r.sensationPixelMap={}),r.drawnPoints||(r.drawnPoints=[]);for(const l of r.strokes){e.width=r.imgWidth,e.height=r.imgHeight;const o=e.getContext("2d");if(o==null)throw`Could not get context to draw stroke ${l} of participant ${this.id}.`;o.clearRect(0,0,e.width,e.height),Ef([l],e);const c=o.getImageData(0,0,e.width,e.height).data;let f,g,p,v;for(let w=3,D=c.length;w<D;w+=4)c[w]>0&&(f=l.valence,g=l.intensity,p=Math.floor(w/4)%r.imgWidth,v=Math.floor(w/4/r.imgWidth),(t=r.sensationPixelMap)[p]||(t[p]={}),r.sensationPixelMap[p][v]={valence:f,intensity:g})}for(const l in r.sensationPixelMap)for(const o in r.sensationPixelMap[l]){const c=r.sensationPixelMap[l][o];r.drawnPoints.push({x:parseInt(l),y:parseInt(o),...c});const f=`${c.valence}:${c.intensity}`;(a=this.areas)[f]??(a[f]=0),this.areas[f]++,this.totalDrawingArea++}}this.computed=!0}}class Sf{constructor(){At(this,"participants",{});At(this,"personas",{Female:[],Male:[]});At(this,"drawingsPerSide",{})}addParticipant(e){this.participants[e.id]=e,this.personas[e.persona].push(e),this.classifyDrawing(e.drawing)}classifyDrawing(e){for(const t of Object.keys(e)){const a=t,r=this.drawingsPerSide[a]??[];r.push(e),this.drawingsPerSide[a]=r}}}function Ff(i,{delay:e=0,duration:t=400,easing:a=vf}={}){const r=+getComputedStyle(i).opacity;return{delay:e,duration:t,easing:a,css:l=>`opacity: ${l*r}`}}function Ca(i){let e,t,a;const r=i[8].default,l=ar(r,i,i[7],null);return{c(){e=Z("ul"),l&&l.c(),this.h()},l(o){e=K(o,"UL",{class:!0});var c=j(e);l&&l.l(c),c.forEach(C),this.h()},h(){E(e,"class","absolute top-full left-0 w-48 p-1 bg-neutral-700 shadow")},m(o,c){Q(o,e,c),l&&l.m(e,null),a=!0},p(o,c){l&&l.p&&(!a||c&128)&&sr(l,r,o,o[7],a?ir(r,o[7],c,null):lr(o[7]),null)},i(o){a||(P(l,o),t&&t.end(1),a=!0)},o(o){U(l,o),t=mf(e,Ff,{duration:100}),a=!1},d(o){o&&C(e),l&&l.d(o),o&&t&&t.end()}}}function Lf(i){let e,t,a,r,l,o,c,f=i[0]&&Ca(i);return{c(){e=Z("div"),t=Z("button"),a=Be(i[1]),r=be(),f&&f.c(),this.h()},l(g){e=K(g,"DIV",{class:!0});var p=j(e);t=K(p,"BUTTON",{class:!0});var v=j(t);a=Ue(v,i[1]),v.forEach(C),r=_e(p),f&&f.l(p),p.forEach(C),this.h()},h(){E(t,"class","h-full px-3 text-neutral-100 text-xs"),vt(t,"bg-neutral-700",i[0]),E(e,"class","relative flex items-center h-full")},m(g,p){Q(g,e,p),z(e,t),z(t,a),z(e,r),f&&f.m(e,null),i[9](e),l=!0,o||(c=[wt(window,"click",i[4]),wt(t,"click",i[3])],o=!0)},p(g,[p]){(!l||p&2)&&$t(a,g[1]),(!l||p&1)&&vt(t,"bg-neutral-700",g[0]),g[0]?f?(f.p(g,p),p&1&&P(f,1)):(f=Ca(g),f.c(),P(f,1),f.m(e,null)):f&&(ft(),U(f,1,1,()=>{f=null}),ut())},i(g){l||(P(f),l=!0)},o(g){U(f),l=!1},d(g){g&&C(e),f&&f.d(),i[9](null),o=!1,rn(c)}}}function Af(i,e,t){let{$$slots:a={},$$scope:r}=e,{title:l}=e,{isOpen:o=!1}=e,{enableIcon:c=!1}=e;function f(){t(0,o=!1)}let g;df("menu",{enableIcon:c});function p(){t(0,o=!o)}function v(D){D.target instanceof Node&&g.contains(D.target)===!1&&t(0,o=!1)}function w(D){lt[D?"unshift":"push"](()=>{g=D,t(2,g)})}return i.$$set=D=>{"title"in D&&t(1,l=D.title),"isOpen"in D&&t(0,o=D.isOpen),"enableIcon"in D&&t(5,c=D.enableIcon),"$$scope"in D&&t(7,r=D.$$scope)},[o,l,g,p,v,c,f,r,a,w]}class gs extends rt{constructor(e){super(),nt(this,e,Af,Lf,Ge,{title:1,isOpen:0,enableIcon:5,close:6})}get close(){return this.$$.ctx[6]}}const Tf=i=>({isActive:i&1}),Ea=i=>({isActive:i[0]});function Rf(i){let e,t;const a=i[3].icon,r=ar(a,i,i[2],Ea);return{c(){e=Z("span"),r&&r.c(),this.h()},l(l){e=K(l,"SPAN",{class:!0});var o=j(e);r&&r.l(o),o.forEach(C),this.h()},h(){E(e,"class","w-[16px] mr-1")},m(l,o){Q(l,e,o),r&&r.m(e,null),t=!0},p(l,o){r&&r.p&&(!t||o&5)&&sr(r,a,l,l[2],t?ir(a,l[2],o,Tf):lr(l[2]),Ea)},i(l){t||(P(r,l),t=!0)},o(l){U(r,l),t=!1},d(l){l&&C(e),r&&r.d(l)}}}function Df(i){let e,t,a,r,l,o,c=i[1]&&Rf(i);const f=i[3].default,g=ar(f,i,i[2],null);return{c(){e=Z("li"),t=Z("button"),c&&c.c(),a=be(),g&&g.c(),this.h()},l(p){e=K(p,"LI",{class:!0});var v=j(e);t=K(v,"BUTTON",{class:!0});var w=j(t);c&&c.l(w),a=_e(w),g&&g.l(w),w.forEach(C),v.forEach(C),this.h()},h(){E(t,"class","flex items-center w-full py-1 pr-2 "+(i[1]?"pl-1":"pl-2")+" text-xs text-neutral-100 text-left"),vt(t,"hover:bg-blue-500",!i[0]),E(e,"class","w-full")},m(p,v){Q(p,e,v),z(e,t),c&&c.m(t,null),z(t,a),g&&g.m(t,null),r=!0,l||(o=wt(e,"click",i[4]),l=!0)},p(p,[v]){p[1]&&c.p(p,v),g&&g.p&&(!r||v&4)&&sr(g,f,p,p[2],r?ir(f,p[2],v,null):lr(p[2]),null),(!r||v&1)&&vt(t,"hover:bg-blue-500",!p[0])},i(p){r||(P(c),P(g,p),r=!0)},o(p){U(c),U(g,p),r=!1},d(p){p&&C(e),c&&c.d(),g&&g.d(p),l=!1,o()}}}function Of(i,e,t){let{$$slots:a={},$$scope:r}=e,{isActive:l=!1}=e;const{enableIcon:o}=bf("menu");function c(f){Er.call(this,i,f)}return i.$$set=f=>{"isActive"in f&&t(0,l=f.isActive),"$$scope"in f&&t(2,r=f.$$scope)},[l,o,r,a,c]}class xt extends rt{constructor(e){super(),nt(this,e,Of,Df,Ge,{isActive:0})}}function Pf(i){let e;return{c(){e=Z("hr"),this.h()},l(t){e=K(t,"HR",{class:!0}),this.h()},h(){E(e,"class","my-0.5 border-0 border-b border-neutral-600")},m(t,a){Q(t,e,a)},p:We,i:We,o:We,d(t){t&&C(e)}}}class Nf extends rt{constructor(e){super(),nt(this,e,null,Pf,Ge,{})}}const zf=i=>({}),Ma=i=>({}),xf=i=>({}),Ia=i=>({});function Sa(i){let e,t;const a=i[5].settings,r=ar(a,i,i[4],Ma);return{c(){e=Z("aside"),r&&r.c(),this.h()},l(l){e=K(l,"ASIDE",{class:!0,style:!0});var o=j(e);r&&r.l(o),o.forEach(C),this.h()},h(){E(e,"class","flex flex-col h-full bg-neutral-600 border-l border-neutral-900"),tn(e,"width",i[0])},m(l,o){Q(l,e,o),r&&r.m(e,null),i[7](e),t=!0},p(l,o){r&&r.p&&(!t||o&16)&&sr(r,a,l,l[4],t?ir(a,l[4],o,zf):lr(l[4]),Ma),(!t||o&1)&&tn(e,"width",l[0])},i(l){t||(P(r,l),t=!0)},o(l){U(r,l),t=!1},d(l){l&&C(e),r&&r.d(l),i[7](null)}}}function Bf(i){let e,t,a,r;const l=i[5].panels,o=ar(l,i,i[4],Ia);let c=i[3].settings&&Sa(i);return{c(){e=Z("section"),t=Z("main"),o&&o.c(),a=be(),c&&c.c(),this.h()},l(f){e=K(f,"SECTION",{class:!0});var g=j(e);t=K(g,"MAIN",{class:!0});var p=j(t);o&&o.l(p),p.forEach(C),a=_e(g),c&&c.l(g),g.forEach(C),this.h()},h(){E(t,"class","flex-grow grid grid-cols-1 gap-[2px] bg-neutral-600"),E(e,"class","w-full h-full flex items-stretch")},m(f,g){Q(f,e,g),z(e,t),o&&o.m(t,null),i[6](t),z(e,a),c&&c.m(e,null),r=!0},p(f,[g]){o&&o.p&&(!r||g&16)&&sr(o,l,f,f[4],r?ir(l,f[4],g,xf):lr(f[4]),Ia),f[3].settings?c?(c.p(f,g),g&8&&P(c,1)):(c=Sa(f),c.c(),P(c,1),c.m(e,null)):c&&(ft(),U(c,1,1,()=>{c=null}),ut())},i(f){r||(P(o,f),P(c),r=!0)},o(f){U(o,f),U(c),r=!1},d(f){f&&C(e),o&&o.d(f),i[6](null),c&&c.d()}}}function Uf(i,e,t){let{$$slots:a={},$$scope:r}=e;const l=_f(a);let{sidebarWidth:o="18rem"}=e,c,f;function g(v){lt[v?"unshift":"push"](()=>{c=v,t(1,c)})}function p(v){lt[v?"unshift":"push"](()=>{f=v,t(2,f)})}return i.$$set=v=>{"sidebarWidth"in v&&t(0,o=v.sidebarWidth),"$$scope"in v&&t(4,r=v.$$scope)},[o,c,f,l,r,a,g,p]}class sn extends rt{constructor(e){super(),nt(this,e,Uf,Bf,Ge,{sidebarWidth:0})}}function Fa(i,e,t){const a=i.slice();return a[9]=e[t],a}function La(i){let e=i[1],t,a=Ta(i);return{c(){a.c(),t=Ke()},l(r){a.l(r),t=Ke()},m(r,l){a.m(r,l),Q(r,t,l)},p(r,l){l&2&&Ge(e,e=r[1])?(a.d(1),a=Ta(r),a.c(),a.m(t.parentNode,t)):a.p(r,l)},d(r){r&&C(t),a.d(r)}}}function Aa(i){let e,t=i[9]+"",a,r,l,o;function c(){return i[7](i[9])}return{c(){e=Z("button"),a=Be(t),r=be(),this.h()},l(f){e=K(f,"BUTTON",{class:!0});var g=j(e);a=Ue(g,t),r=_e(g),g.forEach(C),this.h()},h(){E(e,"class","panel-tab svelte-143z4t9"),vt(e,"active",i[1]===i[9]),vt(e,"highlight",i[3])},m(f,g){Q(f,e,g),z(e,a),z(e,r),l||(o=wt(e,"click",c),l=!0)},p(f,g){i=f,g&1&&t!==(t=i[9]+"")&&$t(a,t),g&3&&vt(e,"active",i[1]===i[9]),g&8&&vt(e,"highlight",i[3])},d(f){f&&C(e),l=!1,o()}}}function Ta(i){let e,t=i[0],a=[];for(let r=0;r<t.length;r+=1)a[r]=Aa(Fa(i,t,r));return{c(){for(let r=0;r<a.length;r+=1)a[r].c();e=Ke()},l(r){for(let l=0;l<a.length;l+=1)a[l].l(r);e=Ke()},m(r,l){for(let o=0;o<a.length;o+=1)a[o]&&a[o].m(r,l);Q(r,e,l)},p(r,l){if(l&27){t=r[0];let o;for(o=0;o<t.length;o+=1){const c=Fa(r,t,o);a[o]?a[o].p(c,l):(a[o]=Aa(c),a[o].c(),a[o].m(e.parentNode,e))}for(;o<a.length;o+=1)a[o].d(1);a.length=t.length}},d(r){or(a,r),r&&C(e)}}}function Ra(i){let e,t;return{c(){e=Z("span"),t=Be(i[2]),this.h()},l(a){e=K(a,"SPAN",{class:!0});var r=j(e);t=Ue(r,i[2]),r.forEach(C),this.h()},h(){E(e,"class","z-10 absolute top-4 right-4 py-1 px-2 bg-neutral-900 shadow bg-opacity-50 text-neutral-100 text-xs")},m(a,r){Q(a,e,r),z(e,t)},p(a,r){r&4&&$t(t,a[2])},d(a){a&&C(e)}}}function Wf(i){let e,t,a,r,l,o,c=i[0]!==void 0&&La(i),f=i[2]&&Ra(i);const g=i[6].default,p=ar(g,i,i[5],null);return{c(){e=Z("div"),t=Z("div"),c&&c.c(),a=be(),r=Z("div"),f&&f.c(),l=be(),p&&p.c(),this.h()},l(v){e=K(v,"DIV",{class:!0});var w=j(e);t=K(w,"DIV",{class:!0});var D=j(t);c&&c.l(D),D.forEach(C),a=_e(w),r=K(w,"DIV",{class:!0});var G=j(r);f&&f.l(G),l=_e(G),p&&p.l(G),G.forEach(C),w.forEach(C),this.h()},h(){E(t,"class","panel-tabs w-full h-5 svelte-143z4t9"),E(r,"class","panel relative flex-grow w-full h-full"),E(e,"class","panel-container svelte-143z4t9")},m(v,w){Q(v,e,w),z(e,t),c&&c.m(t,null),z(e,a),z(e,r),f&&f.m(r,null),z(r,l),p&&p.m(r,null),o=!0},p(v,[w]){v[0]!==void 0?c?c.p(v,w):(c=La(v),c.c(),c.m(t,null)):c&&(c.d(1),c=null),v[2]?f?f.p(v,w):(f=Ra(v),f.c(),f.m(r,l)):f&&(f.d(1),f=null),p&&p.p&&(!o||w&32)&&sr(p,g,v,v[5],o?ir(g,v[5],w,null):lr(v[5]),null)},i(v){o||(P(p,v),o=!0)},o(v){U(p,v),o=!1},d(v){v&&C(e),c&&c.d(),f&&f.d(),p&&p.d(v)}}}function qf(i,e,t){let{$$slots:a={},$$scope:r}=e,{tabs:l=void 0}=e,{activeTab:o=void 0}=e,{caption:c=void 0}=e,{highlightTab:f=!0}=e;const g=pr();function p(w){g("tabClick",w)}const v=w=>p(w);return i.$$set=w=>{"tabs"in w&&t(0,l=w.tabs),"activeTab"in w&&t(1,o=w.activeTab),"caption"in w&&t(2,c=w.caption),"highlightTab"in w&&t(3,f=w.highlightTab),"$$scope"in w&&t(5,r=w.$$scope)},[l,o,c,f,p,r,a,v]}class fr extends rt{constructor(e){super(),nt(this,e,qf,Wf,Ge,{tabs:0,activeTab:1,caption:2,highlightTab:3})}}function Da(i,e,t){const a=i.slice();return a[5]=e[t],a}function Oa(i){let e,t=i[5]+"",a,r,l;return{c(){e=Z("option"),a=Be(t),this.h()},l(o){e=K(o,"OPTION",{});var c=j(e);a=Ue(c,t),c.forEach(C),this.h()},h(){e.__value=r=i[5],e.value=e.__value,e.selected=l=i[2]===i[5]},m(o,c){Q(o,e,c),z(e,a)},p(o,c){c&2&&t!==(t=o[5]+"")&&$t(a,t),c&2&&r!==(r=o[5])&&(e.__value=r,e.value=e.__value),c&6&&l!==(l=o[2]===o[5])&&(e.selected=l)},d(o){o&&C(e)}}}function jf(i){let e,t,a,r,l,o,c,f=i[1],g=[];for(let p=0;p<f.length;p+=1)g[p]=Oa(Da(i,f,p));return{c(){e=Z("label"),t=Be(i[0]),a=Be(":"),r=be(),l=Z("select");for(let p=0;p<g.length;p+=1)g[p].c();this.h()},l(p){e=K(p,"LABEL",{class:!0});var v=j(e);t=Ue(v,i[0]),a=Ue(v,":"),v.forEach(C),r=_e(p),l=K(p,"SELECT",{name:!0,id:!0,class:!0});var w=j(l);for(let D=0;D<g.length;D+=1)g[D].l(w);w.forEach(C),this.h()},h(){E(e,"class","w-1/3 pr-2 text-xs text-neutral-400 text-right"),E(l,"name",i[0]),E(l,"id",i[0]),E(l,"class","emboss py-1 px-2 bg-neutral-700 border border-neutral-800 text-xs text-neutral-200")},m(p,v){Q(p,e,v),z(e,t),z(e,a),Q(p,r,v),Q(p,l,v);for(let w=0;w<g.length;w+=1)g[w]&&g[w].m(l,null);o||(c=wt(l,"change",i[3]),o=!0)},p(p,[v]){if(v&1&&$t(t,p[0]),v&6){f=p[1];let w;for(w=0;w<f.length;w+=1){const D=Da(p,f,w);g[w]?g[w].p(D,v):(g[w]=Oa(D),g[w].c(),g[w].m(l,null))}for(;w<g.length;w+=1)g[w].d(1);g.length=f.length}v&1&&E(l,"name",p[0]),v&1&&E(l,"id",p[0])},i:We,o:We,d(p){p&&C(e),p&&C(r),p&&C(l),or(g,p),o=!1,c()}}}function Gf(i,e,t){let{name:a}=e,{options:r}=e,{selected:l=void 0}=e;const o=pr();function c(f){if(f.target){const g=f.target;o("change",g.value)}}return i.$$set=f=>{"name"in f&&t(0,a=f.name),"options"in f&&t(1,r=f.options),"selected"in f&&t(2,l=f.selected)},[a,r,l,c]}class Hf extends rt{constructor(e){super(),nt(this,e,Gf,jf,Ge,{name:0,options:1,selected:2})}}function Vf(i){let e;return{c(){e=Z("td"),this.h()},l(t){e=K(t,"TD",{class:!0});var a=j(e);a.forEach(C),this.h()},h(){E(e,"class","py-1 px-2 border-l border-neutral-800 text-neutral-100 text-xs")},m(t,a){Q(t,e,a),e.innerHTML=i[0]},p(t,[a]){a&1&&(e.innerHTML=t[0])},i:We,o:We,d(t){t&&C(e)}}}function Yf(i,e,t){let{value:a}=e,{formatter:r=void 0}=e,l;if(r)l=r(a);else if(typeof a=="string")l=a;else if(a.toString)l=a.toString();else throw"Error: Cannot format value.";return i.$$set=o=>{"value"in o&&t(1,a=o.value),"formatter"in o&&t(2,r=o.formatter)},[l,a,r]}class Qf extends rt{constructor(e){super(),nt(this,e,Yf,Vf,Ge,{value:1,formatter:2})}}function Pa(i,e,t){const a=i.slice();return a[3]=e[t],a}function Na(i){let e,t;const a=[i[3]];let r={};for(let l=0;l<a.length;l+=1)r=Gt(r,a[l]);return e=new Qf({props:r}),{c(){he(e.$$.fragment)},l(l){ge(e.$$.fragment,l)},m(l,o){pe(e,l,o),t=!0},p(l,o){const c=o&1?nn(a,[an(l[3])]):{};e.$set(c)},i(l){t||(P(e.$$.fragment,l),t=!0)},o(l){U(e.$$.fragment,l),t=!1},d(l){ve(e,l)}}}function Xf(i){let e,t,a,r,l=i[0],o=[];for(let f=0;f<l.length;f+=1)o[f]=Na(Pa(i,l,f));const c=f=>U(o[f],1,1,()=>{o[f]=null});return{c(){e=Z("tr");for(let f=0;f<o.length;f+=1)o[f].c();this.h()},l(f){e=K(f,"TR",{class:!0});var g=j(e);for(let p=0;p<o.length;p+=1)o[p].l(g);g.forEach(C),this.h()},h(){E(e,"class","hover:bg-neutral-600 border-b last:border-b-0 border-neutral-800")},m(f,g){Q(f,e,g);for(let p=0;p<o.length;p+=1)o[p]&&o[p].m(e,null);t=!0,a||(r=[wt(e,"mouseenter",i[1]),wt(e,"mouseleave",i[2])],a=!0)},p(f,[g]){if(g&1){l=f[0];let p;for(p=0;p<l.length;p+=1){const v=Pa(f,l,p);o[p]?(o[p].p(v,g),P(o[p],1)):(o[p]=Na(v),o[p].c(),P(o[p],1),o[p].m(e,null))}for(ft(),p=l.length;p<o.length;p+=1)c(p);ut()}},i(f){if(!t){for(let g=0;g<l.length;g+=1)P(o[g]);t=!0}},o(f){o=o.filter(Boolean);for(let g=0;g<o.length;g+=1)U(o[g]);t=!1},d(f){f&&C(e),or(o,f),a=!1,rn(r)}}}function Jf(i,e,t){let{cells:a}=e;function r(o){Er.call(this,i,o)}function l(o){Er.call(this,i,o)}return i.$$set=o=>{"cells"in o&&t(0,a=o.cells)},[a,r,l]}class Zf extends rt{constructor(e){super(),nt(this,e,Jf,Xf,Ge,{cells:0})}}function za(i,e,t){const a=i.slice();return a[10]=e[t],a[12]=t,a}function xa(i,e,t){const a=i.slice();return a[13]=e[t],a}function Ba(i){let e,t,a=i[1],r=[];for(let l=0;l<a.length;l+=1)r[l]=Ua(xa(i,a,l));return{c(){e=Z("thead"),t=Z("tr");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=K(l,"THEAD",{});var o=j(e);t=K(o,"TR",{class:!0});var c=j(t);for(let f=0;f<r.length;f+=1)r[f].l(c);c.forEach(C),o.forEach(C),this.h()},h(){E(t,"class","sticky top-0 bg-gradient-to-t from-neutral-600 to-neutral-500 border-b border-neutral-800")},m(l,o){Q(l,e,o),z(e,t);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(t,null)},p(l,o){if(o&2){a=l[1];let c;for(c=0;c<a.length;c+=1){const f=xa(l,a,c);r[c]?r[c].p(f,o):(r[c]=Ua(f),r[c].c(),r[c].m(t,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=a.length}},d(l){l&&C(e),or(r,l)}}}function Ua(i){let e,t=i[13]+"",a;return{c(){e=Z("th"),a=Be(t),this.h()},l(r){e=K(r,"TH",{class:!0});var l=j(e);a=Ue(l,t),l.forEach(C),this.h()},h(){E(e,"class","px-2 border-l border-neutral-800 text-neutral-300 text-[0.6875rem] font-medium lowercase small-caps svelte-2meyxc")},m(r,l){Q(r,e,l),z(e,a)},p(r,l){l&2&&t!==(t=r[13]+"")&&$t(a,t)},d(r){r&&C(e)}}}function Wa(i){let e,t;const a=[i[10]];function r(){return i[7](i[12])}function l(){return i[8](i[12])}let o={};for(let c=0;c<a.length;c+=1)o=Gt(o,a[c]);return e=new Zf({props:o}),e.$on("mouseenter",r),e.$on("mouseleave",l),{c(){he(e.$$.fragment)},l(c){ge(e.$$.fragment,c)},m(c,f){pe(e,c,f),t=!0},p(c,f){i=c;const g=f&4?nn(a,[an(i[10])]):{};e.$set(g)},i(c){t||(P(e.$$.fragment,c),t=!0)},o(c){U(e.$$.fragment,c),t=!1},d(c){ve(e,c)}}}function qa(i){let e,t,a=i[2],r=[];for(let o=0;o<a.length;o+=1)r[o]=Wa(za(i,a,o));const l=o=>U(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=Ke()},l(o){for(let c=0;c<r.length;c+=1)r[c].l(o);e=Ke()},m(o,c){for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(o,c);Q(o,e,c),t=!0},p(o,c){if(c&52){a=o[2];let f;for(f=0;f<a.length;f+=1){const g=za(o,a,f);r[f]?(r[f].p(g,c),P(r[f],1)):(r[f]=Wa(g),r[f].c(),P(r[f],1),r[f].m(e.parentNode,e))}for(ft(),f=a.length;f<r.length;f+=1)l(f);ut()}},i(o){if(!t){for(let c=0;c<a.length;c+=1)P(r[c]);t=!0}},o(o){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)U(r[c]);t=!1},d(o){or(r,o),o&&C(e)}}}function Kf(i){let e,t,a,r,l,o,c=i[2],f,g,p=i[3]&&Ba(i),v=qa(i);return{c(){e=Z("label"),t=Be(i[0]),a=be(),r=Z("table"),p&&p.c(),l=be(),o=Z("tbody"),v.c(),this.h()},l(w){e=K(w,"LABEL",{class:!0});var D=j(e);t=Ue(D,i[0]),D.forEach(C),a=_e(w),r=K(w,"TABLE",{class:!0});var G=j(r);p&&p.l(G),l=_e(G),o=K(G,"TBODY",{});var S=j(o);v.l(S),S.forEach(C),G.forEach(C),this.h()},h(){E(e,"class","w-1/3 pr-2 text-xs text-neutral-400 text-right"),E(r,"class",f=i[6].class+" table-shadow w-fit my-1 bg-neutral-700 border border-neutral-800 svelte-2meyxc")},m(w,D){Q(w,e,D),z(e,t),Q(w,a,D),Q(w,r,D),p&&p.m(r,null),z(r,l),z(r,o),v.m(o,null),g=!0},p(w,[D]){(!g||D&1)&&$t(t,w[0]),w[3]?p?p.p(w,D):(p=Ba(w),p.c(),p.m(r,l)):p&&(p.d(1),p=null),D&4&&Ge(c,c=w[2])?(ft(),U(v,1,1,We),ut(),v=qa(w),v.c(),P(v,1),v.m(o,null)):v.p(w,D),(!g||D&64&&f!==(f=w[6].class+" table-shadow w-fit my-1 bg-neutral-700 border border-neutral-800 svelte-2meyxc"))&&E(r,"class",f)},i(w){g||(P(v),g=!0)},o(w){U(v),g=!1},d(w){w&&C(e),w&&C(a),w&&C(r),p&&p.d(),v.d(w)}}}function eu(i,e,t){let{name:a}=e,{columns:r}=e,{rows:l}=e,{showColumns:o=!0}=e;const c=pr();function f(w){c("rowHover",w)}function g(w){c("rowLeave",w)}const p=w=>f(w),v=w=>g(w);return i.$$set=w=>{t(6,e=Gt(Gt({},e),Mr(w))),"name"in w&&t(0,a=w.name),"columns"in w&&t(1,r=w.columns),"rows"in w&&t(2,l=w.rows),"showColumns"in w&&t(3,o=w.showColumns)},e=Mr(e),[a,r,l,o,f,g,e,p,v]}class tu extends rt{constructor(e){super(),nt(this,e,eu,Kf,Ge,{name:0,columns:1,rows:2,showColumns:3})}}function ru(i){let e,t,a,r,l,o;return{c(){e=Z("label"),t=Be(i[0]),a=Be(":"),r=be(),l=Z("span"),o=Be(i[1]),this.h()},l(c){e=K(c,"LABEL",{class:!0});var f=j(e);t=Ue(f,i[0]),a=Ue(f,":"),f.forEach(C),r=_e(c),l=K(c,"SPAN",{class:!0});var g=j(l);o=Ue(g,i[1]),g.forEach(C),this.h()},h(){E(e,"class","text-xs text-neutral-400 text-right"),E(l,"class","text-xs text-neutral-200")},m(c,f){Q(c,e,f),z(e,t),z(e,a),Q(c,r,f),Q(c,l,f),z(l,o)},p(c,[f]){f&1&&$t(t,c[0]),f&2&&$t(o,c[1])},i:We,o:We,d(c){c&&C(e),c&&C(r),c&&C(l)}}}function nu(i,e,t){let{name:a}=e,{label:r}=e;return i.$$set=l=>{"name"in l&&t(0,a=l.name),"label"in l&&t(1,r=l.label)},[a,r]}class jt extends rt{constructor(e){super(),nt(this,e,nu,ru,Ge,{name:0,label:1})}}const au=""+new URL("../assets/female_front.cbbf7559.svg",import.meta.url).href,su=""+new URL("../assets/female_back.f4b0cc86.svg",import.meta.url).href,lu=""+new URL("../assets/male_front.dc1ca7a4.svg",import.meta.url).href,iu=""+new URL("../assets/male_back.27c5d660.svg",import.meta.url).href,ou={FemaleFront:au,FemaleBack:su,MaleFront:lu,MaleBack:iu};function ja(i){let e,t,a,r,l,o;return{c(){e=Z("div"),t=ct("svg"),a=ct("circle"),r=ct("path"),l=be(),o=Be(i[0]),this.h()},l(c){e=K(c,"DIV",{class:!0});var f=j(e);t=ht(f,"svg",{class:!0,xmlns:!0,fill:!0,viewBox:!0});var g=j(t);a=ht(g,"circle",{class:!0,cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),j(a).forEach(C),r=ht(g,"path",{class:!0,fill:!0,d:!0}),j(r).forEach(C),g.forEach(C),l=_e(f),o=Ue(f,i[0]),f.forEach(C),this.h()},h(){E(a,"class","opacity-25"),E(a,"cx","12"),E(a,"cy","12"),E(a,"r","10"),E(a,"stroke","currentColor"),E(a,"stroke-width","4"),E(r,"class","opacity-75"),E(r,"fill","currentColor"),E(r,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),E(t,"class","animate-spin mr-1 h-4 w-4 text-white"),E(t,"xmlns","http://www.w3.org/2000/svg"),E(t,"fill","none"),E(t,"viewBox","0 0 24 24"),E(e,"class","z-20 absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 flex items-center py-1.5 px-2 bg-neutral-900 bg-opacity-75 text-white text-xs font-medium")},m(c,f){Q(c,e,f),z(e,t),z(t,a),z(t,r),z(e,l),z(e,o)},p(c,f){f&1&&$t(o,c[0])},d(c){c&&C(e)}}}function fu(i){let e,t,a,r,l,o,c,f,g,p=i[0]&&ja(i);return{c(){e=Z("div"),t=Z("img"),r=be(),l=Z("canvas"),o=be(),p&&p.c(),this.h()},l(v){e=K(v,"DIV",{class:!0});var w=j(e);t=K(w,"IMG",{src:!0,class:!0}),r=_e(w),l=K(w,"CANVAS",{class:!0}),j(l).forEach(C),o=_e(w),p&&p.l(w),w.forEach(C),this.h()},h(){kf(t.src,a=i[4])||E(t,"src",a),E(t,"class","absolute left-1/2 -translate-x-1/2 h-full object-contain"),E(l,"class","z-10 absolute left-1/2 -translate-x-1/2 h-full"),E(e,"class",c=(i[6].class??"")+" relative w-full h-full bg-white")},m(v,w){Q(v,e,w),z(e,t),i[15](t),z(e,r),z(e,l),i[16](l),z(e,o),p&&p.m(e,null),i[17](e),f||(g=wt(t,"load",i[5]),f=!0)},p(v,[w]){v[0]?p?p.p(v,w):(p=ja(v),p.c(),p.m(e,null)):p&&(p.d(1),p=null),w&64&&c!==(c=(v[6].class??"")+" relative w-full h-full bg-white")&&E(e,"class",c)},i:We,o:We,d(v){v&&C(e),i[15](null),i[16](null),p&&p.d(),i[17](null),f=!1,g()}}}function uu(i,e,t){let{personaSide:a}=e;function r(){return G.toDataURL("image/png")}function l(){return G}function o(){return le}function c(b){t(0,w=b)}function f(){t(0,w=void 0)}function g(){ya(ie,G,S,ee)}function p(b){const m=G.getContext("2d");if(m==null)throw"Could not get context to draw strokes.";for(let M of b){let O=M.points,W=M.brushSize;if(le!==void 0)O=hs(M.points,le),W*=le;else{const te="Could not draw strokes because the scale factor is unknown.";throw alert(te),te}cs(O,m,M.brushColor,W)}}const v=pr();let w="Loading persona...",D=ou[a],G,S=0,ee=0,le=1,ie,N;function L(){const{imgWidth:b,imgHeight:m}=$f(ie);S=Math.ceil(b),ee=Math.ceil(m),le=S/ie.naturalWidth,yf(G,S,ee),ya(ie,G,S,ee),f(),v("ready",{personaSide:a,canvas:G,width:S,height:ee,imgWidth:b,imgHeight:m,scaleFactor:le})}function x(b){lt[b?"unshift":"push"](()=>{ie=b,t(2,ie)})}function A(b){lt[b?"unshift":"push"](()=>{G=b,t(1,G)})}function X(b){lt[b?"unshift":"push"](()=>{N=b,t(3,N)})}return i.$$set=b=>{t(6,e=Gt(Gt({},e),Mr(b))),"personaSide"in b&&t(7,a=b.personaSide)},e=Mr(e),[w,G,ie,N,D,L,e,a,r,l,o,c,f,g,p,x,A,X]}class nr extends rt{constructor(e){super(),nt(this,e,uu,fu,Ge,{personaSide:7,getImage:8,getCanvas:9,getScaleFactor:10,setMessage:11,clearMessage:12,clear:13,drawStrokes:14})}get getImage(){return this.$$.ctx[8]}get getCanvas(){return this.$$.ctx[9]}get getScaleFactor(){return this.$$.ctx[10]}get setMessage(){return this.$$.ctx[11]}get clearMessage(){return this.$$.ctx[12]}get clear(){return this.$$.ctx[13]}get drawStrokes(){return this.$$.ctx[14]}}function Ga(i,e,t){const a=i.slice();return a[17]=e[t],a}function Ha(i){let e=i[1],t,a,r=Ya(i);return{c(){r.c(),t=Ke()},l(l){r.l(l),t=Ke()},m(l,o){r.m(l,o),Q(l,t,o),a=!0},p(l,o){o&2&&Ge(e,e=l[1])?(ft(),U(r,1,1,We),ut(),r=Ya(l),r.c(),P(r,1),r.m(t.parentNode,t)):r.p(l,o)},i(l){a||(P(r),a=!0)},o(l){U(r),a=!1},d(l){l&&C(t),r.d(l)}}}function cu(i){let e,t,a={personaSide:i[17]};return e=new nr({props:a}),i[12](e),e.$on("ready",i[8]),{c(){he(e.$$.fragment)},l(r){ge(e.$$.fragment,r)},m(r,l){pe(e,r,l),t=!0},p(r,l){const o={};l&4&&(o.personaSide=r[17]),e.$set(o)},i(r){t||(P(e.$$.fragment,r),t=!0)},o(r){U(e.$$.fragment,r),t=!1},d(r){i[12](null),ve(e,r)}}}function hu(i){let e,t,a={personaSide:i[17]};return e=new nr({props:a}),i[11](e),e.$on("ready",i[8]),{c(){he(e.$$.fragment)},l(r){ge(e.$$.fragment,r)},m(r,l){pe(e,r,l),t=!0},p(r,l){const o={};l&4&&(o.personaSide=r[17]),e.$set(o)},i(r){t||(P(e.$$.fragment,r),t=!0)},o(r){U(e.$$.fragment,r),t=!1},d(r){i[11](null),ve(e,r)}}}function Va(i){let e,t,a,r,l;const o=[hu,cu],c=[];function f(g,p){return p&4&&(e=null),e==null&&(e=!!g[17].includes("Front")),e?0:1}return t=f(i,-1),a=c[t]=o[t](i),{c(){a.c(),r=Ke()},l(g){a.l(g),r=Ke()},m(g,p){c[t].m(g,p),Q(g,r,p),l=!0},p(g,p){let v=t;t=f(g,p),t===v?c[t].p(g,p):(ft(),U(c[v],1,1,()=>{c[v]=null}),ut(),a=c[t],a?a.p(g,p):(a=c[t]=o[t](g),a.c()),P(a,1),a.m(r.parentNode,r))},i(g){l||(P(a),l=!0)},o(g){U(a),l=!1},d(g){c[t].d(g),g&&C(r)}}}function gu(i){let e,t,a=i[2],r=[];for(let o=0;o<a.length;o+=1)r[o]=Va(Ga(i,a,o));const l=o=>U(r[o],1,1,()=>{r[o]=null});return{c(){e=Z("div");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=K(o,"DIV",{class:!0});var c=j(e);for(let f=0;f<r.length;f+=1)r[f].l(c);c.forEach(C),this.h()},h(){E(e,"class","flex w-full h-full")},m(o,c){Q(o,e,c);for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(e,null);t=!0},p(o,c){if(c&452){a=o[2];let f;for(f=0;f<a.length;f+=1){const g=Ga(o,a,f);r[f]?(r[f].p(g,c),P(r[f],1)):(r[f]=Va(g),r[f].c(),P(r[f],1),r[f].m(e,null))}for(ft(),f=a.length;f<r.length;f+=1)l(f);ut()}},i(o){if(!t){for(let c=0;c<a.length;c+=1)P(r[c]);t=!0}},o(o){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)U(r[c]);t=!1},d(o){o&&C(e),or(r,o)}}}function pu(i){let e,t;return e=new fr({props:{caption:"Looking Glass",$$slots:{default:[gu]},$$scope:{ctx:i}}}),{c(){he(e.$$.fragment)},l(a){ge(e.$$.fragment,a)},m(a,r){pe(e,a,r),t=!0},p(a,r){const l={};r&1048772&&(l.$$scope={dirty:r,ctx:a}),e.$set(l)},i(a){t||(P(e.$$.fragment,a),t=!0)},o(a){U(e.$$.fragment,a),t=!1},d(a){ve(e,a)}}}function vu(i){let e,t,a,r,l,o,c,f,g,p,v,w,D,G,S,ee;a=new Hf({props:{name:"Participant",options:Object.keys(i[0].participants),selected:i[1].id}}),a.$on("change",i[9]),o=new jt({props:{name:"Drawing area",label:`${i[1].totalDrawingArea} pixels`}}),g=new jt({props:{name:"Avg valence",label:i[3].toString()}}),w=new jt({props:{name:"Avg intensity",label:i[4].toString()}});const le=[{class:"block h-64 overflow-auto"},i[5]];let ie={};for(let N=0;N<le.length;N+=1)ie=Gt(ie,le[N]);return S=new tu({props:ie}),{c(){e=Z("ul"),t=Z("li"),he(a.$$.fragment),r=be(),l=Z("li"),he(o.$$.fragment),c=be(),f=Z("li"),he(g.$$.fragment),p=be(),v=Z("li"),he(w.$$.fragment),D=be(),G=Z("li"),he(S.$$.fragment),this.h()},l(N){e=K(N,"UL",{class:!0});var L=j(e);t=K(L,"LI",{});var x=j(t);ge(a.$$.fragment,x),x.forEach(C),r=_e(L),l=K(L,"LI",{});var A=j(l);ge(o.$$.fragment,A),A.forEach(C),c=_e(L),f=K(L,"LI",{});var X=j(f);ge(g.$$.fragment,X),X.forEach(C),p=_e(L),v=K(L,"LI",{});var b=j(v);ge(w.$$.fragment,b),b.forEach(C),D=_e(L),G=K(L,"LI",{});var m=j(G);ge(S.$$.fragment,m),m.forEach(C),L.forEach(C),this.h()},h(){E(e,"class","p-2")},m(N,L){Q(N,e,L),z(e,t),pe(a,t,null),z(e,r),z(e,l),pe(o,l,null),z(e,c),z(e,f),pe(g,f,null),z(e,p),z(e,v),pe(w,v,null),z(e,D),z(e,G),pe(S,G,null),ee=!0},p(N,L){const x={};L&1&&(x.options=Object.keys(N[0].participants)),L&2&&(x.selected=N[1].id),a.$set(x);const A={};L&2&&(A.label=`${N[1].totalDrawingArea} pixels`),o.$set(A);const X={};L&8&&(X.label=N[3].toString()),g.$set(X);const b={};L&16&&(b.label=N[4].toString()),w.$set(b);const m=L&32?nn(le,[le[0],an(N[5])]):{};S.$set(m)},i(N){ee||(P(a.$$.fragment,N),P(o.$$.fragment,N),P(g.$$.fragment,N),P(w.$$.fragment,N),P(S.$$.fragment,N),ee=!0)},o(N){U(a.$$.fragment,N),U(o.$$.fragment,N),U(g.$$.fragment,N),U(w.$$.fragment,N),U(S.$$.fragment,N),ee=!1},d(N){N&&C(e),ve(a),ve(o),ve(g),ve(w),ve(S)}}}function du(i){let e,t;return e=new fr({props:{tabs:["Details"],highlightTab:!1,$$slots:{default:[vu]},$$scope:{ctx:i}}}),{c(){he(e.$$.fragment)},l(a){ge(e.$$.fragment,a)},m(a,r){pe(e,a,r),t=!0},p(a,r){const l={};r&1048635&&(l.$$scope={dirty:r,ctx:a}),e.$set(l)},i(a){t||(P(e.$$.fragment,a),t=!0)},o(a){U(e.$$.fragment,a),t=!1},d(a){ve(e,a)}}}function Ya(i){let e,t;return e=new sn({props:{$$slots:{settings:[du],panels:[pu]},$$scope:{ctx:i}}}),{c(){he(e.$$.fragment)},l(a){ge(e.$$.fragment,a)},m(a,r){pe(e,a,r),t=!0},p(a,r){const l={};r&1048831&&(l.$$scope={dirty:r,ctx:a}),e.$set(l)},i(a){t||(P(e.$$.fragment,a),t=!0)},o(a){U(e.$$.fragment,a),t=!1},d(a){ve(e,a)}}}function mu(i){let e,t,a=i[1]&&Ha(i);return{c(){a&&a.c(),e=Ke()},l(r){a&&a.l(r),e=Ke()},m(r,l){a&&a.m(r,l),Q(r,e,l),t=!0},p(r,[l]){r[1]?a?(a.p(r,l),l&2&&P(a,1)):(a=Ha(r),a.c(),P(a,1),a.m(e.parentNode,e)):a&&(ft(),U(a,1,1,()=>{a=null}),ut())},i(r){t||(P(a),t=!0)},o(r){U(a),t=!1},d(r){a&&a.d(r),r&&C(e)}}}function Qa(i){const e={name:"Areas table",columns:["Valence","Intensity","Size"],rows:[]};for(const t in i.areas){const[a,r]=t.split(":");e.rows.push({cells:[{value:a},{value:r},{value:i.areas[t]}]})}return e}function Xa(i,e){const t={};for(const o in i.areas){const[c,f]=o.split(":"),g=i.areas[o];e==="valence"?(t[c]??(t[c]=0),t[c]+=g):(t[f]??(t[f]=0),t[f]+=g)}let a=0;for(let o in t){const c=parseInt(o);a+=c*t[o]}const r=a/i.totalDrawingArea;return Math.round(r*100)/100}function Ja(i,e){const t=i.drawing[e];if(t===void 0)throw`Could not get ${e} drawing of participant ${i.id}.`;return t.strokes}function bu(i,e,t){let{survey:a}=e,r,l,o,c,f={name:"Areas",columns:[],rows:[]},g,p,v;function w(){const N=`Participant${r.id+1}-${r.persona}`;return[{name:`LookingGlass-${N}Front.png`,dataUrl:g.getImage()},{name:`LookingGlass-${N}Back.png`,dataUrl:p.getImage()}]}function D(N){const{personaSide:L}=N.detail,x=Ja(r,L);let A;L.includes("Front")?A=g:A=p,A.drawStrokes(x)}function G(N){const L=a.participants[N],x=Object.keys(L.drawing);if(L.computed===!1){const X=document.createElement("canvas").transferControlToOffscreen(),b=[{id:L.id,drawing:L.drawing}];v==null||v.postMessage({command:"get-areas",params:{data:b,canvas:X}},[X])}t(1,r=L),t(2,l=x),t(3,o=0),t(4,c=0),t(5,f=Qa(r))}function S({detail:N}){G(N)}async function ee(){const N=await ls(()=>import("../chunks/export.worker.48328b62.js"),[],import.meta.url);v=new N.default,v.onmessage=L=>{if(L.data.event==="areas-done"){const x=L.data.params;t(1,r.areas=x[0].areas,r),t(1,r.totalDrawingArea=x[0].totalDrawingArea,r);let A=[];l.forEach(m=>{A=A.concat(Ja(r,m))});const X=Xa(r,"valence"),b=Xa(r,"intensity");t(3,o=X),t(4,c=b),t(5,f=Qa(r))}}}Ir(async()=>{await ee(),G(Object.keys(a.participants)[0])});function le(N){lt[N?"unshift":"push"](()=>{g=N,t(6,g)})}function ie(N){lt[N?"unshift":"push"](()=>{p=N,t(7,p)})}return i.$$set=N=>{"survey"in N&&t(0,a=N.survey)},[a,r,l,o,c,f,g,p,D,S,w,le,ie]}class _u extends rt{constructor(e){super(),nt(this,e,bu,mu,Ge,{survey:0,getImages:10})}get survey(){return this.$$.ctx[0]}set survey(e){this.$$set({survey:e}),is()}get getImages(){return this.$$.ctx[10]}}var ps={exports:{}};/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */(function(i,e){(function(t,a){i.exports=a()})(os,function(){for(var t=function(n,s,u){return s===void 0&&(s=0),u===void 0&&(u=1),n<s?s:n>u?u:n},a=t,r=function(n){n._clipped=!1,n._unclipped=n.slice(0);for(var s=0;s<=3;s++)s<3?((n[s]<0||n[s]>255)&&(n._clipped=!0),n[s]=a(n[s],0,255)):s===3&&(n[s]=a(n[s],0,1));return n},l={},o=0,c=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];o<c.length;o+=1){var f=c[o];l["[object "+f+"]"]=f.toLowerCase()}var g=function(n){return l[Object.prototype.toString.call(n)]||"object"},p=g,v=function(n,s){return s===void 0&&(s=null),n.length>=3?Array.prototype.slice.call(n):p(n[0])=="object"&&s?s.split("").filter(function(u){return n[0][u]!==void 0}).map(function(u){return n[0][u]}):n[0]},w=g,D=function(n){if(n.length<2)return null;var s=n.length-1;return w(n[s])=="string"?n[s].toLowerCase():null},G=Math.PI,S={clip_rgb:r,limit:t,type:g,unpack:v,last:D,PI:G,TWOPI:G*2,PITHIRD:G/3,DEG2RAD:G/180,RAD2DEG:180/G},ee={format:{},autodetect:[]},le=S.last,ie=S.clip_rgb,N=S.type,L=ee,x=function(){for(var s=[],u=arguments.length;u--;)s[u]=arguments[u];var h=this;if(N(s[0])==="object"&&s[0].constructor&&s[0].constructor===this.constructor)return s[0];var _=le(s),k=!1;if(!_){k=!0,L.sorted||(L.autodetect=L.autodetect.sort(function(F,q){return q.p-F.p}),L.sorted=!0);for(var d=0,$=L.autodetect;d<$.length;d+=1){var y=$[d];if(_=y.test.apply(y,s),_)break}}if(L.format[_]){var I=L.format[_].apply(null,k?s:s.slice(0,-1));h._rgb=ie(I)}else throw new Error("unknown format: "+s);h._rgb.length===3&&h._rgb.push(1)};x.prototype.toString=function(){return N(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var A=x,X=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];return new(Function.prototype.bind.apply(X.Color,[null].concat(n)))};X.Color=A,X.version="2.4.2";var b=X,m=S.unpack,M=Math.max,O=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];var u=m(n,"rgb"),h=u[0],_=u[1],k=u[2];h=h/255,_=_/255,k=k/255;var d=1-M(h,M(_,k)),$=d<1?1/(1-d):0,y=(1-h-d)*$,I=(1-_-d)*$,F=(1-k-d)*$;return[y,I,F,d]},W=O,te=S.unpack,oe=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];n=te(n,"cmyk");var u=n[0],h=n[1],_=n[2],k=n[3],d=n.length>4?n[4]:1;return k===1?[0,0,0,d]:[u>=1?0:255*(1-u)*(1-k),h>=1?0:255*(1-h)*(1-k),_>=1?0:255*(1-_)*(1-k),d]},Re=oe,Ae=b,J=A,De=ee,ne=S.unpack,at=S.type,He=W;J.prototype.cmyk=function(){return He(this._rgb)},Ae.cmyk=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];return new(Function.prototype.bind.apply(J,[null].concat(n,["cmyk"])))},De.format.cmyk=Re,De.autodetect.push({p:2,test:function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];if(n=ne(n,"cmyk"),at(n)==="array"&&n.length===4)return"cmyk"}});var V=S.unpack,B=S.last,ae=function(n){return Math.round(n*100)/100},fe=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];var u=V(n,"hsla"),h=B(n)||"lsa";return u[0]=ae(u[0]||0),u[1]=ae(u[1]*100)+"%",u[2]=ae(u[2]*100)+"%",h==="hsla"||u.length>3&&u[3]<1?(u[3]=u.length>3?u[3]:1,h="hsla"):u.length=3,h+"("+u.join(",")+")"},Fe=fe,Ee=S.unpack,ze=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];n=Ee(n,"rgba");var u=n[0],h=n[1],_=n[2];u/=255,h/=255,_/=255;var k=Math.min(u,h,_),d=Math.max(u,h,_),$=(d+k)/2,y,I;return d===k?(y=0,I=Number.NaN):y=$<.5?(d-k)/(d+k):(d-k)/(2-d-k),u==d?I=(h-_)/(d-k):h==d?I=2+(_-u)/(d-k):_==d&&(I=4+(u-h)/(d-k)),I*=60,I<0&&(I+=360),n.length>3&&n[3]!==void 0?[I,y,$,n[3]]:[I,y,$]},re=ze,ye=S.unpack,xe=S.last,Ve=Fe,Te=re,Ye=Math.round,qe=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];var u=ye(n,"rgba"),h=xe(n)||"rgb";return h.substr(0,3)=="hsl"?Ve(Te(u),h):(u[0]=Ye(u[0]),u[1]=Ye(u[1]),u[2]=Ye(u[2]),(h==="rgba"||u.length>3&&u[3]<1)&&(u[3]=u.length>3?u[3]:1,h="rgba"),h+"("+u.slice(0,h==="rgb"?3:4).join(",")+")")},Oe=qe,dt=S.unpack,st=Math.round,bt=function(){for(var n,s=[],u=arguments.length;u--;)s[u]=arguments[u];s=dt(s,"hsl");var h=s[0],_=s[1],k=s[2],d,$,y;if(_===0)d=$=y=k*255;else{var I=[0,0,0],F=[0,0,0],q=k<.5?k*(1+_):k+_-k*_,T=2*k-q,Y=h/360;I[0]=Y+1/3,I[1]=Y,I[2]=Y-1/3;for(var H=0;H<3;H++)I[H]<0&&(I[H]+=1),I[H]>1&&(I[H]-=1),6*I[H]<1?F[H]=T+(q-T)*6*I[H]:2*I[H]<1?F[H]=q:3*I[H]<2?F[H]=T+(q-T)*(2/3-I[H])*6:F[H]=T;n=[st(F[0]*255),st(F[1]*255),st(F[2]*255)],d=n[0],$=n[1],y=n[2]}return s.length>3?[d,$,y,s[3]]:[d,$,y,1]},_t=bt,it=_t,Pe=ee,je=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,St=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,Me=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,Tt=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,kt=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,Ft=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,yt=Math.round,Ct=function(n){n=n.toLowerCase().trim();var s;if(Pe.format.named)try{return Pe.format.named(n)}catch{}if(s=n.match(je)){for(var u=s.slice(1,4),h=0;h<3;h++)u[h]=+u[h];return u[3]=1,u}if(s=n.match(St)){for(var _=s.slice(1,5),k=0;k<4;k++)_[k]=+_[k];return _}if(s=n.match(Me)){for(var d=s.slice(1,4),$=0;$<3;$++)d[$]=yt(d[$]*2.55);return d[3]=1,d}if(s=n.match(Tt)){for(var y=s.slice(1,5),I=0;I<3;I++)y[I]=yt(y[I]*2.55);return y[3]=+y[3],y}if(s=n.match(kt)){var F=s.slice(1,4);F[1]*=.01,F[2]*=.01;var q=it(F);return q[3]=1,q}if(s=n.match(Ft)){var T=s.slice(1,4);T[1]*=.01,T[2]*=.01;var Y=it(T);return Y[3]=+s[4],Y}};Ct.test=function(n){return je.test(n)||St.test(n)||Me.test(n)||Tt.test(n)||kt.test(n)||Ft.test(n)};var Lt=Ct,gt=b,Bt=A,ot=ee,vr=S.type,ur=Oe,ln=Lt;Bt.prototype.css=function(n){return ur(this._rgb,n)},gt.css=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];return new(Function.prototype.bind.apply(Bt,[null].concat(n,["css"])))},ot.format.css=ln,ot.autodetect.push({p:5,test:function(n){for(var s=[],u=arguments.length-1;u-- >0;)s[u]=arguments[u+1];if(!s.length&&vr(n)==="string"&&ln.test(n))return"css"}});var on=A,vs=b,ds=ee,ms=S.unpack;ds.format.gl=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];var u=ms(n,"rgba");return u[0]*=255,u[1]*=255,u[2]*=255,u},vs.gl=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];return new(Function.prototype.bind.apply(on,[null].concat(n,["gl"])))},on.prototype.gl=function(){var n=this._rgb;return[n[0]/255,n[1]/255,n[2]/255,n[3]]};var bs=S.unpack,_s=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];var u=bs(n,"rgb"),h=u[0],_=u[1],k=u[2],d=Math.min(h,_,k),$=Math.max(h,_,k),y=$-d,I=y*100/255,F=d/(255-y)*100,q;return y===0?q=Number.NaN:(h===$&&(q=(_-k)/y),_===$&&(q=2+(k-h)/y),k===$&&(q=4+(h-_)/y),q*=60,q<0&&(q+=360)),[q,I,F]},ks=_s,ws=S.unpack,$s=Math.floor,ys=function(){for(var n,s,u,h,_,k,d=[],$=arguments.length;$--;)d[$]=arguments[$];d=ws(d,"hcg");var y=d[0],I=d[1],F=d[2],q,T,Y;F=F*255;var H=I*255;if(I===0)q=T=Y=F;else{y===360&&(y=0),y>360&&(y-=360),y<0&&(y+=360),y/=60;var ue=$s(y),me=y-ue,we=F*(1-I),Ce=we+H*(1-me),et=we+H*me,Je=we+H;switch(ue){case 0:n=[Je,et,we],q=n[0],T=n[1],Y=n[2];break;case 1:s=[Ce,Je,we],q=s[0],T=s[1],Y=s[2];break;case 2:u=[we,Je,et],q=u[0],T=u[1],Y=u[2];break;case 3:h=[we,Ce,Je],q=h[0],T=h[1],Y=h[2];break;case 4:_=[et,we,Je],q=_[0],T=_[1],Y=_[2];break;case 5:k=[Je,we,Ce],q=k[0],T=k[1],Y=k[2];break}}return[q,T,Y,d.length>3?d[3]:1]},Cs=ys,Es=S.unpack,Ms=S.type,Is=b,fn=A,un=ee,Ss=ks;fn.prototype.hcg=function(){return Ss(this._rgb)},Is.hcg=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];return new(Function.prototype.bind.apply(fn,[null].concat(n,["hcg"])))},un.format.hcg=Cs,un.autodetect.push({p:1,test:function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];if(n=Es(n,"hcg"),Ms(n)==="array"&&n.length===3)return"hcg"}});var Fs=S.unpack,Ls=S.last,dr=Math.round,As=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];var u=Fs(n,"rgba"),h=u[0],_=u[1],k=u[2],d=u[3],$=Ls(n)||"auto";d===void 0&&(d=1),$==="auto"&&($=d<1?"rgba":"rgb"),h=dr(h),_=dr(_),k=dr(k);var y=h<<16|_<<8|k,I="000000"+y.toString(16);I=I.substr(I.length-6);var F="0"+dr(d*255).toString(16);switch(F=F.substr(F.length-2),$.toLowerCase()){case"rgba":return"#"+I+F;case"argb":return"#"+F+I;default:return"#"+I}},cn=As,Ts=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,Rs=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Ds=function(n){if(n.match(Ts)){(n.length===4||n.length===7)&&(n=n.substr(1)),n.length===3&&(n=n.split(""),n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]);var s=parseInt(n,16),u=s>>16,h=s>>8&255,_=s&255;return[u,h,_,1]}if(n.match(Rs)){(n.length===5||n.length===9)&&(n=n.substr(1)),n.length===4&&(n=n.split(""),n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]);var k=parseInt(n,16),d=k>>24&255,$=k>>16&255,y=k>>8&255,I=Math.round((k&255)/255*100)/100;return[d,$,y,I]}throw new Error("unknown hex color: "+n)},hn=Ds,Os=b,gn=A,Ps=S.type,pn=ee,Ns=cn;gn.prototype.hex=function(n){return Ns(this._rgb,n)},Os.hex=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];return new(Function.prototype.bind.apply(gn,[null].concat(n,["hex"])))},pn.format.hex=hn,pn.autodetect.push({p:4,test:function(n){for(var s=[],u=arguments.length-1;u-- >0;)s[u]=arguments[u+1];if(!s.length&&Ps(n)==="string"&&[3,4,5,6,7,8,9].indexOf(n.length)>=0)return"hex"}});var zs=S.unpack,vn=S.TWOPI,xs=Math.min,Bs=Math.sqrt,Us=Math.acos,Ws=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];var u=zs(n,"rgb"),h=u[0],_=u[1],k=u[2];h/=255,_/=255,k/=255;var d,$=xs(h,_,k),y=(h+_+k)/3,I=y>0?1-$/y:0;return I===0?d=NaN:(d=(h-_+(h-k))/2,d/=Bs((h-_)*(h-_)+(h-k)*(_-k)),d=Us(d),k>_&&(d=vn-d),d/=vn),[d*360,I,y]},qs=Ws,js=S.unpack,Sr=S.limit,Ht=S.TWOPI,Fr=S.PITHIRD,Vt=Math.cos,Gs=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];n=js(n,"hsi");var u=n[0],h=n[1],_=n[2],k,d,$;return isNaN(u)&&(u=0),isNaN(h)&&(h=0),u>360&&(u-=360),u<0&&(u+=360),u/=360,u<1/3?($=(1-h)/3,k=(1+h*Vt(Ht*u)/Vt(Fr-Ht*u))/3,d=1-($+k)):u<2/3?(u-=1/3,k=(1-h)/3,d=(1+h*Vt(Ht*u)/Vt(Fr-Ht*u))/3,$=1-(k+d)):(u-=2/3,d=(1-h)/3,$=(1+h*Vt(Ht*u)/Vt(Fr-Ht*u))/3,k=1-(d+$)),k=Sr(_*k*3),d=Sr(_*d*3),$=Sr(_*$*3),[k*255,d*255,$*255,n.length>3?n[3]:1]},Hs=Gs,Vs=S.unpack,Ys=S.type,Qs=b,dn=A,mn=ee,Xs=qs;dn.prototype.hsi=function(){return Xs(this._rgb)},Qs.hsi=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];return new(Function.prototype.bind.apply(dn,[null].concat(n,["hsi"])))},mn.format.hsi=Hs,mn.autodetect.push({p:2,test:function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];if(n=Vs(n,"hsi"),Ys(n)==="array"&&n.length===3)return"hsi"}});var Js=S.unpack,Zs=S.type,Ks=b,bn=A,_n=ee,el=re;bn.prototype.hsl=function(){return el(this._rgb)},Ks.hsl=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];return new(Function.prototype.bind.apply(bn,[null].concat(n,["hsl"])))},_n.format.hsl=_t,_n.autodetect.push({p:2,test:function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];if(n=Js(n,"hsl"),Zs(n)==="array"&&n.length===3)return"hsl"}});var tl=S.unpack,rl=Math.min,nl=Math.max,al=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];n=tl(n,"rgb");var u=n[0],h=n[1],_=n[2],k=rl(u,h,_),d=nl(u,h,_),$=d-k,y,I,F;return F=d/255,d===0?(y=Number.NaN,I=0):(I=$/d,u===d&&(y=(h-_)/$),h===d&&(y=2+(_-u)/$),_===d&&(y=4+(u-h)/$),y*=60,y<0&&(y+=360)),[y,I,F]},sl=al,ll=S.unpack,il=Math.floor,ol=function(){for(var n,s,u,h,_,k,d=[],$=arguments.length;$--;)d[$]=arguments[$];d=ll(d,"hsv");var y=d[0],I=d[1],F=d[2],q,T,Y;if(F*=255,I===0)q=T=Y=F;else{y===360&&(y=0),y>360&&(y-=360),y<0&&(y+=360),y/=60;var H=il(y),ue=y-H,me=F*(1-I),we=F*(1-I*ue),Ce=F*(1-I*(1-ue));switch(H){case 0:n=[F,Ce,me],q=n[0],T=n[1],Y=n[2];break;case 1:s=[we,F,me],q=s[0],T=s[1],Y=s[2];break;case 2:u=[me,F,Ce],q=u[0],T=u[1],Y=u[2];break;case 3:h=[me,we,F],q=h[0],T=h[1],Y=h[2];break;case 4:_=[Ce,me,F],q=_[0],T=_[1],Y=_[2];break;case 5:k=[F,me,we],q=k[0],T=k[1],Y=k[2];break}}return[q,T,Y,d.length>3?d[3]:1]},fl=ol,ul=S.unpack,cl=S.type,hl=b,kn=A,wn=ee,gl=sl;kn.prototype.hsv=function(){return gl(this._rgb)},hl.hsv=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];return new(Function.prototype.bind.apply(kn,[null].concat(n,["hsv"])))},wn.format.hsv=fl,wn.autodetect.push({p:2,test:function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];if(n=ul(n,"hsv"),cl(n)==="array"&&n.length===3)return"hsv"}});var mr={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},Yt=mr,pl=S.unpack,$n=Math.pow,vl=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];var u=pl(n,"rgb"),h=u[0],_=u[1],k=u[2],d=dl(h,_,k),$=d[0],y=d[1],I=d[2],F=116*y-16;return[F<0?0:F,500*($-y),200*(y-I)]},Lr=function(n){return(n/=255)<=.04045?n/12.92:$n((n+.055)/1.055,2.4)},Ar=function(n){return n>Yt.t3?$n(n,1/3):n/Yt.t2+Yt.t0},dl=function(n,s,u){n=Lr(n),s=Lr(s),u=Lr(u);var h=Ar((.4124564*n+.3575761*s+.1804375*u)/Yt.Xn),_=Ar((.2126729*n+.7151522*s+.072175*u)/Yt.Yn),k=Ar((.0193339*n+.119192*s+.9503041*u)/Yt.Zn);return[h,_,k]},yn=vl,Qt=mr,ml=S.unpack,bl=Math.pow,_l=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];n=ml(n,"lab");var u=n[0],h=n[1],_=n[2],k,d,$,y,I,F;return d=(u+16)/116,k=isNaN(h)?d:d+h/500,$=isNaN(_)?d:d-_/200,d=Qt.Yn*Rr(d),k=Qt.Xn*Rr(k),$=Qt.Zn*Rr($),y=Tr(3.2404542*k-1.5371385*d-.4985314*$),I=Tr(-.969266*k+1.8760108*d+.041556*$),F=Tr(.0556434*k-.2040259*d+1.0572252*$),[y,I,F,n.length>3?n[3]:1]},Tr=function(n){return 255*(n<=.00304?12.92*n:1.055*bl(n,1/2.4)-.055)},Rr=function(n){return n>Qt.t1?n*n*n:Qt.t2*(n-Qt.t0)},Cn=_l,kl=S.unpack,wl=S.type,$l=b,En=A,Mn=ee,yl=yn;En.prototype.lab=function(){return yl(this._rgb)},$l.lab=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];return new(Function.prototype.bind.apply(En,[null].concat(n,["lab"])))},Mn.format.lab=Cn,Mn.autodetect.push({p:2,test:function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];if(n=kl(n,"lab"),wl(n)==="array"&&n.length===3)return"lab"}});var Cl=S.unpack,El=S.RAD2DEG,Ml=Math.sqrt,Il=Math.atan2,Sl=Math.round,Fl=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];var u=Cl(n,"lab"),h=u[0],_=u[1],k=u[2],d=Ml(_*_+k*k),$=(Il(k,_)*El+360)%360;return Sl(d*1e4)===0&&($=Number.NaN),[h,d,$]},In=Fl,Ll=S.unpack,Al=yn,Tl=In,Rl=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];var u=Ll(n,"rgb"),h=u[0],_=u[1],k=u[2],d=Al(h,_,k),$=d[0],y=d[1],I=d[2];return Tl($,y,I)},Dl=Rl,Ol=S.unpack,Pl=S.DEG2RAD,Nl=Math.sin,zl=Math.cos,xl=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];var u=Ol(n,"lch"),h=u[0],_=u[1],k=u[2];return isNaN(k)&&(k=0),k=k*Pl,[h,zl(k)*_,Nl(k)*_]},Sn=xl,Bl=S.unpack,Ul=Sn,Wl=Cn,ql=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];n=Bl(n,"lch");var u=n[0],h=n[1],_=n[2],k=Ul(u,h,_),d=k[0],$=k[1],y=k[2],I=Wl(d,$,y),F=I[0],q=I[1],T=I[2];return[F,q,T,n.length>3?n[3]:1]},Fn=ql,jl=S.unpack,Gl=Fn,Hl=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];var u=jl(n,"hcl").reverse();return Gl.apply(void 0,u)},Vl=Hl,Yl=S.unpack,Ql=S.type,Ln=b,br=A,Dr=ee,An=Dl;br.prototype.lch=function(){return An(this._rgb)},br.prototype.hcl=function(){return An(this._rgb).reverse()},Ln.lch=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];return new(Function.prototype.bind.apply(br,[null].concat(n,["lch"])))},Ln.hcl=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];return new(Function.prototype.bind.apply(br,[null].concat(n,["hcl"])))},Dr.format.lch=Fn,Dr.format.hcl=Vl,["lch","hcl"].forEach(function(n){return Dr.autodetect.push({p:2,test:function(){for(var s=[],u=arguments.length;u--;)s[u]=arguments[u];if(s=Yl(s,n),Ql(s)==="array"&&s.length===3)return n}})});var Xl={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Tn=Xl,Jl=A,Rn=ee,Zl=S.type,cr=Tn,Kl=hn,ei=cn;Jl.prototype.name=function(){for(var n=ei(this._rgb,"rgb"),s=0,u=Object.keys(cr);s<u.length;s+=1){var h=u[s];if(cr[h]===n)return h.toLowerCase()}return n},Rn.format.named=function(n){if(n=n.toLowerCase(),cr[n])return Kl(cr[n]);throw new Error("unknown color name: "+n)},Rn.autodetect.push({p:5,test:function(n){for(var s=[],u=arguments.length-1;u-- >0;)s[u]=arguments[u+1];if(!s.length&&Zl(n)==="string"&&cr[n.toLowerCase()])return"named"}});var ti=S.unpack,ri=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];var u=ti(n,"rgb"),h=u[0],_=u[1],k=u[2];return(h<<16)+(_<<8)+k},ni=ri,ai=S.type,si=function(n){if(ai(n)=="number"&&n>=0&&n<=16777215){var s=n>>16,u=n>>8&255,h=n&255;return[s,u,h,1]}throw new Error("unknown num color: "+n)},li=si,ii=b,Dn=A,On=ee,oi=S.type,fi=ni;Dn.prototype.num=function(){return fi(this._rgb)},ii.num=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];return new(Function.prototype.bind.apply(Dn,[null].concat(n,["num"])))},On.format.num=li,On.autodetect.push({p:5,test:function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];if(n.length===1&&oi(n[0])==="number"&&n[0]>=0&&n[0]<=16777215)return"num"}});var ui=b,Or=A,Pn=ee,Nn=S.unpack,zn=S.type,xn=Math.round;Or.prototype.rgb=function(n){return n===void 0&&(n=!0),n===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(xn)},Or.prototype.rgba=function(n){return n===void 0&&(n=!0),this._rgb.slice(0,4).map(function(s,u){return u<3?n===!1?s:xn(s):s})},ui.rgb=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];return new(Function.prototype.bind.apply(Or,[null].concat(n,["rgb"])))},Pn.format.rgb=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];var u=Nn(n,"rgba");return u[3]===void 0&&(u[3]=1),u},Pn.autodetect.push({p:3,test:function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];if(n=Nn(n,"rgba"),zn(n)==="array"&&(n.length===3||n.length===4&&zn(n[3])=="number"&&n[3]>=0&&n[3]<=1))return"rgb"}});var _r=Math.log,ci=function(n){var s=n/100,u,h,_;return s<66?(u=255,h=s<6?0:-155.25485562709179-.44596950469579133*(h=s-2)+104.49216199393888*_r(h),_=s<20?0:-254.76935184120902+.8274096064007395*(_=s-10)+115.67994401066147*_r(_)):(u=351.97690566805693+.114206453784165*(u=s-55)-40.25366309332127*_r(u),h=325.4494125711974+.07943456536662342*(h=s-50)-28.0852963507957*_r(h),_=255),[u,h,_,1]},Bn=ci,hi=Bn,gi=S.unpack,pi=Math.round,vi=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];for(var u=gi(n,"rgb"),h=u[0],_=u[2],k=1e3,d=4e4,$=.4,y;d-k>$;){y=(d+k)*.5;var I=hi(y);I[2]/I[0]>=_/h?d=y:k=y}return pi(y)},di=vi,Pr=b,kr=A,Nr=ee,mi=di;kr.prototype.temp=kr.prototype.kelvin=kr.prototype.temperature=function(){return mi(this._rgb)},Pr.temp=Pr.kelvin=Pr.temperature=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];return new(Function.prototype.bind.apply(kr,[null].concat(n,["temp"])))},Nr.format.temp=Nr.format.kelvin=Nr.format.temperature=Bn;var bi=S.unpack,zr=Math.cbrt,_i=Math.pow,ki=Math.sign,wi=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];var u=bi(n,"rgb"),h=u[0],_=u[1],k=u[2],d=[xr(h/255),xr(_/255),xr(k/255)],$=d[0],y=d[1],I=d[2],F=zr(.4122214708*$+.5363325363*y+.0514459929*I),q=zr(.2119034982*$+.6806995451*y+.1073969566*I),T=zr(.0883024619*$+.2817188376*y+.6299787005*I);return[.2104542553*F+.793617785*q-.0040720468*T,1.9779984951*F-2.428592205*q+.4505937099*T,.0259040371*F+.7827717662*q-.808675766*T]},Un=wi;function xr(n){var s=Math.abs(n);return s<.04045?n/12.92:(ki(n)||1)*_i((s+.055)/1.055,2.4)}var $i=S.unpack,wr=Math.pow,yi=Math.sign,Ci=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];n=$i(n,"lab");var u=n[0],h=n[1],_=n[2],k=wr(u+.3963377774*h+.2158037573*_,3),d=wr(u-.1055613458*h-.0638541728*_,3),$=wr(u-.0894841775*h-1.291485548*_,3);return[255*Br(4.0767416621*k-3.3077115913*d+.2309699292*$),255*Br(-1.2684380046*k+2.6097574011*d-.3413193965*$),255*Br(-.0041960863*k-.7034186147*d+1.707614701*$),n.length>3?n[3]:1]},Wn=Ci;function Br(n){var s=Math.abs(n);return s>.0031308?(yi(n)||1)*(1.055*wr(s,1/2.4)-.055):n*12.92}var Ei=S.unpack,Mi=S.type,Ii=b,qn=A,jn=ee,Si=Un;qn.prototype.oklab=function(){return Si(this._rgb)},Ii.oklab=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];return new(Function.prototype.bind.apply(qn,[null].concat(n,["oklab"])))},jn.format.oklab=Wn,jn.autodetect.push({p:3,test:function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];if(n=Ei(n,"oklab"),Mi(n)==="array"&&n.length===3)return"oklab"}});var Fi=S.unpack,Li=Un,Ai=In,Ti=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];var u=Fi(n,"rgb"),h=u[0],_=u[1],k=u[2],d=Li(h,_,k),$=d[0],y=d[1],I=d[2];return Ai($,y,I)},Ri=Ti,Di=S.unpack,Oi=Sn,Pi=Wn,Ni=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];n=Di(n,"lch");var u=n[0],h=n[1],_=n[2],k=Oi(u,h,_),d=k[0],$=k[1],y=k[2],I=Pi(d,$,y),F=I[0],q=I[1],T=I[2];return[F,q,T,n.length>3?n[3]:1]},zi=Ni,xi=S.unpack,Bi=S.type,Ui=b,Gn=A,Hn=ee,Wi=Ri;Gn.prototype.oklch=function(){return Wi(this._rgb)},Ui.oklch=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];return new(Function.prototype.bind.apply(Gn,[null].concat(n,["oklch"])))},Hn.format.oklch=zi,Hn.autodetect.push({p:3,test:function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];if(n=xi(n,"oklch"),Bi(n)==="array"&&n.length===3)return"oklch"}});var Vn=A,qi=S.type;Vn.prototype.alpha=function(n,s){return s===void 0&&(s=!1),n!==void 0&&qi(n)==="number"?s?(this._rgb[3]=n,this):new Vn([this._rgb[0],this._rgb[1],this._rgb[2],n],"rgb"):this._rgb[3]};var ji=A;ji.prototype.clipped=function(){return this._rgb._clipped||!1};var Ut=A,Gi=mr;Ut.prototype.darken=function(n){n===void 0&&(n=1);var s=this,u=s.lab();return u[0]-=Gi.Kn*n,new Ut(u,"lab").alpha(s.alpha(),!0)},Ut.prototype.brighten=function(n){return n===void 0&&(n=1),this.darken(-n)},Ut.prototype.darker=Ut.prototype.darken,Ut.prototype.brighter=Ut.prototype.brighten;var Hi=A;Hi.prototype.get=function(n){var s=n.split("."),u=s[0],h=s[1],_=this[u]();if(h){var k=u.indexOf(h)-(u.substr(0,2)==="ok"?2:0);if(k>-1)return _[k];throw new Error("unknown channel "+h+" in mode "+u)}else return _};var Xt=A,Vi=S.type,Yi=Math.pow,Qi=1e-7,Xi=20;Xt.prototype.luminance=function(n){if(n!==void 0&&Vi(n)==="number"){if(n===0)return new Xt([0,0,0,this._rgb[3]],"rgb");if(n===1)return new Xt([255,255,255,this._rgb[3]],"rgb");var s=this.luminance(),u="rgb",h=Xi,_=function(d,$){var y=d.interpolate($,.5,u),I=y.luminance();return Math.abs(n-I)<Qi||!h--?y:I>n?_(d,y):_(y,$)},k=(s>n?_(new Xt([0,0,0]),this):_(this,new Xt([255,255,255]))).rgb();return new Xt(k.concat([this._rgb[3]]))}return Ji.apply(void 0,this._rgb.slice(0,3))};var Ji=function(n,s,u){return n=Ur(n),s=Ur(s),u=Ur(u),.2126*n+.7152*s+.0722*u},Ur=function(n){return n/=255,n<=.03928?n/12.92:Yi((n+.055)/1.055,2.4)},mt={},Yn=A,Qn=S.type,$r=mt,Xn=function(n,s,u){u===void 0&&(u=.5);for(var h=[],_=arguments.length-3;_-- >0;)h[_]=arguments[_+3];var k=h[0]||"lrgb";if(!$r[k]&&!h.length&&(k=Object.keys($r)[0]),!$r[k])throw new Error("interpolation mode "+k+" is not defined");return Qn(n)!=="object"&&(n=new Yn(n)),Qn(s)!=="object"&&(s=new Yn(s)),$r[k](n,s,u).alpha(n.alpha()+u*(s.alpha()-n.alpha()))},Jn=A,Zi=Xn;Jn.prototype.mix=Jn.prototype.interpolate=function(n,s){s===void 0&&(s=.5);for(var u=[],h=arguments.length-2;h-- >0;)u[h]=arguments[h+2];return Zi.apply(void 0,[this,n,s].concat(u))};var Zn=A;Zn.prototype.premultiply=function(n){n===void 0&&(n=!1);var s=this._rgb,u=s[3];return n?(this._rgb=[s[0]*u,s[1]*u,s[2]*u,u],this):new Zn([s[0]*u,s[1]*u,s[2]*u,u],"rgb")};var Wr=A,Ki=mr;Wr.prototype.saturate=function(n){n===void 0&&(n=1);var s=this,u=s.lch();return u[1]+=Ki.Kn*n,u[1]<0&&(u[1]=0),new Wr(u,"lch").alpha(s.alpha(),!0)},Wr.prototype.desaturate=function(n){return n===void 0&&(n=1),this.saturate(-n)};var Kn=A,ea=S.type;Kn.prototype.set=function(n,s,u){u===void 0&&(u=!1);var h=n.split("."),_=h[0],k=h[1],d=this[_]();if(k){var $=_.indexOf(k)-(_.substr(0,2)==="ok"?2:0);if($>-1){if(ea(s)=="string")switch(s.charAt(0)){case"+":d[$]+=+s;break;case"-":d[$]+=+s;break;case"*":d[$]*=+s.substr(1);break;case"/":d[$]/=+s.substr(1);break;default:d[$]=+s}else if(ea(s)==="number")d[$]=s;else throw new Error("unsupported value for Color.set");var y=new Kn(d,_);return u?(this._rgb=y._rgb,this):y}throw new Error("unknown channel "+k+" in mode "+_)}else return d};var eo=A,to=function(n,s,u){var h=n._rgb,_=s._rgb;return new eo(h[0]+u*(_[0]-h[0]),h[1]+u*(_[1]-h[1]),h[2]+u*(_[2]-h[2]),"rgb")};mt.rgb=to;var ro=A,qr=Math.sqrt,Jt=Math.pow,no=function(n,s,u){var h=n._rgb,_=h[0],k=h[1],d=h[2],$=s._rgb,y=$[0],I=$[1],F=$[2];return new ro(qr(Jt(_,2)*(1-u)+Jt(y,2)*u),qr(Jt(k,2)*(1-u)+Jt(I,2)*u),qr(Jt(d,2)*(1-u)+Jt(F,2)*u),"rgb")};mt.lrgb=no;var ao=A,so=function(n,s,u){var h=n.lab(),_=s.lab();return new ao(h[0]+u*(_[0]-h[0]),h[1]+u*(_[1]-h[1]),h[2]+u*(_[2]-h[2]),"lab")};mt.lab=so;var ta=A,Zt=function(n,s,u,h){var _,k,d,$;h==="hsl"?(d=n.hsl(),$=s.hsl()):h==="hsv"?(d=n.hsv(),$=s.hsv()):h==="hcg"?(d=n.hcg(),$=s.hcg()):h==="hsi"?(d=n.hsi(),$=s.hsi()):h==="lch"||h==="hcl"?(h="hcl",d=n.hcl(),$=s.hcl()):h==="oklch"&&(d=n.oklch().reverse(),$=s.oklch().reverse());var y,I,F,q,T,Y;(h.substr(0,1)==="h"||h==="oklch")&&(_=d,y=_[0],F=_[1],T=_[2],k=$,I=k[0],q=k[1],Y=k[2]);var H,ue,me,we;return!isNaN(y)&&!isNaN(I)?(I>y&&I-y>180?we=I-(y+360):I<y&&y-I>180?we=I+360-y:we=I-y,ue=y+u*we):isNaN(y)?isNaN(I)?ue=Number.NaN:(ue=I,(T==1||T==0)&&h!="hsv"&&(H=q)):(ue=y,(Y==1||Y==0)&&h!="hsv"&&(H=F)),H===void 0&&(H=F+u*(q-F)),me=T+u*(Y-T),h==="oklch"?new ta([me,H,ue],h):new ta([ue,H,me],h)},lo=Zt,ra=function(n,s,u){return lo(n,s,u,"lch")};mt.lch=ra,mt.hcl=ra;var io=A,oo=function(n,s,u){var h=n.num(),_=s.num();return new io(h+u*(_-h),"num")};mt.num=oo;var fo=Zt,uo=function(n,s,u){return fo(n,s,u,"hcg")};mt.hcg=uo;var co=Zt,ho=function(n,s,u){return co(n,s,u,"hsi")};mt.hsi=ho;var go=Zt,po=function(n,s,u){return go(n,s,u,"hsl")};mt.hsl=po;var vo=Zt,mo=function(n,s,u){return vo(n,s,u,"hsv")};mt.hsv=mo;var bo=A,_o=function(n,s,u){var h=n.oklab(),_=s.oklab();return new bo(h[0]+u*(_[0]-h[0]),h[1]+u*(_[1]-h[1]),h[2]+u*(_[2]-h[2]),"oklab")};mt.oklab=_o;var ko=Zt,wo=function(n,s,u){return ko(n,s,u,"oklch")};mt.oklch=wo;var jr=A,$o=S.clip_rgb,Gr=Math.pow,Hr=Math.sqrt,Vr=Math.PI,na=Math.cos,aa=Math.sin,yo=Math.atan2,Co=function(n,s,u){s===void 0&&(s="lrgb"),u===void 0&&(u=null);var h=n.length;u||(u=Array.from(new Array(h)).map(function(){return 1}));var _=h/u.reduce(function(ue,me){return ue+me});if(u.forEach(function(ue,me){u[me]*=_}),n=n.map(function(ue){return new jr(ue)}),s==="lrgb")return Eo(n,u);for(var k=n.shift(),d=k.get(s),$=[],y=0,I=0,F=0;F<d.length;F++)if(d[F]=(d[F]||0)*u[0],$.push(isNaN(d[F])?0:u[0]),s.charAt(F)==="h"&&!isNaN(d[F])){var q=d[F]/180*Vr;y+=na(q)*u[0],I+=aa(q)*u[0]}var T=k.alpha()*u[0];n.forEach(function(ue,me){var we=ue.get(s);T+=ue.alpha()*u[me+1];for(var Ce=0;Ce<d.length;Ce++)if(!isNaN(we[Ce]))if($[Ce]+=u[me+1],s.charAt(Ce)==="h"){var et=we[Ce]/180*Vr;y+=na(et)*u[me+1],I+=aa(et)*u[me+1]}else d[Ce]+=we[Ce]*u[me+1]});for(var Y=0;Y<d.length;Y++)if(s.charAt(Y)==="h"){for(var H=yo(I/$[Y],y/$[Y])/Vr*180;H<0;)H+=360;for(;H>=360;)H-=360;d[Y]=H}else d[Y]=d[Y]/$[Y];return T/=h,new jr(d,s).alpha(T>.99999?1:T,!0)},Eo=function(n,s){for(var u=n.length,h=[0,0,0,0],_=0;_<n.length;_++){var k=n[_],d=s[_]/u,$=k._rgb;h[0]+=Gr($[0],2)*d,h[1]+=Gr($[1],2)*d,h[2]+=Gr($[2],2)*d,h[3]+=$[3]*d}return h[0]=Hr(h[0]),h[1]=Hr(h[1]),h[2]=Hr(h[2]),h[3]>.9999999&&(h[3]=1),new jr($o(h))},Et=b,Kt=S.type,Mo=Math.pow,Yr=function(n){var s="rgb",u=Et("#ccc"),h=0,_=[0,1],k=[],d=[0,0],$=!1,y=[],I=!1,F=0,q=1,T=!1,Y={},H=!0,ue=1,me=function(R){if(R=R||["#fff","#000"],R&&Kt(R)==="string"&&Et.brewer&&Et.brewer[R.toLowerCase()]&&(R=Et.brewer[R.toLowerCase()]),Kt(R)==="array"){R.length===1&&(R=[R[0],R[0]]),R=R.slice(0);for(var se=0;se<R.length;se++)R[se]=Et(R[se]);k.length=0;for(var de=0;de<R.length;de++)k.push(de/(R.length-1))}return pt(),y=R},we=function(R){if($!=null){for(var se=$.length-1,de=0;de<se&&R>=$[de];)de++;return de-1}return 0},Ce=function(R){return R},et=function(R){return R},Je=function(R,se){var de,ce;if(se==null&&(se=!1),isNaN(R)||R===null)return u;if(se)ce=R;else if($&&$.length>2){var tt=we(R);ce=tt/($.length-2)}else q!==F?ce=(R-F)/(q-F):ce=1;ce=et(ce),se||(ce=Ce(ce)),ue!==1&&(ce=Mo(ce,ue)),ce=d[0]+ce*(1-d[0]-d[1]),ce=Math.min(1,Math.max(0,ce));var Ne=Math.floor(ce*1e4);if(H&&Y[Ne])de=Y[Ne];else{if(Kt(y)==="array")for(var $e=0;$e<k.length;$e++){var Ie=k[$e];if(ce<=Ie){de=y[$e];break}if(ce>=Ie&&$e===k.length-1){de=y[$e];break}if(ce>Ie&&ce<k[$e+1]){ce=(ce-Ie)/(k[$e+1]-Ie),de=Et.interpolate(y[$e],y[$e+1],ce,s);break}}else Kt(y)==="function"&&(de=y(ce));H&&(Y[Ne]=de)}return de},pt=function(){return Y={}};me(n);var ke=function(R){var se=Et(Je(R));return I&&se[I]?se[I]():se};return ke.classes=function(R){if(R!=null){if(Kt(R)==="array")$=R,_=[R[0],R[R.length-1]];else{var se=Et.analyze(_);R===0?$=[se.min,se.max]:$=Et.limits(se,"e",R)}return ke}return $},ke.domain=function(R){if(!arguments.length)return _;F=R[0],q=R[R.length-1],k=[];var se=y.length;if(R.length===se&&F!==q)for(var de=0,ce=Array.from(R);de<ce.length;de+=1){var tt=ce[de];k.push((tt-F)/(q-F))}else{for(var Ne=0;Ne<se;Ne++)k.push(Ne/(se-1));if(R.length>2){var $e=R.map(function(Se,Le){return Le/(R.length-1)}),Ie=R.map(function(Se){return(Se-F)/(q-F)});Ie.every(function(Se,Le){return $e[Le]===Se})||(et=function(Se){if(Se<=0||Se>=1)return Se;for(var Le=0;Se>=Ie[Le+1];)Le++;var It=(Se-Ie[Le])/(Ie[Le+1]-Ie[Le]),Nt=$e[Le]+It*($e[Le+1]-$e[Le]);return Nt})}}return _=[F,q],ke},ke.mode=function(R){return arguments.length?(s=R,pt(),ke):s},ke.range=function(R,se){return me(R),ke},ke.out=function(R){return I=R,ke},ke.spread=function(R){return arguments.length?(h=R,ke):h},ke.correctLightness=function(R){return R==null&&(R=!0),T=R,pt(),T?Ce=function(se){for(var de=Je(0,!0).lab()[0],ce=Je(1,!0).lab()[0],tt=de>ce,Ne=Je(se,!0).lab()[0],$e=de+(ce-de)*se,Ie=Ne-$e,Se=0,Le=1,It=20;Math.abs(Ie)>.01&&It-- >0;)(function(){return tt&&(Ie*=-1),Ie<0?(Se=se,se+=(Le-se)*.5):(Le=se,se+=(Se-se)*.5),Ne=Je(se,!0).lab()[0],Ie=Ne-$e})();return se}:Ce=function(se){return se},ke},ke.padding=function(R){return R!=null?(Kt(R)==="number"&&(R=[R,R]),d=R,ke):d},ke.colors=function(R,se){arguments.length<2&&(se="hex");var de=[];if(arguments.length===0)de=y.slice(0);else if(R===1)de=[ke(.5)];else if(R>1){var ce=_[0],tt=_[1]-ce;de=Io(0,R,!1).map(function(Le){return ke(ce+Le/(R-1)*tt)})}else{n=[];var Ne=[];if($&&$.length>2)for(var $e=1,Ie=$.length,Se=1<=Ie;Se?$e<Ie:$e>Ie;Se?$e++:$e--)Ne.push(($[$e-1]+$[$e])*.5);else Ne=_;de=Ne.map(function(Le){return ke(Le)})}return Et[se]&&(de=de.map(function(Le){return Le[se]()})),de},ke.cache=function(R){return R!=null?(H=R,ke):H},ke.gamma=function(R){return R!=null?(ue=R,ke):ue},ke.nodata=function(R){return R!=null?(u=Et(R),ke):u},ke};function Io(n,s,u){for(var h=[],_=n<s,k=u?_?s+1:s-1:s,d=n;_?d<k:d>k;_?d++:d--)h.push(d);return h}var hr=A,So=Yr,Fo=function(n){for(var s=[1,1],u=1;u<n;u++){for(var h=[1],_=1;_<=s.length;_++)h[_]=(s[_]||0)+s[_-1];s=h}return s},Lo=function(n){var s,u,h,_,k,d,$;if(n=n.map(function(T){return new hr(T)}),n.length===2)s=n.map(function(T){return T.lab()}),k=s[0],d=s[1],_=function(T){var Y=[0,1,2].map(function(H){return k[H]+T*(d[H]-k[H])});return new hr(Y,"lab")};else if(n.length===3)u=n.map(function(T){return T.lab()}),k=u[0],d=u[1],$=u[2],_=function(T){var Y=[0,1,2].map(function(H){return(1-T)*(1-T)*k[H]+2*(1-T)*T*d[H]+T*T*$[H]});return new hr(Y,"lab")};else if(n.length===4){var y;h=n.map(function(T){return T.lab()}),k=h[0],d=h[1],$=h[2],y=h[3],_=function(T){var Y=[0,1,2].map(function(H){return(1-T)*(1-T)*(1-T)*k[H]+3*(1-T)*(1-T)*T*d[H]+3*(1-T)*T*T*$[H]+T*T*T*y[H]});return new hr(Y,"lab")}}else if(n.length>=5){var I,F,q;I=n.map(function(T){return T.lab()}),q=n.length-1,F=Fo(q),_=function(T){var Y=1-T,H=[0,1,2].map(function(ue){return I.reduce(function(me,we,Ce){return me+F[Ce]*Math.pow(Y,q-Ce)*Math.pow(T,Ce)*we[ue]},0)});return new hr(H,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return _},Ao=function(n){var s=Lo(n);return s.scale=function(){return So(s)},s},Qr=b,Mt=function(n,s,u){if(!Mt[u])throw new Error("unknown blend mode "+u);return Mt[u](n,s)},Ot=function(n){return function(s,u){var h=Qr(u).rgb(),_=Qr(s).rgb();return Qr.rgb(n(h,_))}},Pt=function(n){return function(s,u){var h=[];return h[0]=n(s[0],u[0]),h[1]=n(s[1],u[1]),h[2]=n(s[2],u[2]),h}},To=function(n){return n},Ro=function(n,s){return n*s/255},Do=function(n,s){return n>s?s:n},Oo=function(n,s){return n>s?n:s},Po=function(n,s){return 255*(1-(1-n/255)*(1-s/255))},No=function(n,s){return s<128?2*n*s/255:255*(1-2*(1-n/255)*(1-s/255))},zo=function(n,s){return 255*(1-(1-s/255)/(n/255))},xo=function(n,s){return n===255?255:(n=255*(s/255)/(1-n/255),n>255?255:n)};Mt.normal=Ot(Pt(To)),Mt.multiply=Ot(Pt(Ro)),Mt.screen=Ot(Pt(Po)),Mt.overlay=Ot(Pt(No)),Mt.darken=Ot(Pt(Do)),Mt.lighten=Ot(Pt(Oo)),Mt.dodge=Ot(Pt(xo)),Mt.burn=Ot(Pt(zo));for(var Bo=Mt,Xr=S.type,Uo=S.clip_rgb,Wo=S.TWOPI,qo=Math.pow,jo=Math.sin,Go=Math.cos,sa=b,Ho=function(n,s,u,h,_){n===void 0&&(n=300),s===void 0&&(s=-1.5),u===void 0&&(u=1),h===void 0&&(h=1),_===void 0&&(_=[0,1]);var k=0,d;Xr(_)==="array"?d=_[1]-_[0]:(d=0,_=[_,_]);var $=function(y){var I=Wo*((n+120)/360+s*y),F=qo(_[0]+d*y,h),q=k!==0?u[0]+y*k:u,T=q*F*(1-F)/2,Y=Go(I),H=jo(I),ue=F+T*(-.14861*Y+1.78277*H),me=F+T*(-.29227*Y-.90649*H),we=F+T*(1.97294*Y);return sa(Uo([ue*255,me*255,we*255,1]))};return $.start=function(y){return y==null?n:(n=y,$)},$.rotations=function(y){return y==null?s:(s=y,$)},$.gamma=function(y){return y==null?h:(h=y,$)},$.hue=function(y){return y==null?u:(u=y,Xr(u)==="array"?(k=u[1]-u[0],k===0&&(u=u[1])):k=0,$)},$.lightness=function(y){return y==null?_:(Xr(y)==="array"?(_=y,d=y[1]-y[0]):(_=[y,y],d=0),$)},$.scale=function(){return sa.scale($)},$.hue(u),$},Vo=A,Yo="0123456789abcdef",Qo=Math.floor,Xo=Math.random,Jo=function(){for(var n="#",s=0;s<6;s++)n+=Yo.charAt(Qo(Xo()*16));return new Vo(n,"hex")},Jr=g,la=Math.log,Zo=Math.pow,Ko=Math.floor,ef=Math.abs,ia=function(n,s){s===void 0&&(s=null);var u={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return Jr(n)==="object"&&(n=Object.values(n)),n.forEach(function(h){s&&Jr(h)==="object"&&(h=h[s]),h!=null&&!isNaN(h)&&(u.values.push(h),u.sum+=h,h<u.min&&(u.min=h),h>u.max&&(u.max=h),u.count+=1)}),u.domain=[u.min,u.max],u.limits=function(h,_){return oa(u,h,_)},u},oa=function(n,s,u){s===void 0&&(s="equal"),u===void 0&&(u=7),Jr(n)=="array"&&(n=ia(n));var h=n.min,_=n.max,k=n.values.sort(function(Kr,en){return Kr-en});if(u===1)return[h,_];var d=[];if(s.substr(0,1)==="c"&&(d.push(h),d.push(_)),s.substr(0,1)==="e"){d.push(h);for(var $=1;$<u;$++)d.push(h+$/u*(_-h));d.push(_)}else if(s.substr(0,1)==="l"){if(h<=0)throw new Error("Logarithmic scales are only possible for values > 0");var y=Math.LOG10E*la(h),I=Math.LOG10E*la(_);d.push(h);for(var F=1;F<u;F++)d.push(Zo(10,y+F/u*(I-y)));d.push(_)}else if(s.substr(0,1)==="q"){d.push(h);for(var q=1;q<u;q++){var T=(k.length-1)*q/u,Y=Ko(T);if(Y===T)d.push(k[Y]);else{var H=T-Y;d.push(k[Y]*(1-H)+k[Y+1]*H)}}d.push(_)}else if(s.substr(0,1)==="k"){var ue,me=k.length,we=new Array(me),Ce=new Array(u),et=!0,Je=0,pt=null;pt=[],pt.push(h);for(var ke=1;ke<u;ke++)pt.push(h+ke/u*(_-h));for(pt.push(_);et;){for(var R=0;R<u;R++)Ce[R]=0;for(var se=0;se<me;se++)for(var de=k[se],ce=Number.MAX_VALUE,tt=void 0,Ne=0;Ne<u;Ne++){var $e=ef(pt[Ne]-de);$e<ce&&(ce=$e,tt=Ne),Ce[tt]++,we[se]=tt}for(var Ie=new Array(u),Se=0;Se<u;Se++)Ie[Se]=null;for(var Le=0;Le<me;Le++)ue=we[Le],Ie[ue]===null?Ie[ue]=k[Le]:Ie[ue]+=k[Le];for(var It=0;It<u;It++)Ie[It]*=1/Ce[It];et=!1;for(var Nt=0;Nt<u;Nt++)if(Ie[Nt]!==pt[Nt]){et=!0;break}pt=Ie,Je++,Je>200&&(et=!1)}for(var zt={},er=0;er<u;er++)zt[er]=[];for(var tr=0;tr<me;tr++)ue=we[tr],zt[ue].push(k[tr]);for(var Dt=[],Wt=0;Wt<u;Wt++)Dt.push(zt[Wt][0]),Dt.push(zt[Wt][zt[Wt].length-1]);Dt=Dt.sort(function(Kr,en){return Kr-en}),d.push(Dt[0]);for(var gr=1;gr<Dt.length;gr+=2){var qt=Dt[gr];!isNaN(qt)&&d.indexOf(qt)===-1&&d.push(qt)}}return d},fa={analyze:ia,limits:oa},ua=A,tf=function(n,s){n=new ua(n),s=new ua(s);var u=n.luminance(),h=s.luminance();return u>h?(u+.05)/(h+.05):(h+.05)/(u+.05)},ca=A,Rt=Math.sqrt,Qe=Math.pow,rf=Math.min,nf=Math.max,ha=Math.atan2,ga=Math.abs,yr=Math.cos,pa=Math.sin,af=Math.exp,va=Math.PI,sf=function(n,s,u,h,_){u===void 0&&(u=1),h===void 0&&(h=1),_===void 0&&(_=1);var k=function(qt){return 360*qt/(2*va)},d=function(qt){return 2*va*qt/360};n=new ca(n),s=new ca(s);var $=Array.from(n.lab()),y=$[0],I=$[1],F=$[2],q=Array.from(s.lab()),T=q[0],Y=q[1],H=q[2],ue=(y+T)/2,me=Rt(Qe(I,2)+Qe(F,2)),we=Rt(Qe(Y,2)+Qe(H,2)),Ce=(me+we)/2,et=.5*(1-Rt(Qe(Ce,7)/(Qe(Ce,7)+Qe(25,7)))),Je=I*(1+et),pt=Y*(1+et),ke=Rt(Qe(Je,2)+Qe(F,2)),R=Rt(Qe(pt,2)+Qe(H,2)),se=(ke+R)/2,de=k(ha(F,Je)),ce=k(ha(H,pt)),tt=de>=0?de:de+360,Ne=ce>=0?ce:ce+360,$e=ga(tt-Ne)>180?(tt+Ne+360)/2:(tt+Ne)/2,Ie=1-.17*yr(d($e-30))+.24*yr(d(2*$e))+.32*yr(d(3*$e+6))-.2*yr(d(4*$e-63)),Se=Ne-tt;Se=ga(Se)<=180?Se:Ne<=tt?Se+360:Se-360,Se=2*Rt(ke*R)*pa(d(Se)/2);var Le=T-y,It=R-ke,Nt=1+.015*Qe(ue-50,2)/Rt(20+Qe(ue-50,2)),zt=1+.045*se,er=1+.015*se*Ie,tr=30*af(-Qe(($e-275)/25,2)),Dt=2*Rt(Qe(se,7)/(Qe(se,7)+Qe(25,7))),Wt=-Dt*pa(2*d(tr)),gr=Rt(Qe(Le/(u*Nt),2)+Qe(It/(h*zt),2)+Qe(Se/(_*er),2)+Wt*(It/(h*zt))*(Se/(_*er)));return nf(0,rf(100,gr))},da=A,lf=function(n,s,u){u===void 0&&(u="lab"),n=new da(n),s=new da(s);var h=n.get(u),_=s.get(u),k=0;for(var d in h){var $=(h[d]||0)-(_[d]||0);k+=$*$}return Math.sqrt(k)},of=A,ff=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];try{return new(Function.prototype.bind.apply(of,[null].concat(n))),!0}catch{return!1}},ma=b,ba=Yr,uf={cool:function(){return ba([ma.hsl(180,1,.9),ma.hsl(250,.7,.4)])},hot:function(){return ba(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Cr={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Zr=0,_a=Object.keys(Cr);Zr<_a.length;Zr+=1){var ka=_a[Zr];Cr[ka.toLowerCase()]=Cr[ka]}var cf=Cr,Xe=b;Xe.average=Co,Xe.bezier=Ao,Xe.blend=Bo,Xe.cubehelix=Ho,Xe.mix=Xe.interpolate=Xn,Xe.random=Jo,Xe.scale=Yr,Xe.analyze=fa.analyze,Xe.contrast=tf,Xe.deltaE=sf,Xe.distance=lf,Xe.limits=fa.limits,Xe.valid=ff,Xe.scales=uf,Xe.colors=Tn,Xe.brewer=cf;var hf=Xe;return hf})})(ps);var ku=ps.exports;const rr=fs(ku);function wu(i){let e,t,a,r,l,o,c,f;return{c(){e=Z("div"),t=Z("label"),a=Be(i[1]),r=Be(":"),l=be(),o=Z("input"),this.h()},l(g){e=K(g,"DIV",{class:!0});var p=j(e);t=K(p,"LABEL",{class:!0});var v=j(t);a=Ue(v,i[1]),r=Ue(v,":"),v.forEach(C),l=_e(p),o=K(p,"INPUT",{type:!0,name:!0,id:!0,class:!0}),p.forEach(C),this.h()},h(){E(t,"class","pr-2 text-xs text-neutral-400 text-right"),E(o,"type","color"),E(o,"name",i[1]),E(o,"id",i[1]),E(o,"class","emboss py-1 px-2 bg-neutral-700 border border-neutral-800 text-xs text-neutral-200"),E(e,"class","flex items-center")},m(g,p){Q(g,e,p),z(e,t),z(t,a),z(t,r),z(e,l),z(e,o),wa(o,i[0]),c||(f=[wt(o,"input",i[2]),wt(o,"input",i[3])],c=!0)},p(g,[p]){p&2&&$t(a,g[1]),p&2&&E(o,"name",g[1]),p&2&&E(o,"id",g[1]),p&1&&wa(o,g[0])},i:We,o:We,d(g){g&&C(e),c=!1,rn(f)}}}function $u(i,e,t){let{name:a}=e,{value:r="#0000FF"}=e;const l=pr();function o(f){if(f.target){const g=f.target;l("change",g.value)}}function c(){r=this.value,t(0,r)}return i.$$set=f=>{"name"in f&&t(1,a=f.name),"value"in f&&t(0,r=f.value)},[r,a,o,c]}class yu extends rt{constructor(e){super(),nt(this,e,$u,wu,Ge,{name:1,value:0})}}function Cu(i){let e,t,a,r,l,o={personaSide:`${i[4]}Front`};t=new nr({props:o}),i[10](t),t.$on("ready",i[8]);let c={personaSide:`${i[4]}Back`};return r=new nr({props:c}),i[11](r),r.$on("ready",i[8]),{c(){e=Z("div"),he(t.$$.fragment),a=be(),he(r.$$.fragment),this.h()},l(f){e=K(f,"DIV",{class:!0});var g=j(e);ge(t.$$.fragment,g),a=_e(g),ge(r.$$.fragment,g),g.forEach(C),this.h()},h(){E(e,"class","flex w-full h-full")},m(f,g){Q(f,e,g),pe(t,e,null),z(e,a),pe(r,e,null),l=!0},p(f,g){const p={};g&16&&(p.personaSide=`${f[4]}Front`),t.$set(p);const v={};g&16&&(v.personaSide=`${f[4]}Back`),r.$set(v)},i(f){l||(P(t.$$.fragment,f),P(r.$$.fragment,f),l=!0)},o(f){U(t.$$.fragment,f),U(r.$$.fragment,f),l=!1},d(f){f&&C(e),i[10](null),ve(t),i[11](null),ve(r)}}}function Eu(i){let e,t;return e=new fr({props:{tabs:["Female","Male"],activeTab:i[4],caption:"Density Map",$$slots:{default:[Cu]},$$scope:{ctx:i}}}),e.$on("tabClick",i[7]),{c(){he(e.$$.fragment)},l(a){ge(e.$$.fragment,a)},m(a,r){pe(e,a,r),t=!0},p(a,r){const l={};r&16&&(l.activeTab=a[4]),r&4194332&&(l.$$scope={dirty:r,ctx:a}),e.$set(l)},i(a){t||(P(e.$$.fragment,a),t=!0)},o(a){U(e.$$.fragment,a),t=!1},d(a){ve(e,a)}}}function Mu(i){let e,t,a,r,l,o,c,f,g,p;return a=new yu({props:{value:i[1],name:"Color"}}),a.$on("change",i[6]),o=new jt({props:{name:"Participants count",label:Object.keys(i[0].participants).length.toString()}}),g=new jt({props:{name:`${i[4]} participants count`,label:i[5].toString()}}),{c(){e=Z("ul"),t=Z("li"),he(a.$$.fragment),r=be(),l=Z("li"),he(o.$$.fragment),c=be(),f=Z("li"),he(g.$$.fragment),this.h()},l(v){e=K(v,"UL",{class:!0});var w=j(e);t=K(w,"LI",{});var D=j(t);ge(a.$$.fragment,D),D.forEach(C),r=_e(w),l=K(w,"LI",{});var G=j(l);ge(o.$$.fragment,G),G.forEach(C),c=_e(w),f=K(w,"LI",{});var S=j(f);ge(g.$$.fragment,S),S.forEach(C),w.forEach(C),this.h()},h(){E(e,"class","p-2")},m(v,w){Q(v,e,w),z(e,t),pe(a,t,null),z(e,r),z(e,l),pe(o,l,null),z(e,c),z(e,f),pe(g,f,null),p=!0},p(v,w){const D={};w&2&&(D.value=v[1]),a.$set(D);const G={};w&1&&(G.label=Object.keys(v[0].participants).length.toString()),o.$set(G);const S={};w&16&&(S.name=`${v[4]} participants count`),w&32&&(S.label=v[5].toString()),g.$set(S)},i(v){p||(P(a.$$.fragment,v),P(o.$$.fragment,v),P(g.$$.fragment,v),p=!0)},o(v){U(a.$$.fragment,v),U(o.$$.fragment,v),U(g.$$.fragment,v),p=!1},d(v){v&&C(e),ve(a),ve(o),ve(g)}}}function Iu(i){let e,t;return e=new fr({props:{tabs:["Details"],highlightTab:!1,$$slots:{default:[Mu]},$$scope:{ctx:i}}}),{c(){he(e.$$.fragment)},l(a){ge(e.$$.fragment,a)},m(a,r){pe(e,a,r),t=!0},p(a,r){const l={};r&4194355&&(l.$$scope={dirty:r,ctx:a}),e.$set(l)},i(a){t||(P(e.$$.fragment,a),t=!0)},o(a){U(e.$$.fragment,a),t=!1},d(a){ve(e,a)}}}function Za(i){let e,t;return e=new sn({props:{$$slots:{settings:[Iu],panels:[Eu]},$$scope:{ctx:i}}}),{c(){he(e.$$.fragment)},l(a){ge(e.$$.fragment,a)},m(a,r){pe(e,a,r),t=!0},p(a,r){const l={};r&4194367&&(l.$$scope={dirty:r,ctx:a}),e.$set(l)},i(a){t||(P(e.$$.fragment,a),t=!0)},o(a){U(e.$$.fragment,a),t=!1},d(a){ve(e,a)}}}function Su(i){let e=i[4],t,a,r=Za(i);return{c(){r.c(),t=Ke()},l(l){r.l(l),t=Ke()},m(l,o){r.m(l,o),Q(l,t,o),a=!0},p(l,[o]){o&16&&Ge(e,e=l[4])?(ft(),U(r,1,1,We),ut(),r=Za(l),r.c(),P(r,1),r.m(t.parentNode,t)):r.p(l,o)},i(l){a||(P(r),a=!0)},o(l){U(r),a=!1},d(l){l&&C(t),r.d(l)}}}function Fu(i,e,t){let a,{survey:r}=e,l,o,c="Female",f="#0000ff",g,p,v=0,w=0;const D=new Worker(new URL(""+new URL("../workers/binning.worker-0c4c5efe.js",import.meta.url).href,self.location),{type:"module"});function G(){return[{name:`DensityMap-${c}Front.png`,dataUrl:l.getImage()},{name:`DensityMap-${c}Back.png`,dataUrl:o.getImage()}]}function S(m){const M=[];for(const O of Object.values(r.participants)){const W=O.drawing[m];W&&M.push(W)}x(m,"Grouping drawings"),m.includes("Female"),t(5,v=M.length),v>0?(x(m,"Waiting"),D.postMessage({command:"getBins",params:{drawings:M,side:m.includes("Front")?"Front":"Back"}})):(w--,A(m))}function ee(m,M){let O,W;const te=a.domain([0,v]);x(m,"Drawing density map"),m==="Front"?(O=l.getCanvas(),W=l.getScaleFactor(),l.clear()):(O=o.getCanvas(),W=o.getScaleFactor(),o.clear());const oe=O.getContext("2d");if(oe==null)throw"Could not get context to draw density map.";for(let Re of M)oe.fillStyle=te(Re.length).hex(),oe.fillRect(Re.x*W,Re.y*W,W,W);A(m)}function le({detail:m}){t(1,f=m),ee("Front",g),ee("Back",p)}function ie({detail:m}){if(w>0){alert("Please wait until computations have completed.");return}t(4,c=m)}function N(m){const{personaSide:M}=m.detail;x(M,"Starting density computation"),w++,S(M)}function L(){D.onmessage=m=>{if(m.data.event==="bins"){const{side:M,bins:O}=m.data.params;M==="Front"?g=O:p=O,w--,ee(M,O)}else if(m.data.event==="progress"){const{side:M,msg:O}=m.data.params;x(M,O)}}}function x(m,M){m.includes("Front")?l.setMessage(M):o.setMessage(M)}function A(m){m.includes("Front")?l.clearMessage():o.clearMessage()}Ir(()=>{L()});function X(m){lt[m?"unshift":"push"](()=>{l=m,t(2,l)})}function b(m){lt[m?"unshift":"push"](()=>{o=m,t(3,o)})}return i.$$set=m=>{"survey"in m&&t(0,r=m.survey)},i.$$.update=()=>{i.$$.dirty&2&&(a=rr.scale([rr(f).alpha(0),rr(f)]))},[r,f,l,o,c,v,le,ie,N,G,X,b]}class Lu extends rt{constructor(e){super(),nt(this,e,Fu,Su,Ge,{survey:0,getImages:9})}get survey(){return this.$$.ctx[0]}set survey(e){this.$$set({survey:e}),is()}get getImages(){return this.$$.ctx[9]}}function Au(i){let e,t,a,r,l,o={personaSide:`${i[3]}Front`};t=new nr({props:o}),i[8](t),t.$on("ready",i[6]);let c={personaSide:`${i[3]}Back`};return r=new nr({props:c}),i[9](r),r.$on("ready",i[6]),{c(){e=Z("div"),he(t.$$.fragment),a=be(),he(r.$$.fragment),this.h()},l(f){e=K(f,"DIV",{class:!0});var g=j(e);ge(t.$$.fragment,g),a=_e(g),ge(r.$$.fragment,g),g.forEach(C),this.h()},h(){E(e,"class","flex w-full h-full")},m(f,g){Q(f,e,g),pe(t,e,null),z(e,a),pe(r,e,null),l=!0},p(f,g){const p={};g&8&&(p.personaSide=`${f[3]}Front`),t.$set(p);const v={};g&8&&(v.personaSide=`${f[3]}Back`),r.$set(v)},i(f){l||(P(t.$$.fragment,f),P(r.$$.fragment,f),l=!0)},o(f){U(t.$$.fragment,f),U(r.$$.fragment,f),l=!1},d(f){f&&C(e),i[8](null),ve(t),i[9](null),ve(r)}}}function Tu(i){let e,t;return e=new fr({props:{tabs:["Female","Male"],activeTab:i[3],caption:"Valence Map",$$slots:{default:[Au]},$$scope:{ctx:i}}}),e.$on("tabClick",i[5]),{c(){he(e.$$.fragment)},l(a){ge(e.$$.fragment,a)},m(a,r){pe(e,a,r),t=!0},p(a,r){const l={};r&8&&(l.activeTab=a[3]),r&524302&&(l.$$scope={dirty:r,ctx:a}),e.$set(l)},i(a){t||(P(e.$$.fragment,a),t=!0)},o(a){U(e.$$.fragment,a),t=!1},d(a){ve(e,a)}}}function Ru(i){let e,t,a,r,l,o,c;return a=new jt({props:{name:"Participants count",label:Object.keys(i[0].participants).length.toString()}}),o=new jt({props:{name:`${i[3]} participants count`,label:i[4].toString()}}),{c(){e=Z("ul"),t=Z("li"),he(a.$$.fragment),r=be(),l=Z("li"),he(o.$$.fragment),this.h()},l(f){e=K(f,"UL",{class:!0});var g=j(e);t=K(g,"LI",{});var p=j(t);ge(a.$$.fragment,p),p.forEach(C),r=_e(g),l=K(g,"LI",{});var v=j(l);ge(o.$$.fragment,v),v.forEach(C),g.forEach(C),this.h()},h(){E(e,"class","p-2")},m(f,g){Q(f,e,g),z(e,t),pe(a,t,null),z(e,r),z(e,l),pe(o,l,null),c=!0},p(f,g){const p={};g&1&&(p.label=Object.keys(f[0].participants).length.toString()),a.$set(p);const v={};g&8&&(v.name=`${f[3]} participants count`),g&16&&(v.label=f[4].toString()),o.$set(v)},i(f){c||(P(a.$$.fragment,f),P(o.$$.fragment,f),c=!0)},o(f){U(a.$$.fragment,f),U(o.$$.fragment,f),c=!1},d(f){f&&C(e),ve(a),ve(o)}}}function Du(i){let e,t;return e=new fr({props:{tabs:["Details"],highlightTab:!1,$$slots:{default:[Ru]},$$scope:{ctx:i}}}),{c(){he(e.$$.fragment)},l(a){ge(e.$$.fragment,a)},m(a,r){pe(e,a,r),t=!0},p(a,r){const l={};r&524313&&(l.$$scope={dirty:r,ctx:a}),e.$set(l)},i(a){t||(P(e.$$.fragment,a),t=!0)},o(a){U(e.$$.fragment,a),t=!1},d(a){ve(e,a)}}}function Ka(i){let e,t;return e=new sn({props:{$$slots:{settings:[Du],panels:[Tu]},$$scope:{ctx:i}}}),{c(){he(e.$$.fragment)},l(a){ge(e.$$.fragment,a)},m(a,r){pe(e,a,r),t=!0},p(a,r){const l={};r&524319&&(l.$$scope={dirty:r,ctx:a}),e.$set(l)},i(a){t||(P(e.$$.fragment,a),t=!0)},o(a){U(e.$$.fragment,a),t=!1},d(a){ve(e,a)}}}function Ou(i){let e=i[3],t,a,r=Ka(i);return{c(){r.c(),t=Ke()},l(l){r.l(l),t=Ke()},m(l,o){r.m(l,o),Q(l,t,o),a=!0},p(l,[o]){o&8&&Ge(e,e=l[3])?(ft(),U(r,1,1,We),ut(),r=Ka(l),r.c(),P(r,1),r.m(t.parentNode,t)):r.p(l,o)},i(l){a||(P(r),a=!0)},o(l){U(r),a=!1},d(l){l&&C(t),r.d(l)}}}let Pu=1,Nu=1;function zu(i,e,t){let{survey:a}=e,r,l,o="Female",c=0,f=0;const g=new Worker(new URL(""+new URL("../workers/binning.worker-0c4c5efe.js",import.meta.url).href,self.location),{type:"module"});function p(){return[{name:`ValenceMap-${o}Front.png`,dataUrl:r.getImage()},{name:`ValenceMap-${o}Back.png`,dataUrl:l.getImage()}]}function v(L){const x=[];for(const A of Object.values(a.participants)){const X=A.drawing[L];X&&x.push(X)}t(4,c=x.length),c>0?(ee(L,"Waiting"),g.postMessage({command:"getBins",params:{drawings:x,side:L.includes("Front")?"Front":"Back"}})):(f--,L.includes("Front")?r.clearMessage():l.clearMessage())}function w(L,x){const X=rr.scale(["red","green"]).domain([1,11]);let b,m;ee(L,"Drawing valence map"),L==="Front"?(b=r.getCanvas(),m=r.getScaleFactor()):(b=l.getCanvas(),m=l.getScaleFactor());const M=b.getContext("2d");if(M==null)throw"Could not get context to draw density map.";for(let O of x){const W=O.map(B=>B.valence),te=O.map(B=>B.intensity),oe=W.reduce((B,ae)=>B+ae,0)/O.length,Re=te.reduce((B,ae)=>B+ae,0)/O.length,Ae=X(oe),ne=rr.scale(["white",Ae]).domain([1,11])(Re),V=rr.scale([ne.alpha(0),ne]).domain([0,c])(O.length);M.fillStyle=V.hex(),M.fillRect(O.x*m,O.y*m,Pu,Nu)}le(L)}function D({detail:L}){if(f>0){alert("Please wait until computations have completed.");return}t(3,o=L)}function G(L){const{personaSide:x,width:A,height:X}=L.detail;ee(x,"Starting valence map computation"),f++,v(x)}function S(){g.onmessage=L=>{if(L.data.event==="bins"){const{side:x,bins:A}=L.data.params;x==="Front"?r.clearMessage():l.clearMessage(),f--,w(x,A)}else if(L.data.event==="progress"){const{side:x,msg:A}=L.data.params;ee(x,A)}}}function ee(L,x){L.includes("Front")?r.setMessage(x):l.setMessage(x)}function le(L){L.includes("Front")?r.clearMessage():l.clearMessage()}Ir(()=>{S()});function ie(L){lt[L?"unshift":"push"](()=>{r=L,t(1,r)})}function N(L){lt[L?"unshift":"push"](()=>{l=L,t(2,l)})}return i.$$set=L=>{"survey"in L&&t(0,a=L.survey)},[a,r,l,o,c,D,G,p,ie,N]}class xu extends rt{constructor(e){super(),nt(this,e,zu,Ou,Ge,{survey:0,getImages:7})}get getImages(){return this.$$.ctx[7]}}function Bu(i){let e,t,a,r,l;return{c(){e=Z("div"),t=Z("button"),a=Be("Load Survey Data"),this.h()},l(o){e=K(o,"DIV",{class:!0});var c=j(e);t=K(c,"BUTTON",{class:!0});var f=j(t);a=Ue(f,"Load Survey Data"),f.forEach(C),c.forEach(C),this.h()},h(){E(t,"class","py-1 px-2 bg-neutral-600 hover:bg-neutral-700 border border-neutral-900 shadow text-neutral-100 text-xs"),E(e,"class","flex items-center justify-center w-full h-full bg-neutral-800")},m(o,c){Q(o,e,c),z(e,t),z(t,a),r||(l=wt(t,"click",i[0]),r=!0)},p:We,i:We,o:We,d(o){o&&C(e),r=!1,l()}}}function Uu(i){function e(t){Er.call(this,i,t)}return[e]}class Wu extends rt{constructor(e){super(),nt(this,e,Uu,Bu,Ge,{})}}function es(i){let e,t,a={title:"Project",$$slots:{default:[Yu]},$$scope:{ctx:i}};return e=new gs({props:a}),i[16](e),{c(){he(e.$$.fragment)},l(r){ge(e.$$.fragment,r)},m(r,l){pe(e,r,l),t=!0},p(r,l){const o={};l[0]&4|l[1]&64&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){t||(P(e.$$.fragment,r),t=!0)},o(r){U(e.$$.fragment,r),t=!1},d(r){i[16](null),ve(e,r)}}}function qu(i){let e;return{c(){e=Be("Load Survey Data")},l(t){e=Ue(t,"Load Survey Data")},m(t,a){Q(t,e,a)},d(t){t&&C(e)}}}function ts(i){let e,t,a,r,l,o,c,f,g,p;return e=new xt({props:{$$slots:{default:[ju]},$$scope:{ctx:i}}}),e.$on("click",i[13]),a=new xt({props:{$$slots:{default:[Gu]},$$scope:{ctx:i}}}),a.$on("click",i[14]),l=new xt({props:{$$slots:{default:[Hu]},$$scope:{ctx:i}}}),l.$on("click",i[15]),c=new Nf({}),g=new xt({props:{$$slots:{default:[Vu]},$$scope:{ctx:i}}}),g.$on("click",i[10]),{c(){he(e.$$.fragment),t=be(),he(a.$$.fragment),r=be(),he(l.$$.fragment),o=be(),he(c.$$.fragment),f=be(),he(g.$$.fragment)},l(v){ge(e.$$.fragment,v),t=_e(v),ge(a.$$.fragment,v),r=_e(v),ge(l.$$.fragment,v),o=_e(v),ge(c.$$.fragment,v),f=_e(v),ge(g.$$.fragment,v)},m(v,w){pe(e,v,w),Q(v,t,w),pe(a,v,w),Q(v,r,w),pe(l,v,w),Q(v,o,w),pe(c,v,w),Q(v,f,w),pe(g,v,w),p=!0},p(v,w){const D={};w[1]&64&&(D.$$scope={dirty:w,ctx:v}),e.$set(D);const G={};w[1]&64&&(G.$$scope={dirty:w,ctx:v}),a.$set(G);const S={};w[1]&64&&(S.$$scope={dirty:w,ctx:v}),l.$set(S);const ee={};w[1]&64&&(ee.$$scope={dirty:w,ctx:v}),g.$set(ee)},i(v){p||(P(e.$$.fragment,v),P(a.$$.fragment,v),P(l.$$.fragment,v),P(c.$$.fragment,v),P(g.$$.fragment,v),p=!0)},o(v){U(e.$$.fragment,v),U(a.$$.fragment,v),U(l.$$.fragment,v),U(c.$$.fragment,v),U(g.$$.fragment,v),p=!1},d(v){ve(e,v),v&&C(t),ve(a,v),v&&C(r),ve(l,v),v&&C(o),ve(c,v),v&&C(f),ve(g,v)}}}function ju(i){let e;return{c(){e=Be("Export images")},l(t){e=Ue(t,"Export images")},m(t,a){Q(t,e,a)},d(t){t&&C(e)}}}function Gu(i){let e;return{c(){e=Be("Export strokes")},l(t){e=Ue(t,"Export strokes")},m(t,a){Q(t,e,a)},d(t){t&&C(e)}}}function Hu(i){let e;return{c(){e=Be("Export pixel maps")},l(t){e=Ue(t,"Export pixel maps")},m(t,a){Q(t,e,a)},d(t){t&&C(e)}}}function Vu(i){let e;return{c(){e=Be("Close project")},l(t){e=Ue(t,"Close project")},m(t,a){Q(t,e,a)},d(t){t&&C(e)}}}function Yu(i){let e,t,a,r;e=new xt({props:{$$slots:{default:[qu]},$$scope:{ctx:i}}}),e.$on("click",i[9]);let l=i[2]&&ts(i);return{c(){he(e.$$.fragment),t=be(),l&&l.c(),a=Ke()},l(o){ge(e.$$.fragment,o),t=_e(o),l&&l.l(o),a=Ke()},m(o,c){pe(e,o,c),Q(o,t,c),l&&l.m(o,c),Q(o,a,c),r=!0},p(o,c){const f={};c[1]&64&&(f.$$scope={dirty:c,ctx:o}),e.$set(f),o[2]?l?(l.p(o,c),c[0]&4&&P(l,1)):(l=ts(o),l.c(),P(l,1),l.m(a.parentNode,a)):l&&(ft(),U(l,1,1,()=>{l=null}),ut())},i(o){r||(P(e.$$.fragment,o),P(l),r=!0)},o(o){U(e.$$.fragment,o),U(l),r=!1},d(o){ve(e,o),o&&C(t),l&&l.d(o),o&&C(a)}}}function rs(i){let e,t,a={title:"Tools",enableIcon:!0,$$slots:{default:[tc]},$$scope:{ctx:i}};return e=new gs({props:a}),i[20](e),{c(){he(e.$$.fragment)},l(r){ge(e.$$.fragment,r)},m(r,l){pe(e,r,l),t=!0},p(r,l){const o={};l[0]&64|l[1]&64&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){t||(P(e.$$.fragment,r),t=!0)},o(r){U(e.$$.fragment,r),t=!1},d(r){i[20](null),ve(e,r)}}}function Qu(i){let e=Ze.LookingGlass+"",t;return{c(){t=Be(e)},l(a){t=Ue(a,e)},m(a,r){Q(a,t,r)},p:We,d(a){a&&C(t)}}}function Xu(i){let e,t,a;return{c(){e=ct("svg"),t=ct("path"),a=ct("path"),this.h()},l(r){e=ht(r,"svg",{slot:!0,xmlns:!0,width:!0,height:!0,viewBox:!0,"stroke-width":!0,stroke:!0,fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0});var l=j(e);t=ht(l,"path",{stroke:!0,d:!0,fill:!0}),j(t).forEach(C),a=ht(l,"path",{d:!0}),j(a).forEach(C),l.forEach(C),this.h()},h(){E(t,"stroke","none"),E(t,"d","M0 0h24v24H0z"),E(t,"fill","none"),E(a,"d","M5 12l5 5l10 -10"),E(e,"slot","icon"),E(e,"xmlns","http://www.w3.org/2000/svg"),E(e,"width","14"),E(e,"height","14"),E(e,"viewBox","0 0 24 24"),E(e,"stroke-width","2"),E(e,"stroke","currentColor"),E(e,"fill","none"),E(e,"stroke-linecap","round"),E(e,"stroke-linejoin","round"),vt(e,"hidden",!i[36])},m(r,l){Q(r,e,l),z(e,t),z(e,a)},p(r,l){l[1]&32&&vt(e,"hidden",!r[36])},d(r){r&&C(e)}}}function Ju(i){let e=Ze.DensityMap+"",t;return{c(){t=Be(e)},l(a){t=Ue(a,e)},m(a,r){Q(a,t,r)},p:We,d(a){a&&C(t)}}}function Zu(i){let e,t,a;return{c(){e=ct("svg"),t=ct("path"),a=ct("path"),this.h()},l(r){e=ht(r,"svg",{slot:!0,xmlns:!0,width:!0,height:!0,viewBox:!0,"stroke-width":!0,stroke:!0,fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0});var l=j(e);t=ht(l,"path",{stroke:!0,d:!0,fill:!0}),j(t).forEach(C),a=ht(l,"path",{d:!0}),j(a).forEach(C),l.forEach(C),this.h()},h(){E(t,"stroke","none"),E(t,"d","M0 0h24v24H0z"),E(t,"fill","none"),E(a,"d","M5 12l5 5l10 -10"),E(e,"slot","icon"),E(e,"xmlns","http://www.w3.org/2000/svg"),E(e,"width","16"),E(e,"height","16"),E(e,"viewBox","0 0 24 24"),E(e,"stroke-width","2"),E(e,"stroke","currentColor"),E(e,"fill","none"),E(e,"stroke-linecap","round"),E(e,"stroke-linejoin","round"),vt(e,"hidden",!i[36])},m(r,l){Q(r,e,l),z(e,t),z(e,a)},p(r,l){l[1]&32&&vt(e,"hidden",!r[36])},d(r){r&&C(e)}}}function Ku(i){let e=Ze.ValenceMap+"",t;return{c(){t=Be(e)},l(a){t=Ue(a,e)},m(a,r){Q(a,t,r)},p:We,d(a){a&&C(t)}}}function ec(i){let e,t,a;return{c(){e=ct("svg"),t=ct("path"),a=ct("path"),this.h()},l(r){e=ht(r,"svg",{slot:!0,xmlns:!0,width:!0,height:!0,viewBox:!0,"stroke-width":!0,stroke:!0,fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0});var l=j(e);t=ht(l,"path",{stroke:!0,d:!0,fill:!0}),j(t).forEach(C),a=ht(l,"path",{d:!0}),j(a).forEach(C),l.forEach(C),this.h()},h(){E(t,"stroke","none"),E(t,"d","M0 0h24v24H0z"),E(t,"fill","none"),E(a,"d","M5 12l5 5l10 -10"),E(e,"slot","icon"),E(e,"xmlns","http://www.w3.org/2000/svg"),E(e,"width","16"),E(e,"height","16"),E(e,"viewBox","0 0 24 24"),E(e,"stroke-width","2"),E(e,"stroke","currentColor"),E(e,"fill","none"),E(e,"stroke-linecap","round"),E(e,"stroke-linejoin","round"),vt(e,"hidden",!i[36])},m(r,l){Q(r,e,l),z(e,t),z(e,a)},p(r,l){l[1]&32&&vt(e,"hidden",!r[36])},d(r){r&&C(e)}}}function tc(i){let e,t,a,r,l,o;return e=new xt({props:{isActive:i[6]===Ze.LookingGlass,$$slots:{icon:[Xu,({isActive:c})=>({36:c}),({isActive:c})=>[0,c?32:0]],default:[Qu]},$$scope:{ctx:i}}}),e.$on("click",i[17]),a=new xt({props:{isActive:i[6]===Ze.DensityMap,$$slots:{icon:[Zu,({isActive:c})=>({36:c}),({isActive:c})=>[0,c?32:0]],default:[Ju]},$$scope:{ctx:i}}}),a.$on("click",i[18]),l=new xt({props:{isActive:i[6]===Ze.ValenceMap,$$slots:{icon:[ec,({isActive:c})=>({36:c}),({isActive:c})=>[0,c?32:0]],default:[Ku]},$$scope:{ctx:i}}}),l.$on("click",i[19]),{c(){he(e.$$.fragment),t=be(),he(a.$$.fragment),r=be(),he(l.$$.fragment)},l(c){ge(e.$$.fragment,c),t=_e(c),ge(a.$$.fragment,c),r=_e(c),ge(l.$$.fragment,c)},m(c,f){pe(e,c,f),Q(c,t,f),pe(a,c,f),Q(c,r,f),pe(l,c,f),o=!0},p(c,f){const g={};f[0]&64&&(g.isActive=c[6]===Ze.LookingGlass),f[1]&96&&(g.$$scope={dirty:f,ctx:c}),e.$set(g);const p={};f[0]&64&&(p.isActive=c[6]===Ze.DensityMap),f[1]&96&&(p.$$scope={dirty:f,ctx:c}),a.$set(p);const v={};f[0]&64&&(v.isActive=c[6]===Ze.ValenceMap),f[1]&96&&(v.$$scope={dirty:f,ctx:c}),l.$set(v)},i(c){o||(P(e.$$.fragment,c),P(a.$$.fragment,c),P(l.$$.fragment,c),o=!0)},o(c){U(e.$$.fragment,c),U(a.$$.fragment,c),U(l.$$.fragment,c),o=!1},d(c){ve(e,c),c&&C(t),ve(a,c),c&&C(r),ve(l,c)}}}function ns(i){let e,t,a,r,l,o;return{c(){e=Z("div"),t=ct("svg"),a=ct("circle"),r=ct("path"),l=be(),o=Be(i[8]),this.h()},l(c){e=K(c,"DIV",{class:!0});var f=j(e);t=ht(f,"svg",{class:!0,xmlns:!0,fill:!0,viewBox:!0});var g=j(t);a=ht(g,"circle",{class:!0,cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),j(a).forEach(C),r=ht(g,"path",{class:!0,fill:!0,d:!0}),j(r).forEach(C),g.forEach(C),l=_e(f),o=Ue(f,i[8]),f.forEach(C),this.h()},h(){E(a,"class","opacity-25"),E(a,"cx","12"),E(a,"cy","12"),E(a,"r","10"),E(a,"stroke","currentColor"),E(a,"stroke-width","4"),E(r,"class","opacity-75"),E(r,"fill","currentColor"),E(r,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),E(t,"class","animate-spin -ml-1 mr-3 h-5 w-5 text-white"),E(t,"xmlns","http://www.w3.org/2000/svg"),E(t,"fill","none"),E(t,"viewBox","0 0 24 24"),E(e,"class","z-20 absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 flex items-center justify-center py-2 px-4 bg-neutral-800 text-neutral-400")},m(c,f){Q(c,e,f),z(e,t),z(t,a),z(t,r),z(e,l),z(e,o)},p(c,f){f[0]&256&&$t(o,c[8])},d(c){c&&C(e)}}}function as(i){let e,t;return e=new Wu({}),e.$on("click",i[9]),{c(){he(e.$$.fragment)},l(a){ge(e.$$.fragment,a)},m(a,r){pe(e,a,r),t=!0},p:We,i(a){t||(P(e.$$.fragment,a),t=!0)},o(a){U(e.$$.fragment,a),t=!1},d(a){ve(e,a)}}}function rc(i){let e,t,a,r,l,o,c,f,g,p,v,w,D,G,S,ee,le=i[3]===!1&&es(i),ie=i[2]&&rs(i),N=i[3]&&ns(i),L=i[7]===void 0&&as(i);return{c(){e=Z("section"),t=Z("header"),le&&le.c(),a=be(),ie&&ie.c(),r=be(),l=Z("span"),o=be(),c=Z("h1"),f=Be("InteroMap"),g=be(),p=Z("main"),N&&N.c(),v=be(),L&&L.c(),w=be(),D=Z("input"),this.h()},l(x){e=K(x,"SECTION",{class:!0});var A=j(e);t=K(A,"HEADER",{class:!0});var X=j(t);le&&le.l(X),a=_e(X),ie&&ie.l(X),r=_e(X),l=K(X,"SPAN",{class:!0}),j(l).forEach(C),o=_e(X),c=K(X,"H1",{class:!0,style:!0});var b=j(c);f=Ue(b,"InteroMap"),b.forEach(C),X.forEach(C),g=_e(A),p=K(A,"MAIN",{class:!0});var m=j(p);N&&N.l(m),v=_e(m),L&&L.l(m),m.forEach(C),A.forEach(C),w=_e(x),D=K(x,"INPUT",{type:!0,class:!0,accept:!0}),this.h()},h(){E(l,"class","flex-grow"),E(c,"class","flex items-center h-full px-2 bg-gradient-to-t from-orange-600 to-orange-500 text-neutral-100 font-bold text-xs lowercase tracking-wider"),tn(c,"font-variant","small-caps"),E(t,"class","emboss z-20 flex items-center bg-neutral-600 border-b border-neutral-800"),E(p,"class","relative row-start-2 row-end-4"),E(e,"class","app-layout w-screen h-screen svelte-14urve1"),E(D,"type","file"),E(D,"class","hidden"),E(D,"accept",".csv")},m(x,A){Q(x,e,A),z(e,t),le&&le.m(t,null),z(t,a),ie&&ie.m(t,null),z(t,r),z(t,l),z(t,o),z(t,c),z(c,f),z(e,g),z(e,p),N&&N.m(p,null),z(p,v),L&&L.m(p,null),i[21](p),Q(x,w,A),Q(x,D,A),i[22](D),G=!0,S||(ee=wt(D,"change",i[11]),S=!0)},p(x,A){x[3]===!1?le?(le.p(x,A),A[0]&8&&P(le,1)):(le=es(x),le.c(),P(le,1),le.m(t,a)):le&&(ft(),U(le,1,1,()=>{le=null}),ut()),x[2]?ie?(ie.p(x,A),A[0]&4&&P(ie,1)):(ie=rs(x),ie.c(),P(ie,1),ie.m(t,r)):ie&&(ft(),U(ie,1,1,()=>{ie=null}),ut()),x[3]?N?N.p(x,A):(N=ns(x),N.c(),N.m(p,v)):N&&(N.d(1),N=null),x[7]===void 0?L?(L.p(x,A),A[0]&128&&P(L,1)):(L=as(x),L.c(),P(L,1),L.m(p,null)):L&&(ft(),U(L,1,1,()=>{L=null}),ut())},i(x){G||(P(le),P(ie),P(L),G=!0)},o(x){U(le),U(ie),U(L),G=!1},d(x){x&&C(e),le&&le.d(),ie&&ie.d(),N&&N.d(),L&&L.d(),i[21](null),x&&C(w),x&&C(D),i[22](null),S=!1,ee()}}}function nc(i){return JSON.parse(i)}function ss(i,e){const t=document.createElement("a");t.href=e,t.target="_blank",t.download=i,t.click()}function ac(i,e,t){let a,r,l=!1,o=!1,c,f,g=Ze.LookingGlass,p=new Sf,v,w="Loading",D,G;function S(){r.click()}function ee(){v&&(v.$destroy(),t(7,v=void 0)),t(2,l=!1),t(3,o=!1),G=null}function le(){if(r.files&&r.files.length>0){if(ee(),G=prompt("Specify the Qualtrics variable you wish to load:"),G==null||G==="")throw alert("Error: You did not specify the Qualtrics variable."),ee(),"No Qualtrics variable specified. Aborting.";t(3,o=!0),ie(r.files[0])}}function ie(B){t(8,w="Reading file..."),$a.parse(B,{worker:!0,header:!0,step:N,complete:L})}function N(B){const ae=B.data;if(G&&G in ae&&"ResponseId"in ae)try{const fe=nc(ae[G]);if(Object.keys(fe).every(Ee=>["FemaleFront","FemaleBack","MaleFront","MaleBack"].includes(Ee))){const Ee=ae.ResponseId,ze=new If({id:Ee,drawing:fe});p.addParticipant(ze)}}catch{return}}function L(){if(Object.keys(p.participants).length===0){const B=`Sorry, we could not parse any InteroMap data from your file.
      Maybe the Qualtrics variable is incorrect?`;throw alert(B),ee(),B}t(7,v=m(Ze.LookingGlass))}function x(B){B!==g&&t(7,v=m(B)),c.close()}function A(B){return new _u({target:a,props:{survey:B}})}function X(B){return new Lu({target:a,props:{survey:B}})}function b(B){return new xu({target:a,props:{survey:B}})}function m(B){let ae;switch(v&&v.$destroy(),B){case Ze.LookingGlass:ae=A(p);break;case Ze.DensityMap:ae=X(p);break;case Ze.ValenceMap:ae=b(p);break;default:throw`Unknown tool: ${B}.`}return t(6,g=B),t(3,o=!1),t(2,l=!0),ae}function M(){const B=v==null?void 0:v.getImages();B==null||B.forEach(ae=>{ss(ae.name,ae.dataUrl)}),f.close()}function O(){const ae=document.createElement("canvas").transferControlToOffscreen(),fe=Object.values(p.participants).map(Fe=>({id:Fe.id,drawing:Fe.drawing}));D==null||D.postMessage({command:"get-areas",params:{data:fe,canvas:ae}},[ae])}function W(B){const fe=[["Participant ID","Stroke Valence","Stroke Intensity","Area (pixels)"]];for(const Ee of B)for(const ze in Ee.areas){const[re,ye]=ze.split(":");fe.push([Ee.id,re,ye,Ee.areas[ze].toString()])}const Fe=$a.unparse(fe);return"data:text/csv;base64,"+btoa(Fe)}function te(){O(),f.close(),t(3,o=!0),t(8,w="Exporting stroke areas...")}async function oe(){const B=await window.showSaveFilePicker({suggestedName:`pixel-maps-${G}.zip`});t(3,o=!0),t(8,w="Exporting pixel maps...");const fe=document.createElement("canvas").transferControlToOffscreen();D==null||D.postMessage({command:"get-pixelmaps-zip",params:{survey:p,fileHandle:B,canvas:fe}},[fe]),f.close()}async function Re(){const B=await ls(()=>import("../chunks/export.worker.48328b62.js"),[],import.meta.url);D=new B.default,D.onmessage=ae=>{if(ae.data.event==="pixelmaps-zip-progress"||ae.data.event==="areas-progress"){const{current:fe,total:Fe,msg:Ee}=ae.data.params;t(8,w=`(${Math.round(100*fe/Fe)}%) ${Ee}`)}else if(ae.data.event==="pixelmaps-done")t(3,o=!1);else if(ae.data.event==="areas-done"){const fe=ae.data.params,Fe=W(fe);ss("InteroMap-Strokes.csv",Fe),t(3,o=!1)}}}Ir(()=>{Re()});function Ae(B){lt[B?"unshift":"push"](()=>{f=B,t(5,f)})}const J=()=>x(Ze.LookingGlass),De=()=>x(Ze.DensityMap),ne=()=>x(Ze.ValenceMap);function at(B){lt[B?"unshift":"push"](()=>{c=B,t(4,c)})}function He(B){lt[B?"unshift":"push"](()=>{a=B,t(0,a)})}function V(B){lt[B?"unshift":"push"](()=>{r=B,t(1,r)})}return[a,r,l,o,c,f,g,v,w,S,ee,le,x,M,te,oe,Ae,J,De,ne,at,He,V]}class oc extends rt{constructor(e){super(),nt(this,e,ac,rc,Ge,{},null,[-1,-1])}}export{oc as default};
