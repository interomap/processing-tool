var cf=Object.defineProperty;var hf=(i,e,t)=>e in i?cf(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var At=(i,e,t)=>(hf(i,typeof e!="symbol"?e+"":e,t),t);import{_ as gf}from"../chunks/preload-helper.41c905a7.js";import{J as vf,S as rt,i as nt,s as Ge,k as Z,q as xe,a as de,l as K,m as j,r as Be,h as C,c as me,n as E,K as pt,b as Y,G as z,L as wt,u as $t,g as N,v as ft,d as x,f as ut,M as rn,N as pf,C as ar,D as sr,E as lr,F as ir,O as df,w as lt,P as mf,Q as Er,H as Ue,R as bf,p as tn,T as vr,e as Ke,U as or,V as Gt,y as ue,z as ce,A as he,W as nn,X as an,B as ge,Y as Mr,Z as _f,_ as ct,$ as ht,a0 as ss,o as Sr,a1 as wa}from"../chunks/index.61358ee6.js";var ls=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function is(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var os={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(i,e){(function(t,n){i.exports=n()})(ls,function t(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},a=!n.document&&!!n.postMessage,l=n.IS_PAPA_WORKER||!1,o={},c=0,f={parse:function(_,m){var M=(m=m||{}).dynamicTyping||!1;if(J(M)&&(m.dynamicTypingFunction=M,M={}),m.dynamicTyping=M,m.transform=!!J(m.transform)&&m.transform,m.worker&&f.WORKERS_SUPPORTED){var O=function(){if(!f.WORKERS_SUPPORTED)return!1;var ne=(Re=n.URL||n.webkitURL||null,Le=t.toString(),f.BLOB_URL||(f.BLOB_URL=Re.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Le,")();"],{type:"text/javascript"})))),ie=new n.Worker(ne),Re,Le;return ie.onmessage=ae,ie.id=c++,o[ie.id]=ie}();return O.userStep=m.step,O.userChunk=m.chunk,O.userComplete=m.complete,O.userError=m.error,m.step=J(m.step),m.chunk=J(m.chunk),m.complete=J(m.complete),m.error=J(m.error),delete m.worker,void O.postMessage({input:_,config:m,workerId:O.id})}var B=null;return f.NODE_STREAM_INPUT,typeof _=="string"?(_=function(ne){return ne.charCodeAt(0)===65279?ne.slice(1):ne}(_),B=m.download?new p(m):new P(m)):_.readable===!0&&J(_.read)&&J(_.on)?B=new q(m):(n.File&&_ instanceof File||_ instanceof Object)&&(B=new w(m)),B.stream(_)},unparse:function(_,m){var M=!1,O=!0,B=",",ne=`\r
`,ie='"',Re=ie+ie,Le=!1,X=null,Te=!1;(function(){if(typeof m=="object"){if(typeof m.delimiter!="string"||f.BAD_DELIMITERS.filter(function(F){return m.delimiter.indexOf(F)!==-1}).length||(B=m.delimiter),(typeof m.quotes=="boolean"||typeof m.quotes=="function"||Array.isArray(m.quotes))&&(M=m.quotes),typeof m.skipEmptyLines!="boolean"&&typeof m.skipEmptyLines!="string"||(Le=m.skipEmptyLines),typeof m.newline=="string"&&(ne=m.newline),typeof m.quoteChar=="string"&&(ie=m.quoteChar),typeof m.header=="boolean"&&(O=m.header),Array.isArray(m.columns)){if(m.columns.length===0)throw new Error("Option columns is empty");X=m.columns}m.escapeChar!==void 0&&(Re=m.escapeChar+ie),(typeof m.escapeFormulae=="boolean"||m.escapeFormulae instanceof RegExp)&&(Te=m.escapeFormulae instanceof RegExp?m.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var se=new RegExp(re(ie),"g");if(typeof _=="string"&&(_=JSON.parse(_)),Array.isArray(_)){if(!_.length||Array.isArray(_[0]))return at(null,_,Le);if(typeof _[0]=="object")return at(X||Object.keys(_[0]),_,Le)}else if(typeof _=="object")return typeof _.data=="string"&&(_.data=JSON.parse(_.data)),Array.isArray(_.data)&&(_.fields||(_.fields=_.meta&&_.meta.fields||X),_.fields||(_.fields=Array.isArray(_.data[0])?_.fields:typeof _.data[0]=="object"?Object.keys(_.data[0]):[]),Array.isArray(_.data[0])||typeof _.data[0]=="object"||(_.data=[_.data])),at(_.fields||[],_.data||[],Le);throw new Error("Unable to serialize unrecognized input");function at(F,ee,be){var Ce="";typeof F=="string"&&(F=JSON.parse(F)),typeof ee=="string"&&(ee=JSON.parse(ee));var Ie=Array.isArray(F)&&0<F.length,Ne=!Array.isArray(ee[0]);if(Ie&&O){for(var qe=0;qe<F.length;qe++)0<qe&&(Ce+=B),Ce+=He(F[qe],qe);0<ee.length&&(Ce+=ne)}for(var te=0;te<ee.length;te++){var _e=Ie?F.length:ee[te].length,ze=!1,Ve=Ie?Object.keys(ee[te]).length===0:ee[te].length===0;if(be&&!Ie&&(ze=be==="greedy"?ee[te].join("").trim()==="":ee[te].length===1&&ee[te][0].length===0),be==="greedy"&&Ie){for(var Ae=[],Ye=0;Ye<_e;Ye++){var We=Ne?F[Ye]:Ye;Ae.push(ee[te][We])}ze=Ae.join("").trim()===""}if(!ze){for(var De=0;De<_e;De++){0<De&&!Ve&&(Ce+=B);var dt=Ie&&Ne?F[De]:De;Ce+=He(ee[te][dt],De)}te<ee.length-1&&(!be||0<_e&&!Ve)&&(Ce+=ne)}}return Ce}function He(F,ee){if(F==null)return"";if(F.constructor===Date)return JSON.stringify(F).slice(1,25);var be=!1;Te&&typeof F=="string"&&Te.test(F)&&(F="'"+F,be=!0);var Ce=F.toString().replace(se,Re);return(be=be||M===!0||typeof M=="function"&&M(F,ee)||Array.isArray(M)&&M[ee]||function(Ie,Ne){for(var qe=0;qe<Ne.length;qe++)if(-1<Ie.indexOf(Ne[qe]))return!0;return!1}(Ce,f.BAD_DELIMITERS)||-1<Ce.indexOf(B)||Ce.charAt(0)===" "||Ce.charAt(Ce.length-1)===" ")?ie+Ce+ie:Ce}}};if(f.RECORD_SEP=String.fromCharCode(30),f.UNIT_SEP=String.fromCharCode(31),f.BYTE_ORDER_MARK="\uFEFF",f.BAD_DELIMITERS=["\r",`
`,'"',f.BYTE_ORDER_MARK],f.WORKERS_SUPPORTED=!a&&!!n.Worker,f.NODE_STREAM_INPUT=1,f.LocalChunkSize=10485760,f.RemoteChunkSize=5242880,f.DefaultDelimiter=",",f.Parser=Q,f.ParserHandle=I,f.NetworkStreamer=p,f.FileStreamer=w,f.StringStreamer=P,f.ReadableStreamStreamer=q,n.jQuery){var g=n.jQuery;g.fn.parse=function(_){var m=_.config||{},M=[];return this.each(function(ne){if(!(g(this).prop("tagName").toUpperCase()==="INPUT"&&g(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var ie=0;ie<this.files.length;ie++)M.push({file:this.files[ie],inputElem:this,instanceConfig:g.extend({},m)})}),O(),this;function O(){if(M.length!==0){var ne,ie,Re,Le,X=M[0];if(J(_.before)){var Te=_.before(X.file,X.inputElem);if(typeof Te=="object"){if(Te.action==="abort")return ne="AbortError",ie=X.file,Re=X.inputElem,Le=Te.reason,void(J(_.error)&&_.error({name:ne},ie,Re,Le));if(Te.action==="skip")return void B();typeof Te.config=="object"&&(X.instanceConfig=g.extend(X.instanceConfig,Te.config))}else if(Te==="skip")return void B()}var se=X.instanceConfig.complete;X.instanceConfig.complete=function(at){J(se)&&se(at,X.file,X.inputElem),B()},f.parse(X.file,X.instanceConfig)}else J(_.complete)&&_.complete()}function B(){M.splice(0,1),O()}}}function v(_){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(m){var M=W(m);M.chunkSize=parseInt(M.chunkSize),m.step||m.chunk||(M.chunkSize=null),this._handle=new I(M),(this._handle.streamer=this)._config=M}.call(this,_),this.parseChunk=function(m,M){if(this.isFirstChunk&&J(this._config.beforeFirstChunk)){var O=this._config.beforeFirstChunk(m);O!==void 0&&(m=O)}this.isFirstChunk=!1,this._halted=!1;var B=this._partialLine+m;this._partialLine="";var ne=this._handle.parse(B,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var ie=ne.meta.cursor;this._finished||(this._partialLine=B.substring(ie-this._baseIndex),this._baseIndex=ie),ne&&ne.data&&(this._rowCount+=ne.data.length);var Re=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(l)n.postMessage({results:ne,workerId:f.WORKER_ID,finished:Re});else if(J(this._config.chunk)&&!M){if(this._config.chunk(ne,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);ne=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(ne.data),this._completeResults.errors=this._completeResults.errors.concat(ne.errors),this._completeResults.meta=ne.meta),this._completed||!Re||!J(this._config.complete)||ne&&ne.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),Re||ne&&ne.meta.paused||this._nextChunk(),ne}this._halted=!0},this._sendError=function(m){J(this._config.error)?this._config.error(m):l&&this._config.error&&n.postMessage({workerId:f.WORKER_ID,error:m,finished:!1})}}function p(_){var m;(_=_||{}).chunkSize||(_.chunkSize=f.RemoteChunkSize),v.call(this,_),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(M){this._input=M,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(m=new XMLHttpRequest,this._config.withCredentials&&(m.withCredentials=this._config.withCredentials),a||(m.onload=D(this._chunkLoaded,this),m.onerror=D(this._chunkError,this)),m.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var M=this._config.downloadRequestHeaders;for(var O in M)m.setRequestHeader(O,M[O])}if(this._config.chunkSize){var B=this._start+this._config.chunkSize-1;m.setRequestHeader("Range","bytes="+this._start+"-"+B)}try{m.send(this._config.downloadRequestBody)}catch(ne){this._chunkError(ne.message)}a&&m.status===0&&this._chunkError()}},this._chunkLoaded=function(){m.readyState===4&&(m.status<200||400<=m.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:m.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(M){var O=M.getResponseHeader("Content-Range");return O===null?-1:parseInt(O.substring(O.lastIndexOf("/")+1))}(m),this.parseChunk(m.responseText)))},this._chunkError=function(M){var O=m.statusText||M;this._sendError(new Error(O))}}function w(_){var m,M;(_=_||{}).chunkSize||(_.chunkSize=f.LocalChunkSize),v.call(this,_);var O=typeof FileReader<"u";this.stream=function(B){this._input=B,M=B.slice||B.webkitSlice||B.mozSlice,O?((m=new FileReader).onload=D(this._chunkLoaded,this),m.onerror=D(this._chunkError,this)):m=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var B=this._input;if(this._config.chunkSize){var ne=Math.min(this._start+this._config.chunkSize,this._input.size);B=M.call(B,this._start,ne)}var ie=m.readAsText(B,this._config.encoding);O||this._chunkLoaded({target:{result:ie}})},this._chunkLoaded=function(B){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(B.target.result)},this._chunkError=function(){this._sendError(m.error)}}function P(_){var m;v.call(this,_=_||{}),this.stream=function(M){return m=M,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var M,O=this._config.chunkSize;return O?(M=m.substring(0,O),m=m.substring(O)):(M=m,m=""),this._finished=!m,this.parseChunk(M)}}}function q(_){v.call(this,_=_||{});var m=[],M=!0,O=!1;this.pause=function(){v.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){v.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(B){this._input=B,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){O&&m.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),m.length?this.parseChunk(m.shift()):M=!0},this._streamData=D(function(B){try{m.push(typeof B=="string"?B:B.toString(this._config.encoding)),M&&(M=!1,this._checkIsFinished(),this.parseChunk(m.shift()))}catch(ne){this._streamError(ne)}},this),this._streamError=D(function(B){this._streamCleanUp(),this._sendError(B)},this),this._streamEnd=D(function(){this._streamCleanUp(),O=!0,this._streamData("")},this),this._streamCleanUp=D(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function I(_){var m,M,O,B=Math.pow(2,53),ne=-B,ie=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Re=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Le=this,X=0,Te=0,se=!1,at=!1,He=[],F={data:[],errors:[],meta:{}};if(J(_.step)){var ee=_.step;_.step=function(te){if(F=te,Ie())Ce();else{if(Ce(),F.data.length===0)return;X+=te.data.length,_.preview&&X>_.preview?M.abort():(F.data=F.data[0],ee(F,Le))}}}function be(te){return _.skipEmptyLines==="greedy"?te.join("").trim()==="":te.length===1&&te[0].length===0}function Ce(){return F&&O&&(qe("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+f.DefaultDelimiter+"'"),O=!1),_.skipEmptyLines&&(F.data=F.data.filter(function(te){return!be(te)})),Ie()&&function(){if(!F)return;function te(ze,Ve){J(_.transformHeader)&&(ze=_.transformHeader(ze,Ve)),He.push(ze)}if(Array.isArray(F.data[0])){for(var _e=0;Ie()&&_e<F.data.length;_e++)F.data[_e].forEach(te);F.data.splice(0,1)}else F.data.forEach(te)}(),function(){if(!F||!_.header&&!_.dynamicTyping&&!_.transform)return F;function te(ze,Ve){var Ae,Ye=_.header?{}:[];for(Ae=0;Ae<ze.length;Ae++){var We=Ae,De=ze[Ae];_.header&&(We=Ae>=He.length?"__parsed_extra":He[Ae]),_.transform&&(De=_.transform(De,We)),De=Ne(We,De),We==="__parsed_extra"?(Ye[We]=Ye[We]||[],Ye[We].push(De)):Ye[We]=De}return _.header&&(Ae>He.length?qe("FieldMismatch","TooManyFields","Too many fields: expected "+He.length+" fields but parsed "+Ae,Te+Ve):Ae<He.length&&qe("FieldMismatch","TooFewFields","Too few fields: expected "+He.length+" fields but parsed "+Ae,Te+Ve)),Ye}var _e=1;return!F.data.length||Array.isArray(F.data[0])?(F.data=F.data.map(te),_e=F.data.length):F.data=te(F.data,0),_.header&&F.meta&&(F.meta.fields=He),Te+=_e,F}()}function Ie(){return _.header&&He.length===0}function Ne(te,_e){return ze=te,_.dynamicTypingFunction&&_.dynamicTyping[ze]===void 0&&(_.dynamicTyping[ze]=_.dynamicTypingFunction(ze)),(_.dynamicTyping[ze]||_.dynamicTyping)===!0?_e==="true"||_e==="TRUE"||_e!=="false"&&_e!=="FALSE"&&(function(Ve){if(ie.test(Ve)){var Ae=parseFloat(Ve);if(ne<Ae&&Ae<B)return!0}return!1}(_e)?parseFloat(_e):Re.test(_e)?new Date(_e):_e===""?null:_e):_e;var ze}function qe(te,_e,ze,Ve){var Ae={type:te,code:_e,message:ze};Ve!==void 0&&(Ae.row=Ve),F.errors.push(Ae)}this.parse=function(te,_e,ze){var Ve=_.quoteChar||'"';if(_.newline||(_.newline=function(We,De){We=We.substring(0,1048576);var dt=new RegExp(re(De)+"([^]*?)"+re(De),"gm"),st=(We=We.replace(dt,"")).split("\r"),bt=We.split(`
`),_t=1<bt.length&&bt[0].length<st[0].length;if(st.length===1||_t)return`
`;for(var it=0,Oe=0;Oe<st.length;Oe++)st[Oe][0]===`
`&&it++;return it>=st.length/2?`\r
`:"\r"}(te,Ve)),O=!1,_.delimiter)J(_.delimiter)&&(_.delimiter=_.delimiter(te),F.meta.delimiter=_.delimiter);else{var Ae=function(We,De,dt,st,bt){var _t,it,Oe,je;bt=bt||[",","	","|",";",f.RECORD_SEP,f.UNIT_SEP];for(var It=0;It<bt.length;It++){var Ee=bt[It],Rt=0,kt=0,Ft=0;Oe=void 0;for(var yt=new Q({comments:st,delimiter:Ee,newline:De,preview:10}).parse(We),Ct=0;Ct<yt.data.length;Ct++)if(dt&&be(yt.data[Ct]))Ft++;else{var Lt=yt.data[Ct].length;kt+=Lt,Oe!==void 0?0<Lt&&(Rt+=Math.abs(Lt-Oe),Oe=Lt):Oe=Lt}0<yt.data.length&&(kt/=yt.data.length-Ft),(it===void 0||Rt<=it)&&(je===void 0||je<kt)&&1.99<kt&&(it=Rt,_t=Ee,je=kt)}return{successful:!!(_.delimiter=_t),bestDelimiter:_t}}(te,_.newline,_.skipEmptyLines,_.comments,_.delimitersToGuess);Ae.successful?_.delimiter=Ae.bestDelimiter:(O=!0,_.delimiter=f.DefaultDelimiter),F.meta.delimiter=_.delimiter}var Ye=W(_);return _.preview&&_.header&&Ye.preview++,m=te,M=new Q(Ye),F=M.parse(m,_e,ze),Ce(),se?{meta:{paused:!0}}:F||{meta:{paused:!1}}},this.paused=function(){return se},this.pause=function(){se=!0,M.abort(),m=J(_.chunk)?"":m.substring(M.getCharIndex())},this.resume=function(){Le.streamer._halted?(se=!1,Le.streamer.parseChunk(m,!0)):setTimeout(Le.resume,3)},this.aborted=function(){return at},this.abort=function(){at=!0,M.abort(),F.meta.aborted=!0,J(_.complete)&&_.complete(F),m=""}}function re(_){return _.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Q(_){var m,M=(_=_||{}).delimiter,O=_.newline,B=_.comments,ne=_.step,ie=_.preview,Re=_.fastMode,Le=m=_.quoteChar===void 0||_.quoteChar===null?'"':_.quoteChar;if(_.escapeChar!==void 0&&(Le=_.escapeChar),(typeof M!="string"||-1<f.BAD_DELIMITERS.indexOf(M))&&(M=","),B===M)throw new Error("Comment character same as delimiter");B===!0?B="#":(typeof B!="string"||-1<f.BAD_DELIMITERS.indexOf(B))&&(B=!1),O!==`
`&&O!=="\r"&&O!==`\r
`&&(O=`
`);var X=0,Te=!1;this.parse=function(se,at,He){if(typeof se!="string")throw new Error("Input must be a string");var F=se.length,ee=M.length,be=O.length,Ce=B.length,Ie=J(ne),Ne=[],qe=[],te=[],_e=X=0;if(!se)return gt();if(_.header&&!at){var ze=se.split(O)[0].split(M),Ve=[],Ae={},Ye=!1;for(var We in ze){var De=ze[We];J(_.transformHeader)&&(De=_.transformHeader(De,We));var dt=De,st=Ae[De]||0;for(0<st&&(Ye=!0,dt=De+"_"+st),Ae[De]=st+1;Ve.includes(dt);)dt=dt+"_"+st;Ve.push(dt)}if(Ye){var bt=se.split(O);bt[0]=Ve.join(M),se=bt.join(O)}}if(Re||Re!==!1&&se.indexOf(m)===-1){for(var _t=se.split(O),it=0;it<_t.length;it++){if(te=_t[it],X+=te.length,it!==_t.length-1)X+=O.length;else if(He)return gt();if(!B||te.substring(0,Ce)!==B){if(Ie){if(Ne=[],Ft(te.split(M)),Bt(),Te)return gt()}else Ft(te.split(M));if(ie&&ie<=it)return Ne=Ne.slice(0,ie),gt(!0)}}return gt()}for(var Oe=se.indexOf(M,X),je=se.indexOf(O,X),It=new RegExp(re(Le)+re(m),"g"),Ee=se.indexOf(m,X);;)if(se[X]!==m)if(B&&te.length===0&&se.substring(X,X+Ce)===B){if(je===-1)return gt();X=je+be,je=se.indexOf(O,X),Oe=se.indexOf(M,X)}else if(Oe!==-1&&(Oe<je||je===-1))te.push(se.substring(X,Oe)),X=Oe+ee,Oe=se.indexOf(M,X);else{if(je===-1)break;if(te.push(se.substring(X,je)),Lt(je+be),Ie&&(Bt(),Te))return gt();if(ie&&Ne.length>=ie)return gt(!0)}else for(Ee=X,X++;;){if((Ee=se.indexOf(m,Ee+1))===-1)return He||qe.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Ne.length,index:X}),Ct();if(Ee===F-1)return Ct(se.substring(X,Ee).replace(It,m));if(m!==Le||se[Ee+1]!==Le){if(m===Le||Ee===0||se[Ee-1]!==Le){Oe!==-1&&Oe<Ee+1&&(Oe=se.indexOf(M,Ee+1)),je!==-1&&je<Ee+1&&(je=se.indexOf(O,Ee+1));var Rt=yt(je===-1?Oe:Math.min(Oe,je));if(se.substr(Ee+1+Rt,ee)===M){te.push(se.substring(X,Ee).replace(It,m)),se[X=Ee+1+Rt+ee]!==m&&(Ee=se.indexOf(m,X)),Oe=se.indexOf(M,X),je=se.indexOf(O,X);break}var kt=yt(je);if(se.substring(Ee+1+kt,Ee+1+kt+be)===O){if(te.push(se.substring(X,Ee).replace(It,m)),Lt(Ee+1+kt+be),Oe=se.indexOf(M,X),Ee=se.indexOf(m,X),Ie&&(Bt(),Te))return gt();if(ie&&Ne.length>=ie)return gt(!0);break}qe.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Ne.length,index:X}),Ee++}}else Ee++}return Ct();function Ft(ot){Ne.push(ot),_e=X}function yt(ot){var pr=0;if(ot!==-1){var ur=se.substring(Ee+1,ot);ur&&ur.trim()===""&&(pr=ur.length)}return pr}function Ct(ot){return He||(ot===void 0&&(ot=se.substring(X)),te.push(ot),X=F,Ft(te),Ie&&Bt()),gt()}function Lt(ot){X=ot,Ft(te),te=[],je=se.indexOf(O,X)}function gt(ot){return{data:Ne,errors:qe,meta:{delimiter:M,linebreak:O,aborted:Te,truncated:!!ot,cursor:_e+(at||0)}}}function Bt(){ne(gt()),Ne=[],qe=[]}},this.abort=function(){Te=!0},this.getCharIndex=function(){return X}}function ae(_){var m=_.data,M=o[m.workerId],O=!1;if(m.error)M.userError(m.error,m.file);else if(m.results&&m.results.data){var B={abort:function(){O=!0,G(m.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:A,resume:A};if(J(M.userStep)){for(var ne=0;ne<m.results.data.length&&(M.userStep({data:m.results.data[ne],errors:m.results.errors,meta:m.results.meta},B),!O);ne++);delete m.results}else J(M.userChunk)&&(M.userChunk(m.results,B,m.file),delete m.results)}m.finished&&!O&&G(m.workerId,m.results)}function G(_,m){var M=o[_];J(M.userComplete)&&M.userComplete(m),M.terminate(),delete o[_]}function A(){throw new Error("Not implemented.")}function W(_){if(typeof _!="object"||_===null)return _;var m=Array.isArray(_)?[]:{};for(var M in _)m[M]=W(_[M]);return m}function D(_,m){return function(){_.apply(m,arguments)}}function J(_){return typeof _=="function"}return l&&(n.onmessage=function(_){var m=_.data;if(f.WORKER_ID===void 0&&m&&(f.WORKER_ID=m.workerId),typeof m.input=="string")n.postMessage({workerId:f.WORKER_ID,results:f.parse(m.input,m.config),finished:!0});else if(n.File&&m.input instanceof File||m.input instanceof Object){var M=f.parse(m.input,m.config);M&&n.postMessage({workerId:f.WORKER_ID,results:M,finished:!0})}}),(p.prototype=Object.create(v.prototype)).constructor=p,(w.prototype=Object.create(v.prototype)).constructor=w,(P.prototype=Object.create(P.prototype)).constructor=P,(q.prototype=Object.create(v.prototype)).constructor=q,f})})(os);var kf=os.exports;const $a=is(kf);var Ze=(i=>(i.LookingGlass="Looking Glass",i.DensityMap="Density Map",i.ValenceMap="Valence Map",i))(Ze||{});function wf(i){i.classList.remove("hidden");const{width:e,height:t}=i.getBoundingClientRect();return i.classList.add("hidden"),{newWidth:e,newHeight:t,imgWidth:i.naturalWidth,imgHeight:i.naturalHeight}}function $f(i,e,t){const n=i.getContext("2d");if(n==null)throw"Could not get context while resizing the canvas.";const a=window.devicePixelRatio||1;i.width=e*a,i.height=t*a,n.scale(a,a)}function ya(i,e,t,n){const a=e.getContext("2d");if(a==null)throw"Could not get context while drawing persona on the canvas.";i.classList.remove("hidden"),a.drawImage(i,0,0,t,n),a.globalCompositeOperation="source-atop",i.classList.add("hidden")}function fs(i,e,t,n){if(i.length<2)return;e.lineJoin="round",e.lineCap="round",t&&(e.strokeStyle=t),n&&(e.lineWidth=n);let a=i[0],l=i[1];e.beginPath(),e.moveTo(l.x,l.y);for(let o=1;o<i.length;o++){const c=yf(a,l);e.quadraticCurveTo(a.x,a.y,c.x,c.y),a=i[o],l=i[o+1]}a.x+=.1,a.y+=.1,e.lineTo(a.x,a.y),e.stroke()}function yf(i,e){return{x:i.x+(e.x-i.x)/2,y:i.y+(e.y-i.y)/2}}function Cf(i,e,t){const n=e.getContext("2d");if(n==null)throw"Could not get context to draw strokes.";for(const a of i){let l=a.points,o=a.brushSize;t!==void 0&&(l=us(a.points,t),o*=t),fs(l,n,a.brushColor,o)}}function us(i,e){return i.map(t=>({x:t.x*e,y:t.y*e}))}function Ef(i){return i.FemaleFront?"Female":"Male"}class Mf{constructor({id:e,drawing:t}){At(this,"id");At(this,"persona");At(this,"drawing");At(this,"areas");At(this,"totalDrawingArea");At(this,"computed");this.id=e,this.drawing=t,this.persona=Ef(t),this.totalDrawingArea=0,this.areas={},this.computed=!1}computeStrokeAreas(){var e,t;for(const n of Object.values(this.drawing)){n.sensationPixelMap||(n.sensationPixelMap={}),n.drawnPoints||(n.drawnPoints=[]);for(const a of n.strokes){const l=document.createElement("canvas");l.width=n.imgWidth,l.height=n.imgHeight,Cf([a],l);const o=l.getContext("2d");if(o==null)throw`Could not get context to draw stroke ${a} of participant ${this.id}.`;const c=o.getImageData(0,0,n.imgWidth,n.imgHeight).data;let f,g,v,p;for(let w=3,P=c.length;w<P;w+=4)c[w]>0&&(f=a.valence,g=a.intensity,v=Math.floor(w/4)%n.imgWidth,p=Math.floor(w/4/n.imgWidth),(e=n.sensationPixelMap)[v]||(e[v]={}),n.sensationPixelMap[v][p]={valence:f,intensity:g})}for(const a in n.sensationPixelMap)for(const l in n.sensationPixelMap[a]){const o=n.sensationPixelMap[a][l];n.drawnPoints.push({x:parseInt(a),y:parseInt(l),...o});const c=`${o.valence}:${o.intensity}`;(t=this.areas)[c]??(t[c]=0),this.areas[c]++,this.totalDrawingArea++}}this.computed=!0}}class Sf{constructor(){At(this,"participants",{});At(this,"personas",{Female:[],Male:[]});At(this,"drawingsPerSide",{})}addParticipant(e){this.participants[e.id]=e,this.personas[e.persona].push(e),this.classifyDrawing(e.drawing)}classifyDrawing(e){for(const t of Object.keys(e)){const n=t,a=this.drawingsPerSide[n]??[];a.push(e),this.drawingsPerSide[n]=a}}}function If(i,{delay:e=0,duration:t=400,easing:n=vf}={}){const a=+getComputedStyle(i).opacity;return{delay:e,duration:t,easing:n,css:l=>`opacity: ${l*a}`}}function Ca(i){let e,t,n;const a=i[8].default,l=ar(a,i,i[7],null);return{c(){e=Z("ul"),l&&l.c(),this.h()},l(o){e=K(o,"UL",{class:!0});var c=j(e);l&&l.l(c),c.forEach(C),this.h()},h(){E(e,"class","absolute top-full left-0 w-48 p-1 bg-neutral-700 shadow")},m(o,c){Y(o,e,c),l&&l.m(e,null),n=!0},p(o,c){l&&l.p&&(!n||c&128)&&sr(l,a,o,o[7],n?ir(a,o[7],c,null):lr(o[7]),null)},i(o){n||(N(l,o),t&&t.end(1),n=!0)},o(o){x(l,o),t=df(e,If,{duration:100}),n=!1},d(o){o&&C(e),l&&l.d(o),o&&t&&t.end()}}}function Ff(i){let e,t,n,a,l,o,c,f=i[0]&&Ca(i);return{c(){e=Z("div"),t=Z("button"),n=xe(i[1]),a=de(),f&&f.c(),this.h()},l(g){e=K(g,"DIV",{class:!0});var v=j(e);t=K(v,"BUTTON",{class:!0});var p=j(t);n=Be(p,i[1]),p.forEach(C),a=me(v),f&&f.l(v),v.forEach(C),this.h()},h(){E(t,"class","h-full px-3 text-neutral-100 text-xs"),pt(t,"bg-neutral-700",i[0]),E(e,"class","relative flex items-center h-full")},m(g,v){Y(g,e,v),z(e,t),z(t,n),z(e,a),f&&f.m(e,null),i[9](e),l=!0,o||(c=[wt(window,"click",i[4]),wt(t,"click",i[3])],o=!0)},p(g,[v]){(!l||v&2)&&$t(n,g[1]),(!l||v&1)&&pt(t,"bg-neutral-700",g[0]),g[0]?f?(f.p(g,v),v&1&&N(f,1)):(f=Ca(g),f.c(),N(f,1),f.m(e,null)):f&&(ft(),x(f,1,1,()=>{f=null}),ut())},i(g){l||(N(f),l=!0)},o(g){x(f),l=!1},d(g){g&&C(e),f&&f.d(),i[9](null),o=!1,rn(c)}}}function Lf(i,e,t){let{$$slots:n={},$$scope:a}=e,{title:l}=e,{isOpen:o=!1}=e,{enableIcon:c=!1}=e;function f(){t(0,o=!1)}let g;pf("menu",{enableIcon:c});function v(){t(0,o=!o)}function p(P){P.target instanceof Node&&g.contains(P.target)===!1&&t(0,o=!1)}function w(P){lt[P?"unshift":"push"](()=>{g=P,t(2,g)})}return i.$$set=P=>{"title"in P&&t(1,l=P.title),"isOpen"in P&&t(0,o=P.isOpen),"enableIcon"in P&&t(5,c=P.enableIcon),"$$scope"in P&&t(7,a=P.$$scope)},[o,l,g,v,p,c,f,a,n,w]}class cs extends rt{constructor(e){super(),nt(this,e,Lf,Ff,Ge,{title:1,isOpen:0,enableIcon:5,close:6})}get close(){return this.$$.ctx[6]}}const Af=i=>({isActive:i&1}),Ea=i=>({isActive:i[0]});function Rf(i){let e,t;const n=i[3].icon,a=ar(n,i,i[2],Ea);return{c(){e=Z("span"),a&&a.c(),this.h()},l(l){e=K(l,"SPAN",{class:!0});var o=j(e);a&&a.l(o),o.forEach(C),this.h()},h(){E(e,"class","w-[16px] mr-1")},m(l,o){Y(l,e,o),a&&a.m(e,null),t=!0},p(l,o){a&&a.p&&(!t||o&5)&&sr(a,n,l,l[2],t?ir(n,l[2],o,Af):lr(l[2]),Ea)},i(l){t||(N(a,l),t=!0)},o(l){x(a,l),t=!1},d(l){l&&C(e),a&&a.d(l)}}}function Tf(i){let e,t,n,a,l,o,c=i[1]&&Rf(i);const f=i[3].default,g=ar(f,i,i[2],null);return{c(){e=Z("li"),t=Z("button"),c&&c.c(),n=de(),g&&g.c(),this.h()},l(v){e=K(v,"LI",{class:!0});var p=j(e);t=K(p,"BUTTON",{class:!0});var w=j(t);c&&c.l(w),n=me(w),g&&g.l(w),w.forEach(C),p.forEach(C),this.h()},h(){E(t,"class","flex items-center w-full py-1 pr-2 "+(i[1]?"pl-1":"pl-2")+" text-xs text-neutral-100 text-left"),pt(t,"hover:bg-blue-500",!i[0]),E(e,"class","w-full")},m(v,p){Y(v,e,p),z(e,t),c&&c.m(t,null),z(t,n),g&&g.m(t,null),a=!0,l||(o=wt(e,"click",i[4]),l=!0)},p(v,[p]){v[1]&&c.p(v,p),g&&g.p&&(!a||p&4)&&sr(g,f,v,v[2],a?ir(f,v[2],p,null):lr(v[2]),null),(!a||p&1)&&pt(t,"hover:bg-blue-500",!v[0])},i(v){a||(N(c),N(g,v),a=!0)},o(v){x(c),x(g,v),a=!1},d(v){v&&C(e),c&&c.d(),g&&g.d(v),l=!1,o()}}}function Df(i,e,t){let{$$slots:n={},$$scope:a}=e,{isActive:l=!1}=e;const{enableIcon:o}=mf("menu");function c(f){Er.call(this,i,f)}return i.$$set=f=>{"isActive"in f&&t(0,l=f.isActive),"$$scope"in f&&t(2,a=f.$$scope)},[l,o,a,n,c]}class xt extends rt{constructor(e){super(),nt(this,e,Df,Tf,Ge,{isActive:0})}}function Of(i){let e;return{c(){e=Z("hr"),this.h()},l(t){e=K(t,"HR",{class:!0}),this.h()},h(){E(e,"class","my-0.5 border-0 border-b border-neutral-600")},m(t,n){Y(t,e,n)},p:Ue,i:Ue,o:Ue,d(t){t&&C(e)}}}class Pf extends rt{constructor(e){super(),nt(this,e,null,Of,Ge,{})}}const Nf=i=>({}),Ma=i=>({}),zf=i=>({}),Sa=i=>({});function Ia(i){let e,t;const n=i[5].settings,a=ar(n,i,i[4],Ma);return{c(){e=Z("aside"),a&&a.c(),this.h()},l(l){e=K(l,"ASIDE",{class:!0,style:!0});var o=j(e);a&&a.l(o),o.forEach(C),this.h()},h(){E(e,"class","flex flex-col h-full bg-neutral-600 border-l border-neutral-900"),tn(e,"width",i[0])},m(l,o){Y(l,e,o),a&&a.m(e,null),i[7](e),t=!0},p(l,o){a&&a.p&&(!t||o&16)&&sr(a,n,l,l[4],t?ir(n,l[4],o,Nf):lr(l[4]),Ma),(!t||o&1)&&tn(e,"width",l[0])},i(l){t||(N(a,l),t=!0)},o(l){x(a,l),t=!1},d(l){l&&C(e),a&&a.d(l),i[7](null)}}}function xf(i){let e,t,n,a;const l=i[5].panels,o=ar(l,i,i[4],Sa);let c=i[3].settings&&Ia(i);return{c(){e=Z("section"),t=Z("main"),o&&o.c(),n=de(),c&&c.c(),this.h()},l(f){e=K(f,"SECTION",{class:!0});var g=j(e);t=K(g,"MAIN",{class:!0});var v=j(t);o&&o.l(v),v.forEach(C),n=me(g),c&&c.l(g),g.forEach(C),this.h()},h(){E(t,"class","flex-grow grid grid-cols-1 gap-[2px] bg-neutral-600"),E(e,"class","w-full h-full flex items-stretch")},m(f,g){Y(f,e,g),z(e,t),o&&o.m(t,null),i[6](t),z(e,n),c&&c.m(e,null),a=!0},p(f,[g]){o&&o.p&&(!a||g&16)&&sr(o,l,f,f[4],a?ir(l,f[4],g,zf):lr(f[4]),Sa),f[3].settings?c?(c.p(f,g),g&8&&N(c,1)):(c=Ia(f),c.c(),N(c,1),c.m(e,null)):c&&(ft(),x(c,1,1,()=>{c=null}),ut())},i(f){a||(N(o,f),N(c),a=!0)},o(f){x(o,f),x(c),a=!1},d(f){f&&C(e),o&&o.d(f),i[6](null),c&&c.d()}}}function Bf(i,e,t){let{$$slots:n={},$$scope:a}=e;const l=bf(n);let{sidebarWidth:o="18rem"}=e,c,f;function g(p){lt[p?"unshift":"push"](()=>{c=p,t(1,c)})}function v(p){lt[p?"unshift":"push"](()=>{f=p,t(2,f)})}return i.$$set=p=>{"sidebarWidth"in p&&t(0,o=p.sidebarWidth),"$$scope"in p&&t(4,a=p.$$scope)},[o,c,f,l,a,n,g,v]}class sn extends rt{constructor(e){super(),nt(this,e,Bf,xf,Ge,{sidebarWidth:0})}}function Fa(i,e,t){const n=i.slice();return n[9]=e[t],n}function La(i){let e=i[1],t,n=Ra(i);return{c(){n.c(),t=Ke()},l(a){n.l(a),t=Ke()},m(a,l){n.m(a,l),Y(a,t,l)},p(a,l){l&2&&Ge(e,e=a[1])?(n.d(1),n=Ra(a),n.c(),n.m(t.parentNode,t)):n.p(a,l)},d(a){a&&C(t),n.d(a)}}}function Aa(i){let e,t=i[9]+"",n,a,l,o;function c(){return i[7](i[9])}return{c(){e=Z("button"),n=xe(t),a=de(),this.h()},l(f){e=K(f,"BUTTON",{class:!0});var g=j(e);n=Be(g,t),a=me(g),g.forEach(C),this.h()},h(){E(e,"class","panel-tab svelte-143z4t9"),pt(e,"active",i[1]===i[9]),pt(e,"highlight",i[3])},m(f,g){Y(f,e,g),z(e,n),z(e,a),l||(o=wt(e,"click",c),l=!0)},p(f,g){i=f,g&1&&t!==(t=i[9]+"")&&$t(n,t),g&3&&pt(e,"active",i[1]===i[9]),g&8&&pt(e,"highlight",i[3])},d(f){f&&C(e),l=!1,o()}}}function Ra(i){let e,t=i[0],n=[];for(let a=0;a<t.length;a+=1)n[a]=Aa(Fa(i,t,a));return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=Ke()},l(a){for(let l=0;l<n.length;l+=1)n[l].l(a);e=Ke()},m(a,l){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(a,l);Y(a,e,l)},p(a,l){if(l&27){t=a[0];let o;for(o=0;o<t.length;o+=1){const c=Fa(a,t,o);n[o]?n[o].p(c,l):(n[o]=Aa(c),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(a){or(n,a),a&&C(e)}}}function Ta(i){let e,t;return{c(){e=Z("span"),t=xe(i[2]),this.h()},l(n){e=K(n,"SPAN",{class:!0});var a=j(e);t=Be(a,i[2]),a.forEach(C),this.h()},h(){E(e,"class","z-10 absolute top-4 right-4 py-1 px-2 bg-neutral-900 shadow bg-opacity-50 text-neutral-100 text-xs")},m(n,a){Y(n,e,a),z(e,t)},p(n,a){a&4&&$t(t,n[2])},d(n){n&&C(e)}}}function Uf(i){let e,t,n,a,l,o,c=i[0]!==void 0&&La(i),f=i[2]&&Ta(i);const g=i[6].default,v=ar(g,i,i[5],null);return{c(){e=Z("div"),t=Z("div"),c&&c.c(),n=de(),a=Z("div"),f&&f.c(),l=de(),v&&v.c(),this.h()},l(p){e=K(p,"DIV",{class:!0});var w=j(e);t=K(w,"DIV",{class:!0});var P=j(t);c&&c.l(P),P.forEach(C),n=me(w),a=K(w,"DIV",{class:!0});var q=j(a);f&&f.l(q),l=me(q),v&&v.l(q),q.forEach(C),w.forEach(C),this.h()},h(){E(t,"class","panel-tabs w-full h-5 svelte-143z4t9"),E(a,"class","panel relative flex-grow w-full h-full"),E(e,"class","panel-container svelte-143z4t9")},m(p,w){Y(p,e,w),z(e,t),c&&c.m(t,null),z(e,n),z(e,a),f&&f.m(a,null),z(a,l),v&&v.m(a,null),o=!0},p(p,[w]){p[0]!==void 0?c?c.p(p,w):(c=La(p),c.c(),c.m(t,null)):c&&(c.d(1),c=null),p[2]?f?f.p(p,w):(f=Ta(p),f.c(),f.m(a,l)):f&&(f.d(1),f=null),v&&v.p&&(!o||w&32)&&sr(v,g,p,p[5],o?ir(g,p[5],w,null):lr(p[5]),null)},i(p){o||(N(v,p),o=!0)},o(p){x(v,p),o=!1},d(p){p&&C(e),c&&c.d(),f&&f.d(),v&&v.d(p)}}}function Wf(i,e,t){let{$$slots:n={},$$scope:a}=e,{tabs:l=void 0}=e,{activeTab:o=void 0}=e,{caption:c=void 0}=e,{highlightTab:f=!0}=e;const g=vr();function v(w){g("tabClick",w)}const p=w=>v(w);return i.$$set=w=>{"tabs"in w&&t(0,l=w.tabs),"activeTab"in w&&t(1,o=w.activeTab),"caption"in w&&t(2,c=w.caption),"highlightTab"in w&&t(3,f=w.highlightTab),"$$scope"in w&&t(5,a=w.$$scope)},[l,o,c,f,v,a,n,p]}class fr extends rt{constructor(e){super(),nt(this,e,Wf,Uf,Ge,{tabs:0,activeTab:1,caption:2,highlightTab:3})}}function Da(i,e,t){const n=i.slice();return n[5]=e[t],n}function Oa(i){let e,t=i[5]+"",n,a,l;return{c(){e=Z("option"),n=xe(t),this.h()},l(o){e=K(o,"OPTION",{});var c=j(e);n=Be(c,t),c.forEach(C),this.h()},h(){e.__value=a=i[5],e.value=e.__value,e.selected=l=i[2]===i[5]},m(o,c){Y(o,e,c),z(e,n)},p(o,c){c&2&&t!==(t=o[5]+"")&&$t(n,t),c&2&&a!==(a=o[5])&&(e.__value=a,e.value=e.__value),c&6&&l!==(l=o[2]===o[5])&&(e.selected=l)},d(o){o&&C(e)}}}function jf(i){let e,t,n,a,l,o,c,f=i[1],g=[];for(let v=0;v<f.length;v+=1)g[v]=Oa(Da(i,f,v));return{c(){e=Z("label"),t=xe(i[0]),n=xe(":"),a=de(),l=Z("select");for(let v=0;v<g.length;v+=1)g[v].c();this.h()},l(v){e=K(v,"LABEL",{class:!0});var p=j(e);t=Be(p,i[0]),n=Be(p,":"),p.forEach(C),a=me(v),l=K(v,"SELECT",{name:!0,id:!0,class:!0});var w=j(l);for(let P=0;P<g.length;P+=1)g[P].l(w);w.forEach(C),this.h()},h(){E(e,"class","w-1/3 pr-2 text-xs text-neutral-400 text-right"),E(l,"name",i[0]),E(l,"id",i[0]),E(l,"class","emboss py-1 px-2 bg-neutral-700 border border-neutral-800 text-xs text-neutral-200")},m(v,p){Y(v,e,p),z(e,t),z(e,n),Y(v,a,p),Y(v,l,p);for(let w=0;w<g.length;w+=1)g[w]&&g[w].m(l,null);o||(c=wt(l,"change",i[3]),o=!0)},p(v,[p]){if(p&1&&$t(t,v[0]),p&6){f=v[1];let w;for(w=0;w<f.length;w+=1){const P=Da(v,f,w);g[w]?g[w].p(P,p):(g[w]=Oa(P),g[w].c(),g[w].m(l,null))}for(;w<g.length;w+=1)g[w].d(1);g.length=f.length}p&1&&E(l,"name",v[0]),p&1&&E(l,"id",v[0])},i:Ue,o:Ue,d(v){v&&C(e),v&&C(a),v&&C(l),or(g,v),o=!1,c()}}}function qf(i,e,t){let{name:n}=e,{options:a}=e,{selected:l=void 0}=e;const o=vr();function c(f){if(f.target){const g=f.target;o("change",g.value)}}return i.$$set=f=>{"name"in f&&t(0,n=f.name),"options"in f&&t(1,a=f.options),"selected"in f&&t(2,l=f.selected)},[n,a,l,c]}class Gf extends rt{constructor(e){super(),nt(this,e,qf,jf,Ge,{name:0,options:1,selected:2})}}function Hf(i){let e;return{c(){e=Z("td"),this.h()},l(t){e=K(t,"TD",{class:!0});var n=j(e);n.forEach(C),this.h()},h(){E(e,"class","py-1 px-2 border-l border-neutral-800 text-neutral-100 text-xs")},m(t,n){Y(t,e,n),e.innerHTML=i[0]},p(t,[n]){n&1&&(e.innerHTML=t[0])},i:Ue,o:Ue,d(t){t&&C(e)}}}function Vf(i,e,t){let{value:n}=e,{formatter:a=void 0}=e,l;if(a)l=a(n);else if(typeof n=="string")l=n;else if(n.toString)l=n.toString();else throw"Error: Cannot format value.";return i.$$set=o=>{"value"in o&&t(1,n=o.value),"formatter"in o&&t(2,a=o.formatter)},[l,n,a]}class Yf extends rt{constructor(e){super(),nt(this,e,Vf,Hf,Ge,{value:1,formatter:2})}}function Pa(i,e,t){const n=i.slice();return n[3]=e[t],n}function Na(i){let e,t;const n=[i[3]];let a={};for(let l=0;l<n.length;l+=1)a=Gt(a,n[l]);return e=new Yf({props:a}),{c(){ue(e.$$.fragment)},l(l){ce(e.$$.fragment,l)},m(l,o){he(e,l,o),t=!0},p(l,o){const c=o&1?nn(n,[an(l[3])]):{};e.$set(c)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){x(e.$$.fragment,l),t=!1},d(l){ge(e,l)}}}function Qf(i){let e,t,n,a,l=i[0],o=[];for(let f=0;f<l.length;f+=1)o[f]=Na(Pa(i,l,f));const c=f=>x(o[f],1,1,()=>{o[f]=null});return{c(){e=Z("tr");for(let f=0;f<o.length;f+=1)o[f].c();this.h()},l(f){e=K(f,"TR",{class:!0});var g=j(e);for(let v=0;v<o.length;v+=1)o[v].l(g);g.forEach(C),this.h()},h(){E(e,"class","hover:bg-neutral-600 border-b last:border-b-0 border-neutral-800")},m(f,g){Y(f,e,g);for(let v=0;v<o.length;v+=1)o[v]&&o[v].m(e,null);t=!0,n||(a=[wt(e,"mouseenter",i[1]),wt(e,"mouseleave",i[2])],n=!0)},p(f,[g]){if(g&1){l=f[0];let v;for(v=0;v<l.length;v+=1){const p=Pa(f,l,v);o[v]?(o[v].p(p,g),N(o[v],1)):(o[v]=Na(p),o[v].c(),N(o[v],1),o[v].m(e,null))}for(ft(),v=l.length;v<o.length;v+=1)c(v);ut()}},i(f){if(!t){for(let g=0;g<l.length;g+=1)N(o[g]);t=!0}},o(f){o=o.filter(Boolean);for(let g=0;g<o.length;g+=1)x(o[g]);t=!1},d(f){f&&C(e),or(o,f),n=!1,rn(a)}}}function Xf(i,e,t){let{cells:n}=e;function a(o){Er.call(this,i,o)}function l(o){Er.call(this,i,o)}return i.$$set=o=>{"cells"in o&&t(0,n=o.cells)},[n,a,l]}class Jf extends rt{constructor(e){super(),nt(this,e,Xf,Qf,Ge,{cells:0})}}function za(i,e,t){const n=i.slice();return n[10]=e[t],n[12]=t,n}function xa(i,e,t){const n=i.slice();return n[13]=e[t],n}function Ba(i){let e,t,n=i[1],a=[];for(let l=0;l<n.length;l+=1)a[l]=Ua(xa(i,n,l));return{c(){e=Z("thead"),t=Z("tr");for(let l=0;l<a.length;l+=1)a[l].c();this.h()},l(l){e=K(l,"THEAD",{});var o=j(e);t=K(o,"TR",{class:!0});var c=j(t);for(let f=0;f<a.length;f+=1)a[f].l(c);c.forEach(C),o.forEach(C),this.h()},h(){E(t,"class","sticky top-0 bg-gradient-to-t from-neutral-600 to-neutral-500 border-b border-neutral-800")},m(l,o){Y(l,e,o),z(e,t);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(t,null)},p(l,o){if(o&2){n=l[1];let c;for(c=0;c<n.length;c+=1){const f=xa(l,n,c);a[c]?a[c].p(f,o):(a[c]=Ua(f),a[c].c(),a[c].m(t,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=n.length}},d(l){l&&C(e),or(a,l)}}}function Ua(i){let e,t=i[13]+"",n;return{c(){e=Z("th"),n=xe(t),this.h()},l(a){e=K(a,"TH",{class:!0});var l=j(e);n=Be(l,t),l.forEach(C),this.h()},h(){E(e,"class","px-2 border-l border-neutral-800 text-neutral-300 text-[0.6875rem] font-medium lowercase small-caps svelte-2meyxc")},m(a,l){Y(a,e,l),z(e,n)},p(a,l){l&2&&t!==(t=a[13]+"")&&$t(n,t)},d(a){a&&C(e)}}}function Wa(i){let e,t;const n=[i[10]];function a(){return i[7](i[12])}function l(){return i[8](i[12])}let o={};for(let c=0;c<n.length;c+=1)o=Gt(o,n[c]);return e=new Jf({props:o}),e.$on("mouseenter",a),e.$on("mouseleave",l),{c(){ue(e.$$.fragment)},l(c){ce(e.$$.fragment,c)},m(c,f){he(e,c,f),t=!0},p(c,f){i=c;const g=f&4?nn(n,[an(i[10])]):{};e.$set(g)},i(c){t||(N(e.$$.fragment,c),t=!0)},o(c){x(e.$$.fragment,c),t=!1},d(c){ge(e,c)}}}function ja(i){let e,t,n=i[2],a=[];for(let o=0;o<n.length;o+=1)a[o]=Wa(za(i,n,o));const l=o=>x(a[o],1,1,()=>{a[o]=null});return{c(){for(let o=0;o<a.length;o+=1)a[o].c();e=Ke()},l(o){for(let c=0;c<a.length;c+=1)a[c].l(o);e=Ke()},m(o,c){for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(o,c);Y(o,e,c),t=!0},p(o,c){if(c&52){n=o[2];let f;for(f=0;f<n.length;f+=1){const g=za(o,n,f);a[f]?(a[f].p(g,c),N(a[f],1)):(a[f]=Wa(g),a[f].c(),N(a[f],1),a[f].m(e.parentNode,e))}for(ft(),f=n.length;f<a.length;f+=1)l(f);ut()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)N(a[c]);t=!0}},o(o){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)x(a[c]);t=!1},d(o){or(a,o),o&&C(e)}}}function Zf(i){let e,t,n,a,l,o,c=i[2],f,g,v=i[3]&&Ba(i),p=ja(i);return{c(){e=Z("label"),t=xe(i[0]),n=de(),a=Z("table"),v&&v.c(),l=de(),o=Z("tbody"),p.c(),this.h()},l(w){e=K(w,"LABEL",{class:!0});var P=j(e);t=Be(P,i[0]),P.forEach(C),n=me(w),a=K(w,"TABLE",{class:!0});var q=j(a);v&&v.l(q),l=me(q),o=K(q,"TBODY",{});var I=j(o);p.l(I),I.forEach(C),q.forEach(C),this.h()},h(){E(e,"class","w-1/3 pr-2 text-xs text-neutral-400 text-right"),E(a,"class",f=i[6].class+" table-shadow w-fit my-1 bg-neutral-700 border border-neutral-800 svelte-2meyxc")},m(w,P){Y(w,e,P),z(e,t),Y(w,n,P),Y(w,a,P),v&&v.m(a,null),z(a,l),z(a,o),p.m(o,null),g=!0},p(w,[P]){(!g||P&1)&&$t(t,w[0]),w[3]?v?v.p(w,P):(v=Ba(w),v.c(),v.m(a,l)):v&&(v.d(1),v=null),P&4&&Ge(c,c=w[2])?(ft(),x(p,1,1,Ue),ut(),p=ja(w),p.c(),N(p,1),p.m(o,null)):p.p(w,P),(!g||P&64&&f!==(f=w[6].class+" table-shadow w-fit my-1 bg-neutral-700 border border-neutral-800 svelte-2meyxc"))&&E(a,"class",f)},i(w){g||(N(p),g=!0)},o(w){x(p),g=!1},d(w){w&&C(e),w&&C(n),w&&C(a),v&&v.d(),p.d(w)}}}function Kf(i,e,t){let{name:n}=e,{columns:a}=e,{rows:l}=e,{showColumns:o=!0}=e;const c=vr();function f(w){c("rowHover",w)}function g(w){c("rowLeave",w)}const v=w=>f(w),p=w=>g(w);return i.$$set=w=>{t(6,e=Gt(Gt({},e),Mr(w))),"name"in w&&t(0,n=w.name),"columns"in w&&t(1,a=w.columns),"rows"in w&&t(2,l=w.rows),"showColumns"in w&&t(3,o=w.showColumns)},e=Mr(e),[n,a,l,o,f,g,e,v,p]}class eu extends rt{constructor(e){super(),nt(this,e,Kf,Zf,Ge,{name:0,columns:1,rows:2,showColumns:3})}}function tu(i){let e,t,n,a,l,o;return{c(){e=Z("label"),t=xe(i[0]),n=xe(":"),a=de(),l=Z("span"),o=xe(i[1]),this.h()},l(c){e=K(c,"LABEL",{class:!0});var f=j(e);t=Be(f,i[0]),n=Be(f,":"),f.forEach(C),a=me(c),l=K(c,"SPAN",{class:!0});var g=j(l);o=Be(g,i[1]),g.forEach(C),this.h()},h(){E(e,"class","text-xs text-neutral-400 text-right"),E(l,"class","text-xs text-neutral-200")},m(c,f){Y(c,e,f),z(e,t),z(e,n),Y(c,a,f),Y(c,l,f),z(l,o)},p(c,[f]){f&1&&$t(t,c[0]),f&2&&$t(o,c[1])},i:Ue,o:Ue,d(c){c&&C(e),c&&C(a),c&&C(l)}}}function ru(i,e,t){let{name:n}=e,{label:a}=e;return i.$$set=l=>{"name"in l&&t(0,n=l.name),"label"in l&&t(1,a=l.label)},[n,a]}class qt extends rt{constructor(e){super(),nt(this,e,ru,tu,Ge,{name:0,label:1})}}const nu=""+new URL("../assets/female_front.cbbf7559.svg",import.meta.url).href,au=""+new URL("../assets/female_back.f4b0cc86.svg",import.meta.url).href,su=""+new URL("../assets/male_front.dc1ca7a4.svg",import.meta.url).href,lu=""+new URL("../assets/male_back.27c5d660.svg",import.meta.url).href,iu={FemaleFront:nu,FemaleBack:au,MaleFront:su,MaleBack:lu};function qa(i){let e,t,n,a,l,o;return{c(){e=Z("div"),t=ct("svg"),n=ct("circle"),a=ct("path"),l=de(),o=xe(i[0]),this.h()},l(c){e=K(c,"DIV",{class:!0});var f=j(e);t=ht(f,"svg",{class:!0,xmlns:!0,fill:!0,viewBox:!0});var g=j(t);n=ht(g,"circle",{class:!0,cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),j(n).forEach(C),a=ht(g,"path",{class:!0,fill:!0,d:!0}),j(a).forEach(C),g.forEach(C),l=me(f),o=Be(f,i[0]),f.forEach(C),this.h()},h(){E(n,"class","opacity-25"),E(n,"cx","12"),E(n,"cy","12"),E(n,"r","10"),E(n,"stroke","currentColor"),E(n,"stroke-width","4"),E(a,"class","opacity-75"),E(a,"fill","currentColor"),E(a,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),E(t,"class","animate-spin mr-1 h-4 w-4 text-white"),E(t,"xmlns","http://www.w3.org/2000/svg"),E(t,"fill","none"),E(t,"viewBox","0 0 24 24"),E(e,"class","z-20 absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 flex items-center py-1.5 px-2 bg-neutral-900 bg-opacity-75 text-white text-xs font-medium")},m(c,f){Y(c,e,f),z(e,t),z(t,n),z(t,a),z(e,l),z(e,o)},p(c,f){f&1&&$t(o,c[0])},d(c){c&&C(e)}}}function ou(i){let e,t,n,a,l,o,c,f,g,v=i[0]&&qa(i);return{c(){e=Z("div"),t=Z("img"),a=de(),l=Z("canvas"),o=de(),v&&v.c(),this.h()},l(p){e=K(p,"DIV",{class:!0});var w=j(e);t=K(w,"IMG",{src:!0,class:!0}),a=me(w),l=K(w,"CANVAS",{class:!0}),j(l).forEach(C),o=me(w),v&&v.l(w),w.forEach(C),this.h()},h(){_f(t.src,n=i[4])||E(t,"src",n),E(t,"class","absolute left-1/2 -translate-x-1/2 h-full object-contain"),E(l,"class","z-10 absolute left-1/2 -translate-x-1/2 h-full"),E(e,"class",c=(i[6].class??"")+" relative w-full h-full bg-white")},m(p,w){Y(p,e,w),z(e,t),i[15](t),z(e,a),z(e,l),i[16](l),z(e,o),v&&v.m(e,null),i[17](e),f||(g=wt(t,"load",i[5]),f=!0)},p(p,[w]){p[0]?v?v.p(p,w):(v=qa(p),v.c(),v.m(e,null)):v&&(v.d(1),v=null),w&64&&c!==(c=(p[6].class??"")+" relative w-full h-full bg-white")&&E(e,"class",c)},i:Ue,o:Ue,d(p){p&&C(e),i[15](null),i[16](null),v&&v.d(),i[17](null),f=!1,g()}}}function fu(i,e,t){let{personaSide:n}=e;function a(){return q.toDataURL("image/png")}function l(){return q}function o(){return Q}function c(_){t(0,w=_)}function f(){t(0,w=void 0)}function g(){ya(ae,q,I,re)}function v(_){const m=q.getContext("2d");if(m==null)throw"Could not get context to draw strokes.";for(let M of _){let O=M.points,B=M.brushSize;if(Q!==void 0)O=us(M.points,Q),B*=Q;else{const ne="Could not draw strokes because the scale factor is unknown.";throw alert(ne),ne}fs(O,m,M.brushColor,B)}}const p=vr();let w="Loading persona...",P=iu[n],q,I=0,re=0,Q=1,ae,G;function A(){const{imgWidth:_,imgHeight:m}=wf(ae);I=Math.ceil(_),re=Math.ceil(m),Q=I/ae.naturalWidth,$f(q,I,re),ya(ae,q,I,re),f(),p("ready",{personaSide:n,canvas:q,width:I,height:re,imgWidth:_,imgHeight:m,scaleFactor:Q})}function W(_){lt[_?"unshift":"push"](()=>{ae=_,t(2,ae)})}function D(_){lt[_?"unshift":"push"](()=>{q=_,t(1,q)})}function J(_){lt[_?"unshift":"push"](()=>{G=_,t(3,G)})}return i.$$set=_=>{t(6,e=Gt(Gt({},e),Mr(_))),"personaSide"in _&&t(7,n=_.personaSide)},e=Mr(e),[w,q,ae,G,P,A,e,n,a,l,o,c,f,g,v,W,D,J]}class nr extends rt{constructor(e){super(),nt(this,e,fu,ou,Ge,{personaSide:7,getImage:8,getCanvas:9,getScaleFactor:10,setMessage:11,clearMessage:12,clear:13,drawStrokes:14})}get getImage(){return this.$$.ctx[8]}get getCanvas(){return this.$$.ctx[9]}get getScaleFactor(){return this.$$.ctx[10]}get setMessage(){return this.$$.ctx[11]}get clearMessage(){return this.$$.ctx[12]}get clear(){return this.$$.ctx[13]}get drawStrokes(){return this.$$.ctx[14]}}function Ga(i,e,t){const n=i.slice();return n[15]=e[t],n}function Ha(i){let e=i[1],t,n,a=Ya(i);return{c(){a.c(),t=Ke()},l(l){a.l(l),t=Ke()},m(l,o){a.m(l,o),Y(l,t,o),n=!0},p(l,o){o&2&&Ge(e,e=l[1])?(ft(),x(a,1,1,Ue),ut(),a=Ya(l),a.c(),N(a,1),a.m(t.parentNode,t)):a.p(l,o)},i(l){n||(N(a),n=!0)},o(l){x(a),n=!1},d(l){l&&C(t),a.d(l)}}}function uu(i){let e,t,n={personaSide:i[15]};return e=new nr({props:n}),i[12](e),e.$on("ready",i[8]),{c(){ue(e.$$.fragment)},l(a){ce(e.$$.fragment,a)},m(a,l){he(e,a,l),t=!0},p(a,l){const o={};l&4&&(o.personaSide=a[15]),e.$set(o)},i(a){t||(N(e.$$.fragment,a),t=!0)},o(a){x(e.$$.fragment,a),t=!1},d(a){i[12](null),ge(e,a)}}}function cu(i){let e,t,n={personaSide:i[15]};return e=new nr({props:n}),i[11](e),e.$on("ready",i[8]),{c(){ue(e.$$.fragment)},l(a){ce(e.$$.fragment,a)},m(a,l){he(e,a,l),t=!0},p(a,l){const o={};l&4&&(o.personaSide=a[15]),e.$set(o)},i(a){t||(N(e.$$.fragment,a),t=!0)},o(a){x(e.$$.fragment,a),t=!1},d(a){i[11](null),ge(e,a)}}}function Va(i){let e,t,n,a,l;const o=[cu,uu],c=[];function f(g,v){return v&4&&(e=null),e==null&&(e=!!g[15].includes("Front")),e?0:1}return t=f(i,-1),n=c[t]=o[t](i),{c(){n.c(),a=Ke()},l(g){n.l(g),a=Ke()},m(g,v){c[t].m(g,v),Y(g,a,v),l=!0},p(g,v){let p=t;t=f(g,v),t===p?c[t].p(g,v):(ft(),x(c[p],1,1,()=>{c[p]=null}),ut(),n=c[t],n?n.p(g,v):(n=c[t]=o[t](g),n.c()),N(n,1),n.m(a.parentNode,a))},i(g){l||(N(n),l=!0)},o(g){x(n),l=!1},d(g){c[t].d(g),g&&C(a)}}}function hu(i){let e,t,n=i[2],a=[];for(let o=0;o<n.length;o+=1)a[o]=Va(Ga(i,n,o));const l=o=>x(a[o],1,1,()=>{a[o]=null});return{c(){e=Z("div");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=K(o,"DIV",{class:!0});var c=j(e);for(let f=0;f<a.length;f+=1)a[f].l(c);c.forEach(C),this.h()},h(){E(e,"class","flex w-full h-full")},m(o,c){Y(o,e,c);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(e,null);t=!0},p(o,c){if(c&452){n=o[2];let f;for(f=0;f<n.length;f+=1){const g=Ga(o,n,f);a[f]?(a[f].p(g,c),N(a[f],1)):(a[f]=Va(g),a[f].c(),N(a[f],1),a[f].m(e,null))}for(ft(),f=n.length;f<a.length;f+=1)l(f);ut()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)N(a[c]);t=!0}},o(o){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)x(a[c]);t=!1},d(o){o&&C(e),or(a,o)}}}function gu(i){let e,t;return e=new fr({props:{caption:"Looking Glass",$$slots:{default:[hu]},$$scope:{ctx:i}}}),{c(){ue(e.$$.fragment)},l(n){ce(e.$$.fragment,n)},m(n,a){he(e,n,a),t=!0},p(n,a){const l={};a&262340&&(l.$$scope={dirty:a,ctx:n}),e.$set(l)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){ge(e,n)}}}function vu(i){let e,t,n,a,l,o,c,f,g,v,p,w,P,q,I,re;n=new Gf({props:{name:"Participant",options:Object.keys(i[0].participants),selected:i[1].id}}),n.$on("change",i[9]),o=new qt({props:{name:"Drawing area",label:`${i[1].totalDrawingArea} pixels`}}),g=new qt({props:{name:"Avg valence",label:i[3].toString()}}),w=new qt({props:{name:"Avg intensity",label:i[4].toString()}});const Q=[{class:"block h-64 overflow-auto"},i[5]];let ae={};for(let G=0;G<Q.length;G+=1)ae=Gt(ae,Q[G]);return I=new eu({props:ae}),{c(){e=Z("ul"),t=Z("li"),ue(n.$$.fragment),a=de(),l=Z("li"),ue(o.$$.fragment),c=de(),f=Z("li"),ue(g.$$.fragment),v=de(),p=Z("li"),ue(w.$$.fragment),P=de(),q=Z("li"),ue(I.$$.fragment),this.h()},l(G){e=K(G,"UL",{class:!0});var A=j(e);t=K(A,"LI",{});var W=j(t);ce(n.$$.fragment,W),W.forEach(C),a=me(A),l=K(A,"LI",{});var D=j(l);ce(o.$$.fragment,D),D.forEach(C),c=me(A),f=K(A,"LI",{});var J=j(f);ce(g.$$.fragment,J),J.forEach(C),v=me(A),p=K(A,"LI",{});var _=j(p);ce(w.$$.fragment,_),_.forEach(C),P=me(A),q=K(A,"LI",{});var m=j(q);ce(I.$$.fragment,m),m.forEach(C),A.forEach(C),this.h()},h(){E(e,"class","p-2")},m(G,A){Y(G,e,A),z(e,t),he(n,t,null),z(e,a),z(e,l),he(o,l,null),z(e,c),z(e,f),he(g,f,null),z(e,v),z(e,p),he(w,p,null),z(e,P),z(e,q),he(I,q,null),re=!0},p(G,A){const W={};A&1&&(W.options=Object.keys(G[0].participants)),A&2&&(W.selected=G[1].id),n.$set(W);const D={};A&2&&(D.label=`${G[1].totalDrawingArea} pixels`),o.$set(D);const J={};A&8&&(J.label=G[3].toString()),g.$set(J);const _={};A&16&&(_.label=G[4].toString()),w.$set(_);const m=A&32?nn(Q,[Q[0],an(G[5])]):{};I.$set(m)},i(G){re||(N(n.$$.fragment,G),N(o.$$.fragment,G),N(g.$$.fragment,G),N(w.$$.fragment,G),N(I.$$.fragment,G),re=!0)},o(G){x(n.$$.fragment,G),x(o.$$.fragment,G),x(g.$$.fragment,G),x(w.$$.fragment,G),x(I.$$.fragment,G),re=!1},d(G){G&&C(e),ge(n),ge(o),ge(g),ge(w),ge(I)}}}function pu(i){let e,t;return e=new fr({props:{tabs:["Details"],highlightTab:!1,$$slots:{default:[vu]},$$scope:{ctx:i}}}),{c(){ue(e.$$.fragment)},l(n){ce(e.$$.fragment,n)},m(n,a){he(e,n,a),t=!0},p(n,a){const l={};a&262203&&(l.$$scope={dirty:a,ctx:n}),e.$set(l)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){ge(e,n)}}}function Ya(i){let e,t;return e=new sn({props:{$$slots:{settings:[pu],panels:[gu]},$$scope:{ctx:i}}}),{c(){ue(e.$$.fragment)},l(n){ce(e.$$.fragment,n)},m(n,a){he(e,n,a),t=!0},p(n,a){const l={};a&262399&&(l.$$scope={dirty:a,ctx:n}),e.$set(l)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){ge(e,n)}}}function du(i){let e,t,n=i[1]&&Ha(i);return{c(){n&&n.c(),e=Ke()},l(a){n&&n.l(a),e=Ke()},m(a,l){n&&n.m(a,l),Y(a,e,l),t=!0},p(a,[l]){a[1]?n?(n.p(a,l),l&2&&N(n,1)):(n=Ha(a),n.c(),N(n,1),n.m(e.parentNode,e)):n&&(ft(),x(n,1,1,()=>{n=null}),ut())},i(a){t||(N(n),t=!0)},o(a){x(n),t=!1},d(a){n&&n.d(a),a&&C(e)}}}function mu(i){const e={name:"Areas table",columns:["Valence","Intensity","Size"],rows:[]};for(const t in i.areas){const[n,a]=t.split(":");e.rows.push({cells:[{value:n},{value:a},{value:i.areas[t]}]})}return e}function Qa(i,e){const t={};for(const o in i.areas){const[c,f]=o.split(":"),g=i.areas[o];e==="valence"?(t[c]??(t[c]=0),t[c]+=g):(t[f]??(t[f]=0),t[f]+=g)}let n=0;for(let o in t){const c=parseInt(o);n+=c*t[o]}const a=n/i.totalDrawingArea;return Math.round(a*100)/100}function Xa(i,e){const t=i.drawing[e];if(t===void 0)throw`Could not get ${e} drawing of participant ${i.id}.`;return t.strokes}function bu(i,e,t){let{survey:n}=e,a,l,o,c,f={name:"Areas",columns:[],rows:[]},g,v;function p(){const Q=`Participant${a.id+1}-${a.persona}`;return[{name:`LookingGlass-${Q}Front.png`,dataUrl:g.getImage()},{name:`LookingGlass-${Q}Back.png`,dataUrl:v.getImage()}]}function w(Q){const{personaSide:ae}=Q.detail,G=Xa(a,ae);let A;ae.includes("Front")?A=g:A=v,A.drawStrokes(G)}function P(Q){const ae=n.participants[Q],G=Object.keys(ae.drawing);ae.computed===!1&&ae.computeStrokeAreas();let A=[];G.forEach(J=>{A=A.concat(Xa(ae,J))});const W=Qa(ae,"valence"),D=Qa(ae,"intensity");t(1,a=ae),t(2,l=G),t(3,o=W),t(4,c=D),t(5,f=mu(ae))}function q({detail:Q}){P(Q)}Sr(()=>{P(Object.keys(n.participants)[0])});function I(Q){lt[Q?"unshift":"push"](()=>{g=Q,t(6,g)})}function re(Q){lt[Q?"unshift":"push"](()=>{v=Q,t(7,v)})}return i.$$set=Q=>{"survey"in Q&&t(0,n=Q.survey)},[n,a,l,o,c,f,g,v,w,q,p,I,re]}class _u extends rt{constructor(e){super(),nt(this,e,bu,du,Ge,{survey:0,getImages:10})}get survey(){return this.$$.ctx[0]}set survey(e){this.$$set({survey:e}),ss()}get getImages(){return this.$$.ctx[10]}}var hs={exports:{}};/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */(function(i,e){(function(t,n){i.exports=n()})(ls,function(){for(var t=function(r,s,u){return s===void 0&&(s=0),u===void 0&&(u=1),r<s?s:r>u?u:r},n=t,a=function(r){r._clipped=!1,r._unclipped=r.slice(0);for(var s=0;s<=3;s++)s<3?((r[s]<0||r[s]>255)&&(r._clipped=!0),r[s]=n(r[s],0,255)):s===3&&(r[s]=n(r[s],0,1));return r},l={},o=0,c=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];o<c.length;o+=1){var f=c[o];l["[object "+f+"]"]=f.toLowerCase()}var g=function(r){return l[Object.prototype.toString.call(r)]||"object"},v=g,p=function(r,s){return s===void 0&&(s=null),r.length>=3?Array.prototype.slice.call(r):v(r[0])=="object"&&s?s.split("").filter(function(u){return r[0][u]!==void 0}).map(function(u){return r[0][u]}):r[0]},w=g,P=function(r){if(r.length<2)return null;var s=r.length-1;return w(r[s])=="string"?r[s].toLowerCase():null},q=Math.PI,I={clip_rgb:a,limit:t,type:g,unpack:p,last:P,PI:q,TWOPI:q*2,PITHIRD:q/3,DEG2RAD:q/180,RAD2DEG:180/q},re={format:{},autodetect:[]},Q=I.last,ae=I.clip_rgb,G=I.type,A=re,W=function(){for(var s=[],u=arguments.length;u--;)s[u]=arguments[u];var h=this;if(G(s[0])==="object"&&s[0].constructor&&s[0].constructor===this.constructor)return s[0];var b=Q(s),k=!1;if(!b){k=!0,A.sorted||(A.autodetect=A.autodetect.sort(function(L,U){return U.p-L.p}),A.sorted=!0);for(var d=0,$=A.autodetect;d<$.length;d+=1){var y=$[d];if(b=y.test.apply(y,s),b)break}}if(A.format[b]){var S=A.format[b].apply(null,k?s:s.slice(0,-1));h._rgb=ae(S)}else throw new Error("unknown format: "+s);h._rgb.length===3&&h._rgb.push(1)};W.prototype.toString=function(){return G(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var D=W,J=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return new(Function.prototype.bind.apply(J.Color,[null].concat(r)))};J.Color=D,J.version="2.4.2";var _=J,m=I.unpack,M=Math.max,O=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];var u=m(r,"rgb"),h=u[0],b=u[1],k=u[2];h=h/255,b=b/255,k=k/255;var d=1-M(h,M(b,k)),$=d<1?1/(1-d):0,y=(1-h-d)*$,S=(1-b-d)*$,L=(1-k-d)*$;return[y,S,L,d]},B=O,ne=I.unpack,ie=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];r=ne(r,"cmyk");var u=r[0],h=r[1],b=r[2],k=r[3],d=r.length>4?r[4]:1;return k===1?[0,0,0,d]:[u>=1?0:255*(1-u)*(1-k),h>=1?0:255*(1-h)*(1-k),b>=1?0:255*(1-b)*(1-k),d]},Re=ie,Le=_,X=D,Te=re,se=I.unpack,at=I.type,He=B;X.prototype.cmyk=function(){return He(this._rgb)},Le.cmyk=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return new(Function.prototype.bind.apply(X,[null].concat(r,["cmyk"])))},Te.format.cmyk=Re,Te.autodetect.push({p:2,test:function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];if(r=se(r,"cmyk"),at(r)==="array"&&r.length===4)return"cmyk"}});var F=I.unpack,ee=I.last,be=function(r){return Math.round(r*100)/100},Ce=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];var u=F(r,"hsla"),h=ee(r)||"lsa";return u[0]=be(u[0]||0),u[1]=be(u[1]*100)+"%",u[2]=be(u[2]*100)+"%",h==="hsla"||u.length>3&&u[3]<1?(u[3]=u.length>3?u[3]:1,h="hsla"):u.length=3,h+"("+u.join(",")+")"},Ie=Ce,Ne=I.unpack,qe=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];r=Ne(r,"rgba");var u=r[0],h=r[1],b=r[2];u/=255,h/=255,b/=255;var k=Math.min(u,h,b),d=Math.max(u,h,b),$=(d+k)/2,y,S;return d===k?(y=0,S=Number.NaN):y=$<.5?(d-k)/(d+k):(d-k)/(2-d-k),u==d?S=(h-b)/(d-k):h==d?S=2+(b-u)/(d-k):b==d&&(S=4+(u-h)/(d-k)),S*=60,S<0&&(S+=360),r.length>3&&r[3]!==void 0?[S,y,$,r[3]]:[S,y,$]},te=qe,_e=I.unpack,ze=I.last,Ve=Ie,Ae=te,Ye=Math.round,We=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];var u=_e(r,"rgba"),h=ze(r)||"rgb";return h.substr(0,3)=="hsl"?Ve(Ae(u),h):(u[0]=Ye(u[0]),u[1]=Ye(u[1]),u[2]=Ye(u[2]),(h==="rgba"||u.length>3&&u[3]<1)&&(u[3]=u.length>3?u[3]:1,h="rgba"),h+"("+u.slice(0,h==="rgb"?3:4).join(",")+")")},De=We,dt=I.unpack,st=Math.round,bt=function(){for(var r,s=[],u=arguments.length;u--;)s[u]=arguments[u];s=dt(s,"hsl");var h=s[0],b=s[1],k=s[2],d,$,y;if(b===0)d=$=y=k*255;else{var S=[0,0,0],L=[0,0,0],U=k<.5?k*(1+b):k+b-k*b,R=2*k-U,V=h/360;S[0]=V+1/3,S[1]=V,S[2]=V-1/3;for(var H=0;H<3;H++)S[H]<0&&(S[H]+=1),S[H]>1&&(S[H]-=1),6*S[H]<1?L[H]=R+(U-R)*6*S[H]:2*S[H]<1?L[H]=U:3*S[H]<2?L[H]=R+(U-R)*(2/3-S[H])*6:L[H]=R;r=[st(L[0]*255),st(L[1]*255),st(L[2]*255)],d=r[0],$=r[1],y=r[2]}return s.length>3?[d,$,y,s[3]]:[d,$,y,1]},_t=bt,it=_t,Oe=re,je=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,It=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,Ee=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,Rt=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,kt=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,Ft=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,yt=Math.round,Ct=function(r){r=r.toLowerCase().trim();var s;if(Oe.format.named)try{return Oe.format.named(r)}catch{}if(s=r.match(je)){for(var u=s.slice(1,4),h=0;h<3;h++)u[h]=+u[h];return u[3]=1,u}if(s=r.match(It)){for(var b=s.slice(1,5),k=0;k<4;k++)b[k]=+b[k];return b}if(s=r.match(Ee)){for(var d=s.slice(1,4),$=0;$<3;$++)d[$]=yt(d[$]*2.55);return d[3]=1,d}if(s=r.match(Rt)){for(var y=s.slice(1,5),S=0;S<3;S++)y[S]=yt(y[S]*2.55);return y[3]=+y[3],y}if(s=r.match(kt)){var L=s.slice(1,4);L[1]*=.01,L[2]*=.01;var U=it(L);return U[3]=1,U}if(s=r.match(Ft)){var R=s.slice(1,4);R[1]*=.01,R[2]*=.01;var V=it(R);return V[3]=+s[4],V}};Ct.test=function(r){return je.test(r)||It.test(r)||Ee.test(r)||Rt.test(r)||kt.test(r)||Ft.test(r)};var Lt=Ct,gt=_,Bt=D,ot=re,pr=I.type,ur=De,ln=Lt;Bt.prototype.css=function(r){return ur(this._rgb,r)},gt.css=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return new(Function.prototype.bind.apply(Bt,[null].concat(r,["css"])))},ot.format.css=ln,ot.autodetect.push({p:5,test:function(r){for(var s=[],u=arguments.length-1;u-- >0;)s[u]=arguments[u+1];if(!s.length&&pr(r)==="string"&&ln.test(r))return"css"}});var on=D,gs=_,vs=re,ps=I.unpack;vs.format.gl=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];var u=ps(r,"rgba");return u[0]*=255,u[1]*=255,u[2]*=255,u},gs.gl=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return new(Function.prototype.bind.apply(on,[null].concat(r,["gl"])))},on.prototype.gl=function(){var r=this._rgb;return[r[0]/255,r[1]/255,r[2]/255,r[3]]};var ds=I.unpack,ms=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];var u=ds(r,"rgb"),h=u[0],b=u[1],k=u[2],d=Math.min(h,b,k),$=Math.max(h,b,k),y=$-d,S=y*100/255,L=d/(255-y)*100,U;return y===0?U=Number.NaN:(h===$&&(U=(b-k)/y),b===$&&(U=2+(k-h)/y),k===$&&(U=4+(h-b)/y),U*=60,U<0&&(U+=360)),[U,S,L]},bs=ms,_s=I.unpack,ks=Math.floor,ws=function(){for(var r,s,u,h,b,k,d=[],$=arguments.length;$--;)d[$]=arguments[$];d=_s(d,"hcg");var y=d[0],S=d[1],L=d[2],U,R,V;L=L*255;var H=S*255;if(S===0)U=R=V=L;else{y===360&&(y=0),y>360&&(y-=360),y<0&&(y+=360),y/=60;var oe=ks(y),pe=y-oe,we=L*(1-S),ye=we+H*(1-pe),et=we+H*pe,Je=we+H;switch(oe){case 0:r=[Je,et,we],U=r[0],R=r[1],V=r[2];break;case 1:s=[ye,Je,we],U=s[0],R=s[1],V=s[2];break;case 2:u=[we,Je,et],U=u[0],R=u[1],V=u[2];break;case 3:h=[we,ye,Je],U=h[0],R=h[1],V=h[2];break;case 4:b=[et,we,Je],U=b[0],R=b[1],V=b[2];break;case 5:k=[Je,we,ye],U=k[0],R=k[1],V=k[2];break}}return[U,R,V,d.length>3?d[3]:1]},$s=ws,ys=I.unpack,Cs=I.type,Es=_,fn=D,un=re,Ms=bs;fn.prototype.hcg=function(){return Ms(this._rgb)},Es.hcg=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return new(Function.prototype.bind.apply(fn,[null].concat(r,["hcg"])))},un.format.hcg=$s,un.autodetect.push({p:1,test:function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];if(r=ys(r,"hcg"),Cs(r)==="array"&&r.length===3)return"hcg"}});var Ss=I.unpack,Is=I.last,dr=Math.round,Fs=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];var u=Ss(r,"rgba"),h=u[0],b=u[1],k=u[2],d=u[3],$=Is(r)||"auto";d===void 0&&(d=1),$==="auto"&&($=d<1?"rgba":"rgb"),h=dr(h),b=dr(b),k=dr(k);var y=h<<16|b<<8|k,S="000000"+y.toString(16);S=S.substr(S.length-6);var L="0"+dr(d*255).toString(16);switch(L=L.substr(L.length-2),$.toLowerCase()){case"rgba":return"#"+S+L;case"argb":return"#"+L+S;default:return"#"+S}},cn=Fs,Ls=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,As=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Rs=function(r){if(r.match(Ls)){(r.length===4||r.length===7)&&(r=r.substr(1)),r.length===3&&(r=r.split(""),r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]);var s=parseInt(r,16),u=s>>16,h=s>>8&255,b=s&255;return[u,h,b,1]}if(r.match(As)){(r.length===5||r.length===9)&&(r=r.substr(1)),r.length===4&&(r=r.split(""),r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]+r[3]+r[3]);var k=parseInt(r,16),d=k>>24&255,$=k>>16&255,y=k>>8&255,S=Math.round((k&255)/255*100)/100;return[d,$,y,S]}throw new Error("unknown hex color: "+r)},hn=Rs,Ts=_,gn=D,Ds=I.type,vn=re,Os=cn;gn.prototype.hex=function(r){return Os(this._rgb,r)},Ts.hex=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return new(Function.prototype.bind.apply(gn,[null].concat(r,["hex"])))},vn.format.hex=hn,vn.autodetect.push({p:4,test:function(r){for(var s=[],u=arguments.length-1;u-- >0;)s[u]=arguments[u+1];if(!s.length&&Ds(r)==="string"&&[3,4,5,6,7,8,9].indexOf(r.length)>=0)return"hex"}});var Ps=I.unpack,pn=I.TWOPI,Ns=Math.min,zs=Math.sqrt,xs=Math.acos,Bs=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];var u=Ps(r,"rgb"),h=u[0],b=u[1],k=u[2];h/=255,b/=255,k/=255;var d,$=Ns(h,b,k),y=(h+b+k)/3,S=y>0?1-$/y:0;return S===0?d=NaN:(d=(h-b+(h-k))/2,d/=zs((h-b)*(h-b)+(h-k)*(b-k)),d=xs(d),k>b&&(d=pn-d),d/=pn),[d*360,S,y]},Us=Bs,Ws=I.unpack,Ir=I.limit,Ht=I.TWOPI,Fr=I.PITHIRD,Vt=Math.cos,js=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];r=Ws(r,"hsi");var u=r[0],h=r[1],b=r[2],k,d,$;return isNaN(u)&&(u=0),isNaN(h)&&(h=0),u>360&&(u-=360),u<0&&(u+=360),u/=360,u<1/3?($=(1-h)/3,k=(1+h*Vt(Ht*u)/Vt(Fr-Ht*u))/3,d=1-($+k)):u<2/3?(u-=1/3,k=(1-h)/3,d=(1+h*Vt(Ht*u)/Vt(Fr-Ht*u))/3,$=1-(k+d)):(u-=2/3,d=(1-h)/3,$=(1+h*Vt(Ht*u)/Vt(Fr-Ht*u))/3,k=1-(d+$)),k=Ir(b*k*3),d=Ir(b*d*3),$=Ir(b*$*3),[k*255,d*255,$*255,r.length>3?r[3]:1]},qs=js,Gs=I.unpack,Hs=I.type,Vs=_,dn=D,mn=re,Ys=Us;dn.prototype.hsi=function(){return Ys(this._rgb)},Vs.hsi=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return new(Function.prototype.bind.apply(dn,[null].concat(r,["hsi"])))},mn.format.hsi=qs,mn.autodetect.push({p:2,test:function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];if(r=Gs(r,"hsi"),Hs(r)==="array"&&r.length===3)return"hsi"}});var Qs=I.unpack,Xs=I.type,Js=_,bn=D,_n=re,Zs=te;bn.prototype.hsl=function(){return Zs(this._rgb)},Js.hsl=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return new(Function.prototype.bind.apply(bn,[null].concat(r,["hsl"])))},_n.format.hsl=_t,_n.autodetect.push({p:2,test:function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];if(r=Qs(r,"hsl"),Xs(r)==="array"&&r.length===3)return"hsl"}});var Ks=I.unpack,el=Math.min,tl=Math.max,rl=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];r=Ks(r,"rgb");var u=r[0],h=r[1],b=r[2],k=el(u,h,b),d=tl(u,h,b),$=d-k,y,S,L;return L=d/255,d===0?(y=Number.NaN,S=0):(S=$/d,u===d&&(y=(h-b)/$),h===d&&(y=2+(b-u)/$),b===d&&(y=4+(u-h)/$),y*=60,y<0&&(y+=360)),[y,S,L]},nl=rl,al=I.unpack,sl=Math.floor,ll=function(){for(var r,s,u,h,b,k,d=[],$=arguments.length;$--;)d[$]=arguments[$];d=al(d,"hsv");var y=d[0],S=d[1],L=d[2],U,R,V;if(L*=255,S===0)U=R=V=L;else{y===360&&(y=0),y>360&&(y-=360),y<0&&(y+=360),y/=60;var H=sl(y),oe=y-H,pe=L*(1-S),we=L*(1-S*oe),ye=L*(1-S*(1-oe));switch(H){case 0:r=[L,ye,pe],U=r[0],R=r[1],V=r[2];break;case 1:s=[we,L,pe],U=s[0],R=s[1],V=s[2];break;case 2:u=[pe,L,ye],U=u[0],R=u[1],V=u[2];break;case 3:h=[pe,we,L],U=h[0],R=h[1],V=h[2];break;case 4:b=[ye,pe,L],U=b[0],R=b[1],V=b[2];break;case 5:k=[L,pe,we],U=k[0],R=k[1],V=k[2];break}}return[U,R,V,d.length>3?d[3]:1]},il=ll,ol=I.unpack,fl=I.type,ul=_,kn=D,wn=re,cl=nl;kn.prototype.hsv=function(){return cl(this._rgb)},ul.hsv=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return new(Function.prototype.bind.apply(kn,[null].concat(r,["hsv"])))},wn.format.hsv=il,wn.autodetect.push({p:2,test:function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];if(r=ol(r,"hsv"),fl(r)==="array"&&r.length===3)return"hsv"}});var mr={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},Yt=mr,hl=I.unpack,$n=Math.pow,gl=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];var u=hl(r,"rgb"),h=u[0],b=u[1],k=u[2],d=vl(h,b,k),$=d[0],y=d[1],S=d[2],L=116*y-16;return[L<0?0:L,500*($-y),200*(y-S)]},Lr=function(r){return(r/=255)<=.04045?r/12.92:$n((r+.055)/1.055,2.4)},Ar=function(r){return r>Yt.t3?$n(r,1/3):r/Yt.t2+Yt.t0},vl=function(r,s,u){r=Lr(r),s=Lr(s),u=Lr(u);var h=Ar((.4124564*r+.3575761*s+.1804375*u)/Yt.Xn),b=Ar((.2126729*r+.7151522*s+.072175*u)/Yt.Yn),k=Ar((.0193339*r+.119192*s+.9503041*u)/Yt.Zn);return[h,b,k]},yn=gl,Qt=mr,pl=I.unpack,dl=Math.pow,ml=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];r=pl(r,"lab");var u=r[0],h=r[1],b=r[2],k,d,$,y,S,L;return d=(u+16)/116,k=isNaN(h)?d:d+h/500,$=isNaN(b)?d:d-b/200,d=Qt.Yn*Tr(d),k=Qt.Xn*Tr(k),$=Qt.Zn*Tr($),y=Rr(3.2404542*k-1.5371385*d-.4985314*$),S=Rr(-.969266*k+1.8760108*d+.041556*$),L=Rr(.0556434*k-.2040259*d+1.0572252*$),[y,S,L,r.length>3?r[3]:1]},Rr=function(r){return 255*(r<=.00304?12.92*r:1.055*dl(r,1/2.4)-.055)},Tr=function(r){return r>Qt.t1?r*r*r:Qt.t2*(r-Qt.t0)},Cn=ml,bl=I.unpack,_l=I.type,kl=_,En=D,Mn=re,wl=yn;En.prototype.lab=function(){return wl(this._rgb)},kl.lab=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return new(Function.prototype.bind.apply(En,[null].concat(r,["lab"])))},Mn.format.lab=Cn,Mn.autodetect.push({p:2,test:function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];if(r=bl(r,"lab"),_l(r)==="array"&&r.length===3)return"lab"}});var $l=I.unpack,yl=I.RAD2DEG,Cl=Math.sqrt,El=Math.atan2,Ml=Math.round,Sl=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];var u=$l(r,"lab"),h=u[0],b=u[1],k=u[2],d=Cl(b*b+k*k),$=(El(k,b)*yl+360)%360;return Ml(d*1e4)===0&&($=Number.NaN),[h,d,$]},Sn=Sl,Il=I.unpack,Fl=yn,Ll=Sn,Al=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];var u=Il(r,"rgb"),h=u[0],b=u[1],k=u[2],d=Fl(h,b,k),$=d[0],y=d[1],S=d[2];return Ll($,y,S)},Rl=Al,Tl=I.unpack,Dl=I.DEG2RAD,Ol=Math.sin,Pl=Math.cos,Nl=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];var u=Tl(r,"lch"),h=u[0],b=u[1],k=u[2];return isNaN(k)&&(k=0),k=k*Dl,[h,Pl(k)*b,Ol(k)*b]},In=Nl,zl=I.unpack,xl=In,Bl=Cn,Ul=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];r=zl(r,"lch");var u=r[0],h=r[1],b=r[2],k=xl(u,h,b),d=k[0],$=k[1],y=k[2],S=Bl(d,$,y),L=S[0],U=S[1],R=S[2];return[L,U,R,r.length>3?r[3]:1]},Fn=Ul,Wl=I.unpack,jl=Fn,ql=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];var u=Wl(r,"hcl").reverse();return jl.apply(void 0,u)},Gl=ql,Hl=I.unpack,Vl=I.type,Ln=_,br=D,Dr=re,An=Rl;br.prototype.lch=function(){return An(this._rgb)},br.prototype.hcl=function(){return An(this._rgb).reverse()},Ln.lch=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return new(Function.prototype.bind.apply(br,[null].concat(r,["lch"])))},Ln.hcl=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return new(Function.prototype.bind.apply(br,[null].concat(r,["hcl"])))},Dr.format.lch=Fn,Dr.format.hcl=Gl,["lch","hcl"].forEach(function(r){return Dr.autodetect.push({p:2,test:function(){for(var s=[],u=arguments.length;u--;)s[u]=arguments[u];if(s=Hl(s,r),Vl(s)==="array"&&s.length===3)return r}})});var Yl={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Rn=Yl,Ql=D,Tn=re,Xl=I.type,cr=Rn,Jl=hn,Zl=cn;Ql.prototype.name=function(){for(var r=Zl(this._rgb,"rgb"),s=0,u=Object.keys(cr);s<u.length;s+=1){var h=u[s];if(cr[h]===r)return h.toLowerCase()}return r},Tn.format.named=function(r){if(r=r.toLowerCase(),cr[r])return Jl(cr[r]);throw new Error("unknown color name: "+r)},Tn.autodetect.push({p:5,test:function(r){for(var s=[],u=arguments.length-1;u-- >0;)s[u]=arguments[u+1];if(!s.length&&Xl(r)==="string"&&cr[r.toLowerCase()])return"named"}});var Kl=I.unpack,ei=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];var u=Kl(r,"rgb"),h=u[0],b=u[1],k=u[2];return(h<<16)+(b<<8)+k},ti=ei,ri=I.type,ni=function(r){if(ri(r)=="number"&&r>=0&&r<=16777215){var s=r>>16,u=r>>8&255,h=r&255;return[s,u,h,1]}throw new Error("unknown num color: "+r)},ai=ni,si=_,Dn=D,On=re,li=I.type,ii=ti;Dn.prototype.num=function(){return ii(this._rgb)},si.num=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return new(Function.prototype.bind.apply(Dn,[null].concat(r,["num"])))},On.format.num=ai,On.autodetect.push({p:5,test:function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];if(r.length===1&&li(r[0])==="number"&&r[0]>=0&&r[0]<=16777215)return"num"}});var oi=_,Or=D,Pn=re,Nn=I.unpack,zn=I.type,xn=Math.round;Or.prototype.rgb=function(r){return r===void 0&&(r=!0),r===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(xn)},Or.prototype.rgba=function(r){return r===void 0&&(r=!0),this._rgb.slice(0,4).map(function(s,u){return u<3?r===!1?s:xn(s):s})},oi.rgb=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return new(Function.prototype.bind.apply(Or,[null].concat(r,["rgb"])))},Pn.format.rgb=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];var u=Nn(r,"rgba");return u[3]===void 0&&(u[3]=1),u},Pn.autodetect.push({p:3,test:function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];if(r=Nn(r,"rgba"),zn(r)==="array"&&(r.length===3||r.length===4&&zn(r[3])=="number"&&r[3]>=0&&r[3]<=1))return"rgb"}});var _r=Math.log,fi=function(r){var s=r/100,u,h,b;return s<66?(u=255,h=s<6?0:-155.25485562709179-.44596950469579133*(h=s-2)+104.49216199393888*_r(h),b=s<20?0:-254.76935184120902+.8274096064007395*(b=s-10)+115.67994401066147*_r(b)):(u=351.97690566805693+.114206453784165*(u=s-55)-40.25366309332127*_r(u),h=325.4494125711974+.07943456536662342*(h=s-50)-28.0852963507957*_r(h),b=255),[u,h,b,1]},Bn=fi,ui=Bn,ci=I.unpack,hi=Math.round,gi=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];for(var u=ci(r,"rgb"),h=u[0],b=u[2],k=1e3,d=4e4,$=.4,y;d-k>$;){y=(d+k)*.5;var S=ui(y);S[2]/S[0]>=b/h?d=y:k=y}return hi(y)},vi=gi,Pr=_,kr=D,Nr=re,pi=vi;kr.prototype.temp=kr.prototype.kelvin=kr.prototype.temperature=function(){return pi(this._rgb)},Pr.temp=Pr.kelvin=Pr.temperature=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return new(Function.prototype.bind.apply(kr,[null].concat(r,["temp"])))},Nr.format.temp=Nr.format.kelvin=Nr.format.temperature=Bn;var di=I.unpack,zr=Math.cbrt,mi=Math.pow,bi=Math.sign,_i=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];var u=di(r,"rgb"),h=u[0],b=u[1],k=u[2],d=[xr(h/255),xr(b/255),xr(k/255)],$=d[0],y=d[1],S=d[2],L=zr(.4122214708*$+.5363325363*y+.0514459929*S),U=zr(.2119034982*$+.6806995451*y+.1073969566*S),R=zr(.0883024619*$+.2817188376*y+.6299787005*S);return[.2104542553*L+.793617785*U-.0040720468*R,1.9779984951*L-2.428592205*U+.4505937099*R,.0259040371*L+.7827717662*U-.808675766*R]},Un=_i;function xr(r){var s=Math.abs(r);return s<.04045?r/12.92:(bi(r)||1)*mi((s+.055)/1.055,2.4)}var ki=I.unpack,wr=Math.pow,wi=Math.sign,$i=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];r=ki(r,"lab");var u=r[0],h=r[1],b=r[2],k=wr(u+.3963377774*h+.2158037573*b,3),d=wr(u-.1055613458*h-.0638541728*b,3),$=wr(u-.0894841775*h-1.291485548*b,3);return[255*Br(4.0767416621*k-3.3077115913*d+.2309699292*$),255*Br(-1.2684380046*k+2.6097574011*d-.3413193965*$),255*Br(-.0041960863*k-.7034186147*d+1.707614701*$),r.length>3?r[3]:1]},Wn=$i;function Br(r){var s=Math.abs(r);return s>.0031308?(wi(r)||1)*(1.055*wr(s,1/2.4)-.055):r*12.92}var yi=I.unpack,Ci=I.type,Ei=_,jn=D,qn=re,Mi=Un;jn.prototype.oklab=function(){return Mi(this._rgb)},Ei.oklab=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return new(Function.prototype.bind.apply(jn,[null].concat(r,["oklab"])))},qn.format.oklab=Wn,qn.autodetect.push({p:3,test:function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];if(r=yi(r,"oklab"),Ci(r)==="array"&&r.length===3)return"oklab"}});var Si=I.unpack,Ii=Un,Fi=Sn,Li=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];var u=Si(r,"rgb"),h=u[0],b=u[1],k=u[2],d=Ii(h,b,k),$=d[0],y=d[1],S=d[2];return Fi($,y,S)},Ai=Li,Ri=I.unpack,Ti=In,Di=Wn,Oi=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];r=Ri(r,"lch");var u=r[0],h=r[1],b=r[2],k=Ti(u,h,b),d=k[0],$=k[1],y=k[2],S=Di(d,$,y),L=S[0],U=S[1],R=S[2];return[L,U,R,r.length>3?r[3]:1]},Pi=Oi,Ni=I.unpack,zi=I.type,xi=_,Gn=D,Hn=re,Bi=Ai;Gn.prototype.oklch=function(){return Bi(this._rgb)},xi.oklch=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return new(Function.prototype.bind.apply(Gn,[null].concat(r,["oklch"])))},Hn.format.oklch=Pi,Hn.autodetect.push({p:3,test:function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];if(r=Ni(r,"oklch"),zi(r)==="array"&&r.length===3)return"oklch"}});var Vn=D,Ui=I.type;Vn.prototype.alpha=function(r,s){return s===void 0&&(s=!1),r!==void 0&&Ui(r)==="number"?s?(this._rgb[3]=r,this):new Vn([this._rgb[0],this._rgb[1],this._rgb[2],r],"rgb"):this._rgb[3]};var Wi=D;Wi.prototype.clipped=function(){return this._rgb._clipped||!1};var Ut=D,ji=mr;Ut.prototype.darken=function(r){r===void 0&&(r=1);var s=this,u=s.lab();return u[0]-=ji.Kn*r,new Ut(u,"lab").alpha(s.alpha(),!0)},Ut.prototype.brighten=function(r){return r===void 0&&(r=1),this.darken(-r)},Ut.prototype.darker=Ut.prototype.darken,Ut.prototype.brighter=Ut.prototype.brighten;var qi=D;qi.prototype.get=function(r){var s=r.split("."),u=s[0],h=s[1],b=this[u]();if(h){var k=u.indexOf(h)-(u.substr(0,2)==="ok"?2:0);if(k>-1)return b[k];throw new Error("unknown channel "+h+" in mode "+u)}else return b};var Xt=D,Gi=I.type,Hi=Math.pow,Vi=1e-7,Yi=20;Xt.prototype.luminance=function(r){if(r!==void 0&&Gi(r)==="number"){if(r===0)return new Xt([0,0,0,this._rgb[3]],"rgb");if(r===1)return new Xt([255,255,255,this._rgb[3]],"rgb");var s=this.luminance(),u="rgb",h=Yi,b=function(d,$){var y=d.interpolate($,.5,u),S=y.luminance();return Math.abs(r-S)<Vi||!h--?y:S>r?b(d,y):b(y,$)},k=(s>r?b(new Xt([0,0,0]),this):b(this,new Xt([255,255,255]))).rgb();return new Xt(k.concat([this._rgb[3]]))}return Qi.apply(void 0,this._rgb.slice(0,3))};var Qi=function(r,s,u){return r=Ur(r),s=Ur(s),u=Ur(u),.2126*r+.7152*s+.0722*u},Ur=function(r){return r/=255,r<=.03928?r/12.92:Hi((r+.055)/1.055,2.4)},mt={},Yn=D,Qn=I.type,$r=mt,Xn=function(r,s,u){u===void 0&&(u=.5);for(var h=[],b=arguments.length-3;b-- >0;)h[b]=arguments[b+3];var k=h[0]||"lrgb";if(!$r[k]&&!h.length&&(k=Object.keys($r)[0]),!$r[k])throw new Error("interpolation mode "+k+" is not defined");return Qn(r)!=="object"&&(r=new Yn(r)),Qn(s)!=="object"&&(s=new Yn(s)),$r[k](r,s,u).alpha(r.alpha()+u*(s.alpha()-r.alpha()))},Jn=D,Xi=Xn;Jn.prototype.mix=Jn.prototype.interpolate=function(r,s){s===void 0&&(s=.5);for(var u=[],h=arguments.length-2;h-- >0;)u[h]=arguments[h+2];return Xi.apply(void 0,[this,r,s].concat(u))};var Zn=D;Zn.prototype.premultiply=function(r){r===void 0&&(r=!1);var s=this._rgb,u=s[3];return r?(this._rgb=[s[0]*u,s[1]*u,s[2]*u,u],this):new Zn([s[0]*u,s[1]*u,s[2]*u,u],"rgb")};var Wr=D,Ji=mr;Wr.prototype.saturate=function(r){r===void 0&&(r=1);var s=this,u=s.lch();return u[1]+=Ji.Kn*r,u[1]<0&&(u[1]=0),new Wr(u,"lch").alpha(s.alpha(),!0)},Wr.prototype.desaturate=function(r){return r===void 0&&(r=1),this.saturate(-r)};var Kn=D,ea=I.type;Kn.prototype.set=function(r,s,u){u===void 0&&(u=!1);var h=r.split("."),b=h[0],k=h[1],d=this[b]();if(k){var $=b.indexOf(k)-(b.substr(0,2)==="ok"?2:0);if($>-1){if(ea(s)=="string")switch(s.charAt(0)){case"+":d[$]+=+s;break;case"-":d[$]+=+s;break;case"*":d[$]*=+s.substr(1);break;case"/":d[$]/=+s.substr(1);break;default:d[$]=+s}else if(ea(s)==="number")d[$]=s;else throw new Error("unsupported value for Color.set");var y=new Kn(d,b);return u?(this._rgb=y._rgb,this):y}throw new Error("unknown channel "+k+" in mode "+b)}else return d};var Zi=D,Ki=function(r,s,u){var h=r._rgb,b=s._rgb;return new Zi(h[0]+u*(b[0]-h[0]),h[1]+u*(b[1]-h[1]),h[2]+u*(b[2]-h[2]),"rgb")};mt.rgb=Ki;var eo=D,jr=Math.sqrt,Jt=Math.pow,to=function(r,s,u){var h=r._rgb,b=h[0],k=h[1],d=h[2],$=s._rgb,y=$[0],S=$[1],L=$[2];return new eo(jr(Jt(b,2)*(1-u)+Jt(y,2)*u),jr(Jt(k,2)*(1-u)+Jt(S,2)*u),jr(Jt(d,2)*(1-u)+Jt(L,2)*u),"rgb")};mt.lrgb=to;var ro=D,no=function(r,s,u){var h=r.lab(),b=s.lab();return new ro(h[0]+u*(b[0]-h[0]),h[1]+u*(b[1]-h[1]),h[2]+u*(b[2]-h[2]),"lab")};mt.lab=no;var ta=D,Zt=function(r,s,u,h){var b,k,d,$;h==="hsl"?(d=r.hsl(),$=s.hsl()):h==="hsv"?(d=r.hsv(),$=s.hsv()):h==="hcg"?(d=r.hcg(),$=s.hcg()):h==="hsi"?(d=r.hsi(),$=s.hsi()):h==="lch"||h==="hcl"?(h="hcl",d=r.hcl(),$=s.hcl()):h==="oklch"&&(d=r.oklch().reverse(),$=s.oklch().reverse());var y,S,L,U,R,V;(h.substr(0,1)==="h"||h==="oklch")&&(b=d,y=b[0],L=b[1],R=b[2],k=$,S=k[0],U=k[1],V=k[2]);var H,oe,pe,we;return!isNaN(y)&&!isNaN(S)?(S>y&&S-y>180?we=S-(y+360):S<y&&y-S>180?we=S+360-y:we=S-y,oe=y+u*we):isNaN(y)?isNaN(S)?oe=Number.NaN:(oe=S,(R==1||R==0)&&h!="hsv"&&(H=U)):(oe=y,(V==1||V==0)&&h!="hsv"&&(H=L)),H===void 0&&(H=L+u*(U-L)),pe=R+u*(V-R),h==="oklch"?new ta([pe,H,oe],h):new ta([oe,H,pe],h)},ao=Zt,ra=function(r,s,u){return ao(r,s,u,"lch")};mt.lch=ra,mt.hcl=ra;var so=D,lo=function(r,s,u){var h=r.num(),b=s.num();return new so(h+u*(b-h),"num")};mt.num=lo;var io=Zt,oo=function(r,s,u){return io(r,s,u,"hcg")};mt.hcg=oo;var fo=Zt,uo=function(r,s,u){return fo(r,s,u,"hsi")};mt.hsi=uo;var co=Zt,ho=function(r,s,u){return co(r,s,u,"hsl")};mt.hsl=ho;var go=Zt,vo=function(r,s,u){return go(r,s,u,"hsv")};mt.hsv=vo;var po=D,mo=function(r,s,u){var h=r.oklab(),b=s.oklab();return new po(h[0]+u*(b[0]-h[0]),h[1]+u*(b[1]-h[1]),h[2]+u*(b[2]-h[2]),"oklab")};mt.oklab=mo;var bo=Zt,_o=function(r,s,u){return bo(r,s,u,"oklch")};mt.oklch=_o;var qr=D,ko=I.clip_rgb,Gr=Math.pow,Hr=Math.sqrt,Vr=Math.PI,na=Math.cos,aa=Math.sin,wo=Math.atan2,$o=function(r,s,u){s===void 0&&(s="lrgb"),u===void 0&&(u=null);var h=r.length;u||(u=Array.from(new Array(h)).map(function(){return 1}));var b=h/u.reduce(function(oe,pe){return oe+pe});if(u.forEach(function(oe,pe){u[pe]*=b}),r=r.map(function(oe){return new qr(oe)}),s==="lrgb")return yo(r,u);for(var k=r.shift(),d=k.get(s),$=[],y=0,S=0,L=0;L<d.length;L++)if(d[L]=(d[L]||0)*u[0],$.push(isNaN(d[L])?0:u[0]),s.charAt(L)==="h"&&!isNaN(d[L])){var U=d[L]/180*Vr;y+=na(U)*u[0],S+=aa(U)*u[0]}var R=k.alpha()*u[0];r.forEach(function(oe,pe){var we=oe.get(s);R+=oe.alpha()*u[pe+1];for(var ye=0;ye<d.length;ye++)if(!isNaN(we[ye]))if($[ye]+=u[pe+1],s.charAt(ye)==="h"){var et=we[ye]/180*Vr;y+=na(et)*u[pe+1],S+=aa(et)*u[pe+1]}else d[ye]+=we[ye]*u[pe+1]});for(var V=0;V<d.length;V++)if(s.charAt(V)==="h"){for(var H=wo(S/$[V],y/$[V])/Vr*180;H<0;)H+=360;for(;H>=360;)H-=360;d[V]=H}else d[V]=d[V]/$[V];return R/=h,new qr(d,s).alpha(R>.99999?1:R,!0)},yo=function(r,s){for(var u=r.length,h=[0,0,0,0],b=0;b<r.length;b++){var k=r[b],d=s[b]/u,$=k._rgb;h[0]+=Gr($[0],2)*d,h[1]+=Gr($[1],2)*d,h[2]+=Gr($[2],2)*d,h[3]+=$[3]*d}return h[0]=Hr(h[0]),h[1]=Hr(h[1]),h[2]=Hr(h[2]),h[3]>.9999999&&(h[3]=1),new qr(ko(h))},Et=_,Kt=I.type,Co=Math.pow,Yr=function(r){var s="rgb",u=Et("#ccc"),h=0,b=[0,1],k=[],d=[0,0],$=!1,y=[],S=!1,L=0,U=1,R=!1,V={},H=!0,oe=1,pe=function(T){if(T=T||["#fff","#000"],T&&Kt(T)==="string"&&Et.brewer&&Et.brewer[T.toLowerCase()]&&(T=Et.brewer[T.toLowerCase()]),Kt(T)==="array"){T.length===1&&(T=[T[0],T[0]]),T=T.slice(0);for(var le=0;le<T.length;le++)T[le]=Et(T[le]);k.length=0;for(var ve=0;ve<T.length;ve++)k.push(ve/(T.length-1))}return vt(),y=T},we=function(T){if($!=null){for(var le=$.length-1,ve=0;ve<le&&T>=$[ve];)ve++;return ve-1}return 0},ye=function(T){return T},et=function(T){return T},Je=function(T,le){var ve,fe;if(le==null&&(le=!1),isNaN(T)||T===null)return u;if(le)fe=T;else if($&&$.length>2){var tt=we(T);fe=tt/($.length-2)}else U!==L?fe=(T-L)/(U-L):fe=1;fe=et(fe),le||(fe=ye(fe)),oe!==1&&(fe=Co(fe,oe)),fe=d[0]+fe*(1-d[0]-d[1]),fe=Math.min(1,Math.max(0,fe));var Pe=Math.floor(fe*1e4);if(H&&V[Pe])ve=V[Pe];else{if(Kt(y)==="array")for(var $e=0;$e<k.length;$e++){var Me=k[$e];if(fe<=Me){ve=y[$e];break}if(fe>=Me&&$e===k.length-1){ve=y[$e];break}if(fe>Me&&fe<k[$e+1]){fe=(fe-Me)/(k[$e+1]-Me),ve=Et.interpolate(y[$e],y[$e+1],fe,s);break}}else Kt(y)==="function"&&(ve=y(fe));H&&(V[Pe]=ve)}return ve},vt=function(){return V={}};pe(r);var ke=function(T){var le=Et(Je(T));return S&&le[S]?le[S]():le};return ke.classes=function(T){if(T!=null){if(Kt(T)==="array")$=T,b=[T[0],T[T.length-1]];else{var le=Et.analyze(b);T===0?$=[le.min,le.max]:$=Et.limits(le,"e",T)}return ke}return $},ke.domain=function(T){if(!arguments.length)return b;L=T[0],U=T[T.length-1],k=[];var le=y.length;if(T.length===le&&L!==U)for(var ve=0,fe=Array.from(T);ve<fe.length;ve+=1){var tt=fe[ve];k.push((tt-L)/(U-L))}else{for(var Pe=0;Pe<le;Pe++)k.push(Pe/(le-1));if(T.length>2){var $e=T.map(function(Se,Fe){return Fe/(T.length-1)}),Me=T.map(function(Se){return(Se-L)/(U-L)});Me.every(function(Se,Fe){return $e[Fe]===Se})||(et=function(Se){if(Se<=0||Se>=1)return Se;for(var Fe=0;Se>=Me[Fe+1];)Fe++;var St=(Se-Me[Fe])/(Me[Fe+1]-Me[Fe]),Nt=$e[Fe]+St*($e[Fe+1]-$e[Fe]);return Nt})}}return b=[L,U],ke},ke.mode=function(T){return arguments.length?(s=T,vt(),ke):s},ke.range=function(T,le){return pe(T),ke},ke.out=function(T){return S=T,ke},ke.spread=function(T){return arguments.length?(h=T,ke):h},ke.correctLightness=function(T){return T==null&&(T=!0),R=T,vt(),R?ye=function(le){for(var ve=Je(0,!0).lab()[0],fe=Je(1,!0).lab()[0],tt=ve>fe,Pe=Je(le,!0).lab()[0],$e=ve+(fe-ve)*le,Me=Pe-$e,Se=0,Fe=1,St=20;Math.abs(Me)>.01&&St-- >0;)(function(){return tt&&(Me*=-1),Me<0?(Se=le,le+=(Fe-le)*.5):(Fe=le,le+=(Se-le)*.5),Pe=Je(le,!0).lab()[0],Me=Pe-$e})();return le}:ye=function(le){return le},ke},ke.padding=function(T){return T!=null?(Kt(T)==="number"&&(T=[T,T]),d=T,ke):d},ke.colors=function(T,le){arguments.length<2&&(le="hex");var ve=[];if(arguments.length===0)ve=y.slice(0);else if(T===1)ve=[ke(.5)];else if(T>1){var fe=b[0],tt=b[1]-fe;ve=Eo(0,T,!1).map(function(Fe){return ke(fe+Fe/(T-1)*tt)})}else{r=[];var Pe=[];if($&&$.length>2)for(var $e=1,Me=$.length,Se=1<=Me;Se?$e<Me:$e>Me;Se?$e++:$e--)Pe.push(($[$e-1]+$[$e])*.5);else Pe=b;ve=Pe.map(function(Fe){return ke(Fe)})}return Et[le]&&(ve=ve.map(function(Fe){return Fe[le]()})),ve},ke.cache=function(T){return T!=null?(H=T,ke):H},ke.gamma=function(T){return T!=null?(oe=T,ke):oe},ke.nodata=function(T){return T!=null?(u=Et(T),ke):u},ke};function Eo(r,s,u){for(var h=[],b=r<s,k=u?b?s+1:s-1:s,d=r;b?d<k:d>k;b?d++:d--)h.push(d);return h}var hr=D,Mo=Yr,So=function(r){for(var s=[1,1],u=1;u<r;u++){for(var h=[1],b=1;b<=s.length;b++)h[b]=(s[b]||0)+s[b-1];s=h}return s},Io=function(r){var s,u,h,b,k,d,$;if(r=r.map(function(R){return new hr(R)}),r.length===2)s=r.map(function(R){return R.lab()}),k=s[0],d=s[1],b=function(R){var V=[0,1,2].map(function(H){return k[H]+R*(d[H]-k[H])});return new hr(V,"lab")};else if(r.length===3)u=r.map(function(R){return R.lab()}),k=u[0],d=u[1],$=u[2],b=function(R){var V=[0,1,2].map(function(H){return(1-R)*(1-R)*k[H]+2*(1-R)*R*d[H]+R*R*$[H]});return new hr(V,"lab")};else if(r.length===4){var y;h=r.map(function(R){return R.lab()}),k=h[0],d=h[1],$=h[2],y=h[3],b=function(R){var V=[0,1,2].map(function(H){return(1-R)*(1-R)*(1-R)*k[H]+3*(1-R)*(1-R)*R*d[H]+3*(1-R)*R*R*$[H]+R*R*R*y[H]});return new hr(V,"lab")}}else if(r.length>=5){var S,L,U;S=r.map(function(R){return R.lab()}),U=r.length-1,L=So(U),b=function(R){var V=1-R,H=[0,1,2].map(function(oe){return S.reduce(function(pe,we,ye){return pe+L[ye]*Math.pow(V,U-ye)*Math.pow(R,ye)*we[oe]},0)});return new hr(H,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return b},Fo=function(r){var s=Io(r);return s.scale=function(){return Mo(s)},s},Qr=_,Mt=function(r,s,u){if(!Mt[u])throw new Error("unknown blend mode "+u);return Mt[u](r,s)},Ot=function(r){return function(s,u){var h=Qr(u).rgb(),b=Qr(s).rgb();return Qr.rgb(r(h,b))}},Pt=function(r){return function(s,u){var h=[];return h[0]=r(s[0],u[0]),h[1]=r(s[1],u[1]),h[2]=r(s[2],u[2]),h}},Lo=function(r){return r},Ao=function(r,s){return r*s/255},Ro=function(r,s){return r>s?s:r},To=function(r,s){return r>s?r:s},Do=function(r,s){return 255*(1-(1-r/255)*(1-s/255))},Oo=function(r,s){return s<128?2*r*s/255:255*(1-2*(1-r/255)*(1-s/255))},Po=function(r,s){return 255*(1-(1-s/255)/(r/255))},No=function(r,s){return r===255?255:(r=255*(s/255)/(1-r/255),r>255?255:r)};Mt.normal=Ot(Pt(Lo)),Mt.multiply=Ot(Pt(Ao)),Mt.screen=Ot(Pt(Do)),Mt.overlay=Ot(Pt(Oo)),Mt.darken=Ot(Pt(Ro)),Mt.lighten=Ot(Pt(To)),Mt.dodge=Ot(Pt(No)),Mt.burn=Ot(Pt(Po));for(var zo=Mt,Xr=I.type,xo=I.clip_rgb,Bo=I.TWOPI,Uo=Math.pow,Wo=Math.sin,jo=Math.cos,sa=_,qo=function(r,s,u,h,b){r===void 0&&(r=300),s===void 0&&(s=-1.5),u===void 0&&(u=1),h===void 0&&(h=1),b===void 0&&(b=[0,1]);var k=0,d;Xr(b)==="array"?d=b[1]-b[0]:(d=0,b=[b,b]);var $=function(y){var S=Bo*((r+120)/360+s*y),L=Uo(b[0]+d*y,h),U=k!==0?u[0]+y*k:u,R=U*L*(1-L)/2,V=jo(S),H=Wo(S),oe=L+R*(-.14861*V+1.78277*H),pe=L+R*(-.29227*V-.90649*H),we=L+R*(1.97294*V);return sa(xo([oe*255,pe*255,we*255,1]))};return $.start=function(y){return y==null?r:(r=y,$)},$.rotations=function(y){return y==null?s:(s=y,$)},$.gamma=function(y){return y==null?h:(h=y,$)},$.hue=function(y){return y==null?u:(u=y,Xr(u)==="array"?(k=u[1]-u[0],k===0&&(u=u[1])):k=0,$)},$.lightness=function(y){return y==null?b:(Xr(y)==="array"?(b=y,d=y[1]-y[0]):(b=[y,y],d=0),$)},$.scale=function(){return sa.scale($)},$.hue(u),$},Go=D,Ho="0123456789abcdef",Vo=Math.floor,Yo=Math.random,Qo=function(){for(var r="#",s=0;s<6;s++)r+=Ho.charAt(Vo(Yo()*16));return new Go(r,"hex")},Jr=g,la=Math.log,Xo=Math.pow,Jo=Math.floor,Zo=Math.abs,ia=function(r,s){s===void 0&&(s=null);var u={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return Jr(r)==="object"&&(r=Object.values(r)),r.forEach(function(h){s&&Jr(h)==="object"&&(h=h[s]),h!=null&&!isNaN(h)&&(u.values.push(h),u.sum+=h,h<u.min&&(u.min=h),h>u.max&&(u.max=h),u.count+=1)}),u.domain=[u.min,u.max],u.limits=function(h,b){return oa(u,h,b)},u},oa=function(r,s,u){s===void 0&&(s="equal"),u===void 0&&(u=7),Jr(r)=="array"&&(r=ia(r));var h=r.min,b=r.max,k=r.values.sort(function(Kr,en){return Kr-en});if(u===1)return[h,b];var d=[];if(s.substr(0,1)==="c"&&(d.push(h),d.push(b)),s.substr(0,1)==="e"){d.push(h);for(var $=1;$<u;$++)d.push(h+$/u*(b-h));d.push(b)}else if(s.substr(0,1)==="l"){if(h<=0)throw new Error("Logarithmic scales are only possible for values > 0");var y=Math.LOG10E*la(h),S=Math.LOG10E*la(b);d.push(h);for(var L=1;L<u;L++)d.push(Xo(10,y+L/u*(S-y)));d.push(b)}else if(s.substr(0,1)==="q"){d.push(h);for(var U=1;U<u;U++){var R=(k.length-1)*U/u,V=Jo(R);if(V===R)d.push(k[V]);else{var H=R-V;d.push(k[V]*(1-H)+k[V+1]*H)}}d.push(b)}else if(s.substr(0,1)==="k"){var oe,pe=k.length,we=new Array(pe),ye=new Array(u),et=!0,Je=0,vt=null;vt=[],vt.push(h);for(var ke=1;ke<u;ke++)vt.push(h+ke/u*(b-h));for(vt.push(b);et;){for(var T=0;T<u;T++)ye[T]=0;for(var le=0;le<pe;le++)for(var ve=k[le],fe=Number.MAX_VALUE,tt=void 0,Pe=0;Pe<u;Pe++){var $e=Zo(vt[Pe]-ve);$e<fe&&(fe=$e,tt=Pe),ye[tt]++,we[le]=tt}for(var Me=new Array(u),Se=0;Se<u;Se++)Me[Se]=null;for(var Fe=0;Fe<pe;Fe++)oe=we[Fe],Me[oe]===null?Me[oe]=k[Fe]:Me[oe]+=k[Fe];for(var St=0;St<u;St++)Me[St]*=1/ye[St];et=!1;for(var Nt=0;Nt<u;Nt++)if(Me[Nt]!==vt[Nt]){et=!0;break}vt=Me,Je++,Je>200&&(et=!1)}for(var zt={},er=0;er<u;er++)zt[er]=[];for(var tr=0;tr<pe;tr++)oe=we[tr],zt[oe].push(k[tr]);for(var Dt=[],Wt=0;Wt<u;Wt++)Dt.push(zt[Wt][0]),Dt.push(zt[Wt][zt[Wt].length-1]);Dt=Dt.sort(function(Kr,en){return Kr-en}),d.push(Dt[0]);for(var gr=1;gr<Dt.length;gr+=2){var jt=Dt[gr];!isNaN(jt)&&d.indexOf(jt)===-1&&d.push(jt)}}return d},fa={analyze:ia,limits:oa},ua=D,Ko=function(r,s){r=new ua(r),s=new ua(s);var u=r.luminance(),h=s.luminance();return u>h?(u+.05)/(h+.05):(h+.05)/(u+.05)},ca=D,Tt=Math.sqrt,Qe=Math.pow,ef=Math.min,tf=Math.max,ha=Math.atan2,ga=Math.abs,yr=Math.cos,va=Math.sin,rf=Math.exp,pa=Math.PI,nf=function(r,s,u,h,b){u===void 0&&(u=1),h===void 0&&(h=1),b===void 0&&(b=1);var k=function(jt){return 360*jt/(2*pa)},d=function(jt){return 2*pa*jt/360};r=new ca(r),s=new ca(s);var $=Array.from(r.lab()),y=$[0],S=$[1],L=$[2],U=Array.from(s.lab()),R=U[0],V=U[1],H=U[2],oe=(y+R)/2,pe=Tt(Qe(S,2)+Qe(L,2)),we=Tt(Qe(V,2)+Qe(H,2)),ye=(pe+we)/2,et=.5*(1-Tt(Qe(ye,7)/(Qe(ye,7)+Qe(25,7)))),Je=S*(1+et),vt=V*(1+et),ke=Tt(Qe(Je,2)+Qe(L,2)),T=Tt(Qe(vt,2)+Qe(H,2)),le=(ke+T)/2,ve=k(ha(L,Je)),fe=k(ha(H,vt)),tt=ve>=0?ve:ve+360,Pe=fe>=0?fe:fe+360,$e=ga(tt-Pe)>180?(tt+Pe+360)/2:(tt+Pe)/2,Me=1-.17*yr(d($e-30))+.24*yr(d(2*$e))+.32*yr(d(3*$e+6))-.2*yr(d(4*$e-63)),Se=Pe-tt;Se=ga(Se)<=180?Se:Pe<=tt?Se+360:Se-360,Se=2*Tt(ke*T)*va(d(Se)/2);var Fe=R-y,St=T-ke,Nt=1+.015*Qe(oe-50,2)/Tt(20+Qe(oe-50,2)),zt=1+.045*le,er=1+.015*le*Me,tr=30*rf(-Qe(($e-275)/25,2)),Dt=2*Tt(Qe(le,7)/(Qe(le,7)+Qe(25,7))),Wt=-Dt*va(2*d(tr)),gr=Tt(Qe(Fe/(u*Nt),2)+Qe(St/(h*zt),2)+Qe(Se/(b*er),2)+Wt*(St/(h*zt))*(Se/(b*er)));return tf(0,ef(100,gr))},da=D,af=function(r,s,u){u===void 0&&(u="lab"),r=new da(r),s=new da(s);var h=r.get(u),b=s.get(u),k=0;for(var d in h){var $=(h[d]||0)-(b[d]||0);k+=$*$}return Math.sqrt(k)},sf=D,lf=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];try{return new(Function.prototype.bind.apply(sf,[null].concat(r))),!0}catch{return!1}},ma=_,ba=Yr,of={cool:function(){return ba([ma.hsl(180,1,.9),ma.hsl(250,.7,.4)])},hot:function(){return ba(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Cr={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Zr=0,_a=Object.keys(Cr);Zr<_a.length;Zr+=1){var ka=_a[Zr];Cr[ka.toLowerCase()]=Cr[ka]}var ff=Cr,Xe=_;Xe.average=$o,Xe.bezier=Fo,Xe.blend=zo,Xe.cubehelix=qo,Xe.mix=Xe.interpolate=Xn,Xe.random=Qo,Xe.scale=Yr,Xe.analyze=fa.analyze,Xe.contrast=Ko,Xe.deltaE=nf,Xe.distance=af,Xe.limits=fa.limits,Xe.valid=lf,Xe.scales=of,Xe.colors=Rn,Xe.brewer=ff;var uf=Xe;return uf})})(hs);var ku=hs.exports;const rr=is(ku);function wu(i){let e,t,n,a,l,o,c,f;return{c(){e=Z("div"),t=Z("label"),n=xe(i[1]),a=xe(":"),l=de(),o=Z("input"),this.h()},l(g){e=K(g,"DIV",{class:!0});var v=j(e);t=K(v,"LABEL",{class:!0});var p=j(t);n=Be(p,i[1]),a=Be(p,":"),p.forEach(C),l=me(v),o=K(v,"INPUT",{type:!0,name:!0,id:!0,class:!0}),v.forEach(C),this.h()},h(){E(t,"class","pr-2 text-xs text-neutral-400 text-right"),E(o,"type","color"),E(o,"name",i[1]),E(o,"id",i[1]),E(o,"class","emboss py-1 px-2 bg-neutral-700 border border-neutral-800 text-xs text-neutral-200"),E(e,"class","flex items-center")},m(g,v){Y(g,e,v),z(e,t),z(t,n),z(t,a),z(e,l),z(e,o),wa(o,i[0]),c||(f=[wt(o,"input",i[2]),wt(o,"input",i[3])],c=!0)},p(g,[v]){v&2&&$t(n,g[1]),v&2&&E(o,"name",g[1]),v&2&&E(o,"id",g[1]),v&1&&wa(o,g[0])},i:Ue,o:Ue,d(g){g&&C(e),c=!1,rn(f)}}}function $u(i,e,t){let{name:n}=e,{value:a="#0000FF"}=e;const l=vr();function o(f){if(f.target){const g=f.target;l("change",g.value)}}function c(){a=this.value,t(0,a)}return i.$$set=f=>{"name"in f&&t(1,n=f.name),"value"in f&&t(0,a=f.value)},[a,n,o,c]}class yu extends rt{constructor(e){super(),nt(this,e,$u,wu,Ge,{name:1,value:0})}}function Cu(i){let e,t,n,a,l,o={personaSide:`${i[4]}Front`};t=new nr({props:o}),i[10](t),t.$on("ready",i[8]);let c={personaSide:`${i[4]}Back`};return a=new nr({props:c}),i[11](a),a.$on("ready",i[8]),{c(){e=Z("div"),ue(t.$$.fragment),n=de(),ue(a.$$.fragment),this.h()},l(f){e=K(f,"DIV",{class:!0});var g=j(e);ce(t.$$.fragment,g),n=me(g),ce(a.$$.fragment,g),g.forEach(C),this.h()},h(){E(e,"class","flex w-full h-full")},m(f,g){Y(f,e,g),he(t,e,null),z(e,n),he(a,e,null),l=!0},p(f,g){const v={};g&16&&(v.personaSide=`${f[4]}Front`),t.$set(v);const p={};g&16&&(p.personaSide=`${f[4]}Back`),a.$set(p)},i(f){l||(N(t.$$.fragment,f),N(a.$$.fragment,f),l=!0)},o(f){x(t.$$.fragment,f),x(a.$$.fragment,f),l=!1},d(f){f&&C(e),i[10](null),ge(t),i[11](null),ge(a)}}}function Eu(i){let e,t;return e=new fr({props:{tabs:["Female","Male"],activeTab:i[4],caption:"Density Map",$$slots:{default:[Cu]},$$scope:{ctx:i}}}),e.$on("tabClick",i[7]),{c(){ue(e.$$.fragment)},l(n){ce(e.$$.fragment,n)},m(n,a){he(e,n,a),t=!0},p(n,a){const l={};a&16&&(l.activeTab=n[4]),a&4194332&&(l.$$scope={dirty:a,ctx:n}),e.$set(l)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){ge(e,n)}}}function Mu(i){let e,t,n,a,l,o,c,f,g,v;return n=new yu({props:{value:i[1],name:"Color"}}),n.$on("change",i[6]),o=new qt({props:{name:"Participants count",label:Object.keys(i[0].participants).length.toString()}}),g=new qt({props:{name:`${i[4]} participants count`,label:i[5].toString()}}),{c(){e=Z("ul"),t=Z("li"),ue(n.$$.fragment),a=de(),l=Z("li"),ue(o.$$.fragment),c=de(),f=Z("li"),ue(g.$$.fragment),this.h()},l(p){e=K(p,"UL",{class:!0});var w=j(e);t=K(w,"LI",{});var P=j(t);ce(n.$$.fragment,P),P.forEach(C),a=me(w),l=K(w,"LI",{});var q=j(l);ce(o.$$.fragment,q),q.forEach(C),c=me(w),f=K(w,"LI",{});var I=j(f);ce(g.$$.fragment,I),I.forEach(C),w.forEach(C),this.h()},h(){E(e,"class","p-2")},m(p,w){Y(p,e,w),z(e,t),he(n,t,null),z(e,a),z(e,l),he(o,l,null),z(e,c),z(e,f),he(g,f,null),v=!0},p(p,w){const P={};w&2&&(P.value=p[1]),n.$set(P);const q={};w&1&&(q.label=Object.keys(p[0].participants).length.toString()),o.$set(q);const I={};w&16&&(I.name=`${p[4]} participants count`),w&32&&(I.label=p[5].toString()),g.$set(I)},i(p){v||(N(n.$$.fragment,p),N(o.$$.fragment,p),N(g.$$.fragment,p),v=!0)},o(p){x(n.$$.fragment,p),x(o.$$.fragment,p),x(g.$$.fragment,p),v=!1},d(p){p&&C(e),ge(n),ge(o),ge(g)}}}function Su(i){let e,t;return e=new fr({props:{tabs:["Details"],highlightTab:!1,$$slots:{default:[Mu]},$$scope:{ctx:i}}}),{c(){ue(e.$$.fragment)},l(n){ce(e.$$.fragment,n)},m(n,a){he(e,n,a),t=!0},p(n,a){const l={};a&4194355&&(l.$$scope={dirty:a,ctx:n}),e.$set(l)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){ge(e,n)}}}function Ja(i){let e,t;return e=new sn({props:{$$slots:{settings:[Su],panels:[Eu]},$$scope:{ctx:i}}}),{c(){ue(e.$$.fragment)},l(n){ce(e.$$.fragment,n)},m(n,a){he(e,n,a),t=!0},p(n,a){const l={};a&4194367&&(l.$$scope={dirty:a,ctx:n}),e.$set(l)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){ge(e,n)}}}function Iu(i){let e=i[4],t,n,a=Ja(i);return{c(){a.c(),t=Ke()},l(l){a.l(l),t=Ke()},m(l,o){a.m(l,o),Y(l,t,o),n=!0},p(l,[o]){o&16&&Ge(e,e=l[4])?(ft(),x(a,1,1,Ue),ut(),a=Ja(l),a.c(),N(a,1),a.m(t.parentNode,t)):a.p(l,o)},i(l){n||(N(a),n=!0)},o(l){x(a),n=!1},d(l){l&&C(t),a.d(l)}}}function Fu(i,e,t){let n,{survey:a}=e,l,o,c="Female",f="#0000ff",g,v,p=0,w=0;const P=new Worker(new URL(""+new URL("../workers/binning.worker-0c4c5efe.js",import.meta.url).href,self.location),{type:"module"});function q(){return[{name:`DensityMap-${c}Front.png`,dataUrl:l.getImage()},{name:`DensityMap-${c}Back.png`,dataUrl:o.getImage()}]}function I(m){const M=[];for(const O of Object.values(a.participants)){const B=O.drawing[m];B&&M.push(B)}W(m,"Grouping drawings"),m.includes("Female"),t(5,p=M.length),p>0?(W(m,"Waiting"),P.postMessage({command:"getBins",params:{drawings:M,side:m.includes("Front")?"Front":"Back"}})):(w--,D(m))}function re(m,M){let O,B;const ne=n.domain([0,p]);W(m,"Drawing density map"),m==="Front"?(O=l.getCanvas(),B=l.getScaleFactor(),l.clear()):(O=o.getCanvas(),B=o.getScaleFactor(),o.clear());const ie=O.getContext("2d");if(ie==null)throw"Could not get context to draw density map.";for(let Re of M)ie.fillStyle=ne(Re.length).hex(),ie.fillRect(Re.x*B,Re.y*B,B,B);D(m)}function Q({detail:m}){t(1,f=m),re("Front",g),re("Back",v)}function ae({detail:m}){if(w>0){alert("Please wait until computations have completed.");return}t(4,c=m)}function G(m){const{personaSide:M}=m.detail;W(M,"Starting density computation"),w++,I(M)}function A(){P.onmessage=m=>{if(m.data.event==="bins"){const{side:M,bins:O}=m.data.params;M==="Front"?g=O:v=O,w--,re(M,O)}else if(m.data.event==="progress"){const{side:M,msg:O}=m.data.params;W(M,O)}}}function W(m,M){m.includes("Front")?l.setMessage(M):o.setMessage(M)}function D(m){m.includes("Front")?l.clearMessage():o.clearMessage()}Sr(()=>{A()});function J(m){lt[m?"unshift":"push"](()=>{l=m,t(2,l)})}function _(m){lt[m?"unshift":"push"](()=>{o=m,t(3,o)})}return i.$$set=m=>{"survey"in m&&t(0,a=m.survey)},i.$$.update=()=>{i.$$.dirty&2&&(n=rr.scale([rr(f).alpha(0),rr(f)]))},[a,f,l,o,c,p,Q,ae,G,q,J,_]}class Lu extends rt{constructor(e){super(),nt(this,e,Fu,Iu,Ge,{survey:0,getImages:9})}get survey(){return this.$$.ctx[0]}set survey(e){this.$$set({survey:e}),ss()}get getImages(){return this.$$.ctx[9]}}function Au(i){let e,t,n,a,l,o={personaSide:`${i[3]}Front`};t=new nr({props:o}),i[8](t),t.$on("ready",i[6]);let c={personaSide:`${i[3]}Back`};return a=new nr({props:c}),i[9](a),a.$on("ready",i[6]),{c(){e=Z("div"),ue(t.$$.fragment),n=de(),ue(a.$$.fragment),this.h()},l(f){e=K(f,"DIV",{class:!0});var g=j(e);ce(t.$$.fragment,g),n=me(g),ce(a.$$.fragment,g),g.forEach(C),this.h()},h(){E(e,"class","flex w-full h-full")},m(f,g){Y(f,e,g),he(t,e,null),z(e,n),he(a,e,null),l=!0},p(f,g){const v={};g&8&&(v.personaSide=`${f[3]}Front`),t.$set(v);const p={};g&8&&(p.personaSide=`${f[3]}Back`),a.$set(p)},i(f){l||(N(t.$$.fragment,f),N(a.$$.fragment,f),l=!0)},o(f){x(t.$$.fragment,f),x(a.$$.fragment,f),l=!1},d(f){f&&C(e),i[8](null),ge(t),i[9](null),ge(a)}}}function Ru(i){let e,t;return e=new fr({props:{tabs:["Female","Male"],activeTab:i[3],caption:"Valence Map",$$slots:{default:[Au]},$$scope:{ctx:i}}}),e.$on("tabClick",i[5]),{c(){ue(e.$$.fragment)},l(n){ce(e.$$.fragment,n)},m(n,a){he(e,n,a),t=!0},p(n,a){const l={};a&8&&(l.activeTab=n[3]),a&524302&&(l.$$scope={dirty:a,ctx:n}),e.$set(l)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){ge(e,n)}}}function Tu(i){let e,t,n,a,l,o,c;return n=new qt({props:{name:"Participants count",label:Object.keys(i[0].participants).length.toString()}}),o=new qt({props:{name:`${i[3]} participants count`,label:i[4].toString()}}),{c(){e=Z("ul"),t=Z("li"),ue(n.$$.fragment),a=de(),l=Z("li"),ue(o.$$.fragment),this.h()},l(f){e=K(f,"UL",{class:!0});var g=j(e);t=K(g,"LI",{});var v=j(t);ce(n.$$.fragment,v),v.forEach(C),a=me(g),l=K(g,"LI",{});var p=j(l);ce(o.$$.fragment,p),p.forEach(C),g.forEach(C),this.h()},h(){E(e,"class","p-2")},m(f,g){Y(f,e,g),z(e,t),he(n,t,null),z(e,a),z(e,l),he(o,l,null),c=!0},p(f,g){const v={};g&1&&(v.label=Object.keys(f[0].participants).length.toString()),n.$set(v);const p={};g&8&&(p.name=`${f[3]} participants count`),g&16&&(p.label=f[4].toString()),o.$set(p)},i(f){c||(N(n.$$.fragment,f),N(o.$$.fragment,f),c=!0)},o(f){x(n.$$.fragment,f),x(o.$$.fragment,f),c=!1},d(f){f&&C(e),ge(n),ge(o)}}}function Du(i){let e,t;return e=new fr({props:{tabs:["Details"],highlightTab:!1,$$slots:{default:[Tu]},$$scope:{ctx:i}}}),{c(){ue(e.$$.fragment)},l(n){ce(e.$$.fragment,n)},m(n,a){he(e,n,a),t=!0},p(n,a){const l={};a&524313&&(l.$$scope={dirty:a,ctx:n}),e.$set(l)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){ge(e,n)}}}function Za(i){let e,t;return e=new sn({props:{$$slots:{settings:[Du],panels:[Ru]},$$scope:{ctx:i}}}),{c(){ue(e.$$.fragment)},l(n){ce(e.$$.fragment,n)},m(n,a){he(e,n,a),t=!0},p(n,a){const l={};a&524319&&(l.$$scope={dirty:a,ctx:n}),e.$set(l)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){ge(e,n)}}}function Ou(i){let e=i[3],t,n,a=Za(i);return{c(){a.c(),t=Ke()},l(l){a.l(l),t=Ke()},m(l,o){a.m(l,o),Y(l,t,o),n=!0},p(l,[o]){o&8&&Ge(e,e=l[3])?(ft(),x(a,1,1,Ue),ut(),a=Za(l),a.c(),N(a,1),a.m(t.parentNode,t)):a.p(l,o)},i(l){n||(N(a),n=!0)},o(l){x(a),n=!1},d(l){l&&C(t),a.d(l)}}}let Pu=1,Nu=1;function zu(i,e,t){let{survey:n}=e,a,l,o="Female",c=0,f=0;const g=new Worker(new URL(""+new URL("../workers/binning.worker-0c4c5efe.js",import.meta.url).href,self.location),{type:"module"});function v(){return[{name:`ValenceMap-${o}Front.png`,dataUrl:a.getImage()},{name:`ValenceMap-${o}Back.png`,dataUrl:l.getImage()}]}function p(A){const W=[];for(const D of Object.values(n.participants)){const J=D.drawing[A];J&&W.push(J)}t(4,c=W.length),c>0?(re(A,"Waiting"),g.postMessage({command:"getBins",params:{drawings:W,side:A.includes("Front")?"Front":"Back"}})):(f--,A.includes("Front")?a.clearMessage():l.clearMessage())}function w(A,W){const J=rr.scale(["red","green"]).domain([1,11]);let _,m;re(A,"Drawing valence map"),A==="Front"?(_=a.getCanvas(),m=a.getScaleFactor()):(_=l.getCanvas(),m=l.getScaleFactor());const M=_.getContext("2d");if(M==null)throw"Could not get context to draw density map.";for(let O of W){const B=O.map(ee=>ee.valence),ne=O.map(ee=>ee.intensity),ie=B.reduce((ee,be)=>ee+be,0)/O.length,Re=ne.reduce((ee,be)=>ee+be,0)/O.length,Le=J(ie),se=rr.scale(["white",Le]).domain([1,11])(Re),F=rr.scale([se.alpha(0),se]).domain([0,c])(O.length);M.fillStyle=F.hex(),M.fillRect(O.x*m,O.y*m,Pu,Nu)}Q(A)}function P({detail:A}){if(f>0){alert("Please wait until computations have completed.");return}t(3,o=A)}function q(A){const{personaSide:W,width:D,height:J}=A.detail;re(W,"Starting valence map computation"),f++,p(W)}function I(){g.onmessage=A=>{if(A.data.event==="bins"){const{side:W,bins:D}=A.data.params;W==="Front"?a.clearMessage():l.clearMessage(),f--,w(W,D)}else if(A.data.event==="progress"){const{side:W,msg:D}=A.data.params;re(W,D)}}}function re(A,W){A.includes("Front")?a.setMessage(W):l.setMessage(W)}function Q(A){A.includes("Front")?a.clearMessage():l.clearMessage()}Sr(()=>{I()});function ae(A){lt[A?"unshift":"push"](()=>{a=A,t(1,a)})}function G(A){lt[A?"unshift":"push"](()=>{l=A,t(2,l)})}return i.$$set=A=>{"survey"in A&&t(0,n=A.survey)},[n,a,l,o,c,P,q,v,ae,G]}class xu extends rt{constructor(e){super(),nt(this,e,zu,Ou,Ge,{survey:0,getImages:7})}get getImages(){return this.$$.ctx[7]}}function Bu(i){let e,t,n,a,l;return{c(){e=Z("div"),t=Z("button"),n=xe("Load Survey Data"),this.h()},l(o){e=K(o,"DIV",{class:!0});var c=j(e);t=K(c,"BUTTON",{class:!0});var f=j(t);n=Be(f,"Load Survey Data"),f.forEach(C),c.forEach(C),this.h()},h(){E(t,"class","py-1 px-2 bg-neutral-600 hover:bg-neutral-700 border border-neutral-900 shadow text-neutral-100 text-xs"),E(e,"class","flex items-center justify-center w-full h-full bg-neutral-800")},m(o,c){Y(o,e,c),z(e,t),z(t,n),a||(l=wt(t,"click",i[0]),a=!0)},p:Ue,i:Ue,o:Ue,d(o){o&&C(e),a=!1,l()}}}function Uu(i){function e(t){Er.call(this,i,t)}return[e]}class Wu extends rt{constructor(e){super(),nt(this,e,Uu,Bu,Ge,{})}}function Ka(i){let e,t,n={title:"Project",$$slots:{default:[Yu]},$$scope:{ctx:i}};return e=new cs({props:n}),i[16](e),{c(){ue(e.$$.fragment)},l(a){ce(e.$$.fragment,a)},m(a,l){he(e,a,l),t=!0},p(a,l){const o={};l[0]&4|l[1]&32&&(o.$$scope={dirty:l,ctx:a}),e.$set(o)},i(a){t||(N(e.$$.fragment,a),t=!0)},o(a){x(e.$$.fragment,a),t=!1},d(a){i[16](null),ge(e,a)}}}function ju(i){let e;return{c(){e=xe("Load Survey Data")},l(t){e=Be(t,"Load Survey Data")},m(t,n){Y(t,e,n)},d(t){t&&C(e)}}}function es(i){let e,t,n,a,l,o,c,f,g,v;return e=new xt({props:{$$slots:{default:[qu]},$$scope:{ctx:i}}}),e.$on("click",i[13]),n=new xt({props:{$$slots:{default:[Gu]},$$scope:{ctx:i}}}),n.$on("click",i[14]),l=new xt({props:{$$slots:{default:[Hu]},$$scope:{ctx:i}}}),l.$on("click",i[15]),c=new Pf({}),g=new xt({props:{$$slots:{default:[Vu]},$$scope:{ctx:i}}}),g.$on("click",i[10]),{c(){ue(e.$$.fragment),t=de(),ue(n.$$.fragment),a=de(),ue(l.$$.fragment),o=de(),ue(c.$$.fragment),f=de(),ue(g.$$.fragment)},l(p){ce(e.$$.fragment,p),t=me(p),ce(n.$$.fragment,p),a=me(p),ce(l.$$.fragment,p),o=me(p),ce(c.$$.fragment,p),f=me(p),ce(g.$$.fragment,p)},m(p,w){he(e,p,w),Y(p,t,w),he(n,p,w),Y(p,a,w),he(l,p,w),Y(p,o,w),he(c,p,w),Y(p,f,w),he(g,p,w),v=!0},p(p,w){const P={};w[1]&32&&(P.$$scope={dirty:w,ctx:p}),e.$set(P);const q={};w[1]&32&&(q.$$scope={dirty:w,ctx:p}),n.$set(q);const I={};w[1]&32&&(I.$$scope={dirty:w,ctx:p}),l.$set(I);const re={};w[1]&32&&(re.$$scope={dirty:w,ctx:p}),g.$set(re)},i(p){v||(N(e.$$.fragment,p),N(n.$$.fragment,p),N(l.$$.fragment,p),N(c.$$.fragment,p),N(g.$$.fragment,p),v=!0)},o(p){x(e.$$.fragment,p),x(n.$$.fragment,p),x(l.$$.fragment,p),x(c.$$.fragment,p),x(g.$$.fragment,p),v=!1},d(p){ge(e,p),p&&C(t),ge(n,p),p&&C(a),ge(l,p),p&&C(o),ge(c,p),p&&C(f),ge(g,p)}}}function qu(i){let e;return{c(){e=xe("Export images")},l(t){e=Be(t,"Export images")},m(t,n){Y(t,e,n)},d(t){t&&C(e)}}}function Gu(i){let e;return{c(){e=xe("Export strokes")},l(t){e=Be(t,"Export strokes")},m(t,n){Y(t,e,n)},d(t){t&&C(e)}}}function Hu(i){let e;return{c(){e=xe("Export pixel maps")},l(t){e=Be(t,"Export pixel maps")},m(t,n){Y(t,e,n)},d(t){t&&C(e)}}}function Vu(i){let e;return{c(){e=xe("Close project")},l(t){e=Be(t,"Close project")},m(t,n){Y(t,e,n)},d(t){t&&C(e)}}}function Yu(i){let e,t,n,a;e=new xt({props:{$$slots:{default:[ju]},$$scope:{ctx:i}}}),e.$on("click",i[9]);let l=i[2]&&es(i);return{c(){ue(e.$$.fragment),t=de(),l&&l.c(),n=Ke()},l(o){ce(e.$$.fragment,o),t=me(o),l&&l.l(o),n=Ke()},m(o,c){he(e,o,c),Y(o,t,c),l&&l.m(o,c),Y(o,n,c),a=!0},p(o,c){const f={};c[1]&32&&(f.$$scope={dirty:c,ctx:o}),e.$set(f),o[2]?l?(l.p(o,c),c[0]&4&&N(l,1)):(l=es(o),l.c(),N(l,1),l.m(n.parentNode,n)):l&&(ft(),x(l,1,1,()=>{l=null}),ut())},i(o){a||(N(e.$$.fragment,o),N(l),a=!0)},o(o){x(e.$$.fragment,o),x(l),a=!1},d(o){ge(e,o),o&&C(t),l&&l.d(o),o&&C(n)}}}function ts(i){let e,t,n={title:"Tools",enableIcon:!0,$$slots:{default:[tc]},$$scope:{ctx:i}};return e=new cs({props:n}),i[20](e),{c(){ue(e.$$.fragment)},l(a){ce(e.$$.fragment,a)},m(a,l){he(e,a,l),t=!0},p(a,l){const o={};l[0]&64|l[1]&32&&(o.$$scope={dirty:l,ctx:a}),e.$set(o)},i(a){t||(N(e.$$.fragment,a),t=!0)},o(a){x(e.$$.fragment,a),t=!1},d(a){i[20](null),ge(e,a)}}}function Qu(i){let e=Ze.LookingGlass+"",t;return{c(){t=xe(e)},l(n){t=Be(n,e)},m(n,a){Y(n,t,a)},p:Ue,d(n){n&&C(t)}}}function Xu(i){let e,t,n;return{c(){e=ct("svg"),t=ct("path"),n=ct("path"),this.h()},l(a){e=ht(a,"svg",{slot:!0,xmlns:!0,width:!0,height:!0,viewBox:!0,"stroke-width":!0,stroke:!0,fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0});var l=j(e);t=ht(l,"path",{stroke:!0,d:!0,fill:!0}),j(t).forEach(C),n=ht(l,"path",{d:!0}),j(n).forEach(C),l.forEach(C),this.h()},h(){E(t,"stroke","none"),E(t,"d","M0 0h24v24H0z"),E(t,"fill","none"),E(n,"d","M5 12l5 5l10 -10"),E(e,"slot","icon"),E(e,"xmlns","http://www.w3.org/2000/svg"),E(e,"width","14"),E(e,"height","14"),E(e,"viewBox","0 0 24 24"),E(e,"stroke-width","2"),E(e,"stroke","currentColor"),E(e,"fill","none"),E(e,"stroke-linecap","round"),E(e,"stroke-linejoin","round"),pt(e,"hidden",!i[35])},m(a,l){Y(a,e,l),z(e,t),z(e,n)},p(a,l){l[1]&16&&pt(e,"hidden",!a[35])},d(a){a&&C(e)}}}function Ju(i){let e=Ze.DensityMap+"",t;return{c(){t=xe(e)},l(n){t=Be(n,e)},m(n,a){Y(n,t,a)},p:Ue,d(n){n&&C(t)}}}function Zu(i){let e,t,n;return{c(){e=ct("svg"),t=ct("path"),n=ct("path"),this.h()},l(a){e=ht(a,"svg",{slot:!0,xmlns:!0,width:!0,height:!0,viewBox:!0,"stroke-width":!0,stroke:!0,fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0});var l=j(e);t=ht(l,"path",{stroke:!0,d:!0,fill:!0}),j(t).forEach(C),n=ht(l,"path",{d:!0}),j(n).forEach(C),l.forEach(C),this.h()},h(){E(t,"stroke","none"),E(t,"d","M0 0h24v24H0z"),E(t,"fill","none"),E(n,"d","M5 12l5 5l10 -10"),E(e,"slot","icon"),E(e,"xmlns","http://www.w3.org/2000/svg"),E(e,"width","16"),E(e,"height","16"),E(e,"viewBox","0 0 24 24"),E(e,"stroke-width","2"),E(e,"stroke","currentColor"),E(e,"fill","none"),E(e,"stroke-linecap","round"),E(e,"stroke-linejoin","round"),pt(e,"hidden",!i[35])},m(a,l){Y(a,e,l),z(e,t),z(e,n)},p(a,l){l[1]&16&&pt(e,"hidden",!a[35])},d(a){a&&C(e)}}}function Ku(i){let e=Ze.ValenceMap+"",t;return{c(){t=xe(e)},l(n){t=Be(n,e)},m(n,a){Y(n,t,a)},p:Ue,d(n){n&&C(t)}}}function ec(i){let e,t,n;return{c(){e=ct("svg"),t=ct("path"),n=ct("path"),this.h()},l(a){e=ht(a,"svg",{slot:!0,xmlns:!0,width:!0,height:!0,viewBox:!0,"stroke-width":!0,stroke:!0,fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0});var l=j(e);t=ht(l,"path",{stroke:!0,d:!0,fill:!0}),j(t).forEach(C),n=ht(l,"path",{d:!0}),j(n).forEach(C),l.forEach(C),this.h()},h(){E(t,"stroke","none"),E(t,"d","M0 0h24v24H0z"),E(t,"fill","none"),E(n,"d","M5 12l5 5l10 -10"),E(e,"slot","icon"),E(e,"xmlns","http://www.w3.org/2000/svg"),E(e,"width","16"),E(e,"height","16"),E(e,"viewBox","0 0 24 24"),E(e,"stroke-width","2"),E(e,"stroke","currentColor"),E(e,"fill","none"),E(e,"stroke-linecap","round"),E(e,"stroke-linejoin","round"),pt(e,"hidden",!i[35])},m(a,l){Y(a,e,l),z(e,t),z(e,n)},p(a,l){l[1]&16&&pt(e,"hidden",!a[35])},d(a){a&&C(e)}}}function tc(i){let e,t,n,a,l,o;return e=new xt({props:{isActive:i[6]===Ze.LookingGlass,$$slots:{icon:[Xu,({isActive:c})=>({35:c}),({isActive:c})=>[0,c?16:0]],default:[Qu]},$$scope:{ctx:i}}}),e.$on("click",i[17]),n=new xt({props:{isActive:i[6]===Ze.DensityMap,$$slots:{icon:[Zu,({isActive:c})=>({35:c}),({isActive:c})=>[0,c?16:0]],default:[Ju]},$$scope:{ctx:i}}}),n.$on("click",i[18]),l=new xt({props:{isActive:i[6]===Ze.ValenceMap,$$slots:{icon:[ec,({isActive:c})=>({35:c}),({isActive:c})=>[0,c?16:0]],default:[Ku]},$$scope:{ctx:i}}}),l.$on("click",i[19]),{c(){ue(e.$$.fragment),t=de(),ue(n.$$.fragment),a=de(),ue(l.$$.fragment)},l(c){ce(e.$$.fragment,c),t=me(c),ce(n.$$.fragment,c),a=me(c),ce(l.$$.fragment,c)},m(c,f){he(e,c,f),Y(c,t,f),he(n,c,f),Y(c,a,f),he(l,c,f),o=!0},p(c,f){const g={};f[0]&64&&(g.isActive=c[6]===Ze.LookingGlass),f[1]&48&&(g.$$scope={dirty:f,ctx:c}),e.$set(g);const v={};f[0]&64&&(v.isActive=c[6]===Ze.DensityMap),f[1]&48&&(v.$$scope={dirty:f,ctx:c}),n.$set(v);const p={};f[0]&64&&(p.isActive=c[6]===Ze.ValenceMap),f[1]&48&&(p.$$scope={dirty:f,ctx:c}),l.$set(p)},i(c){o||(N(e.$$.fragment,c),N(n.$$.fragment,c),N(l.$$.fragment,c),o=!0)},o(c){x(e.$$.fragment,c),x(n.$$.fragment,c),x(l.$$.fragment,c),o=!1},d(c){ge(e,c),c&&C(t),ge(n,c),c&&C(a),ge(l,c)}}}function rs(i){let e,t,n,a,l,o;return{c(){e=Z("div"),t=ct("svg"),n=ct("circle"),a=ct("path"),l=de(),o=xe(i[8]),this.h()},l(c){e=K(c,"DIV",{class:!0});var f=j(e);t=ht(f,"svg",{class:!0,xmlns:!0,fill:!0,viewBox:!0});var g=j(t);n=ht(g,"circle",{class:!0,cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),j(n).forEach(C),a=ht(g,"path",{class:!0,fill:!0,d:!0}),j(a).forEach(C),g.forEach(C),l=me(f),o=Be(f,i[8]),f.forEach(C),this.h()},h(){E(n,"class","opacity-25"),E(n,"cx","12"),E(n,"cy","12"),E(n,"r","10"),E(n,"stroke","currentColor"),E(n,"stroke-width","4"),E(a,"class","opacity-75"),E(a,"fill","currentColor"),E(a,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),E(t,"class","animate-spin -ml-1 mr-3 h-5 w-5 text-white"),E(t,"xmlns","http://www.w3.org/2000/svg"),E(t,"fill","none"),E(t,"viewBox","0 0 24 24"),E(e,"class","z-20 absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 flex items-center justify-center py-2 px-4 bg-neutral-800 text-neutral-400")},m(c,f){Y(c,e,f),z(e,t),z(t,n),z(t,a),z(e,l),z(e,o)},p(c,f){f[0]&256&&$t(o,c[8])},d(c){c&&C(e)}}}function ns(i){let e,t;return e=new Wu({}),e.$on("click",i[9]),{c(){ue(e.$$.fragment)},l(n){ce(e.$$.fragment,n)},m(n,a){he(e,n,a),t=!0},p:Ue,i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){ge(e,n)}}}function rc(i){let e,t,n,a,l,o,c,f,g,v,p,w,P,q,I,re,Q=i[3]===!1&&Ka(i),ae=i[2]&&ts(i),G=i[3]&&rs(i),A=i[7]===void 0&&ns(i);return{c(){e=Z("section"),t=Z("header"),Q&&Q.c(),n=de(),ae&&ae.c(),a=de(),l=Z("span"),o=de(),c=Z("h1"),f=xe("InteroMap"),g=de(),v=Z("main"),G&&G.c(),p=de(),A&&A.c(),w=de(),P=Z("input"),this.h()},l(W){e=K(W,"SECTION",{class:!0});var D=j(e);t=K(D,"HEADER",{class:!0});var J=j(t);Q&&Q.l(J),n=me(J),ae&&ae.l(J),a=me(J),l=K(J,"SPAN",{class:!0}),j(l).forEach(C),o=me(J),c=K(J,"H1",{class:!0,style:!0});var _=j(c);f=Be(_,"InteroMap"),_.forEach(C),J.forEach(C),g=me(D),v=K(D,"MAIN",{class:!0});var m=j(v);G&&G.l(m),p=me(m),A&&A.l(m),m.forEach(C),D.forEach(C),w=me(W),P=K(W,"INPUT",{type:!0,class:!0,accept:!0}),this.h()},h(){E(l,"class","flex-grow"),E(c,"class","flex items-center h-full px-2 bg-gradient-to-t from-orange-600 to-orange-500 text-neutral-100 font-bold text-xs lowercase tracking-wider"),tn(c,"font-variant","small-caps"),E(t,"class","emboss z-20 flex items-center bg-neutral-600 border-b border-neutral-800"),E(v,"class","relative row-start-2 row-end-4"),E(e,"class","app-layout w-screen h-screen svelte-14urve1"),E(P,"type","file"),E(P,"class","hidden"),E(P,"accept",".csv")},m(W,D){Y(W,e,D),z(e,t),Q&&Q.m(t,null),z(t,n),ae&&ae.m(t,null),z(t,a),z(t,l),z(t,o),z(t,c),z(c,f),z(e,g),z(e,v),G&&G.m(v,null),z(v,p),A&&A.m(v,null),i[21](v),Y(W,w,D),Y(W,P,D),i[22](P),q=!0,I||(re=wt(P,"change",i[11]),I=!0)},p(W,D){W[3]===!1?Q?(Q.p(W,D),D[0]&8&&N(Q,1)):(Q=Ka(W),Q.c(),N(Q,1),Q.m(t,n)):Q&&(ft(),x(Q,1,1,()=>{Q=null}),ut()),W[2]?ae?(ae.p(W,D),D[0]&4&&N(ae,1)):(ae=ts(W),ae.c(),N(ae,1),ae.m(t,a)):ae&&(ft(),x(ae,1,1,()=>{ae=null}),ut()),W[3]?G?G.p(W,D):(G=rs(W),G.c(),G.m(v,p)):G&&(G.d(1),G=null),W[7]===void 0?A?(A.p(W,D),D[0]&128&&N(A,1)):(A=ns(W),A.c(),N(A,1),A.m(v,null)):A&&(ft(),x(A,1,1,()=>{A=null}),ut())},i(W){q||(N(Q),N(ae),N(A),q=!0)},o(W){x(Q),x(ae),x(A),q=!1},d(W){W&&C(e),Q&&Q.d(),ae&&ae.d(),G&&G.d(),A&&A.d(),i[21](null),W&&C(w),W&&C(P),i[22](null),I=!1,re()}}}function nc(i){return JSON.parse(i)}function as(i,e){const t=document.createElement("a");t.href=e,t.target="_blank",t.download=i,t.click()}function ac(i,e,t){let n,a,l=!1,o=!1,c,f,g=Ze.LookingGlass,v=new Sf,p,w="Loading",P,q;function I(){a.click()}function re(){p&&(p.$destroy(),t(7,p=void 0)),t(2,l=!1),t(3,o=!1),q=null}function Q(){if(a.files&&a.files.length>0){if(re(),q=prompt("Specify the Qualtrics variable you wish to load:"),q==null||q==="")throw alert("Error: You did not specify the Qualtrics variable."),re(),"No Qualtrics variable specified. Aborting.";t(3,o=!0),ae(a.files[0])}}function ae(F){t(8,w="Reading file..."),$a.parse(F,{worker:!0,header:!0,step:G,complete:A})}function G(F){const ee=F.data;if(q&&q in ee&&"ResponseId"in ee)try{const be=nc(ee[q]);if(Object.keys(be).every(Ie=>["FemaleFront","FemaleBack","MaleFront","MaleBack"].includes(Ie))){const Ie=ee.ResponseId,Ne=new Mf({id:Ie,drawing:be});v.addParticipant(Ne)}}catch{return}}function A(){if(Object.keys(v.participants).length===0){const F=`Sorry, we could not parse any InteroMap data from your file.
      Maybe the Qualtrics variable is incorrect?`;throw alert(F),re(),F}t(7,p=m(Ze.LookingGlass))}function W(F){F!==g&&t(7,p=m(F)),c.close()}function D(F){return new _u({target:n,props:{survey:F}})}function J(F){return new Lu({target:n,props:{survey:F}})}function _(F){return new xu({target:n,props:{survey:F}})}function m(F){let ee;switch(p&&p.$destroy(),F){case Ze.LookingGlass:ee=D(v);break;case Ze.DensityMap:ee=J(v);break;case Ze.ValenceMap:ee=_(v);break;default:throw`Unknown tool: ${F}.`}return t(6,g=F),t(3,o=!1),t(2,l=!0),ee}function M(){const F=p==null?void 0:p.getImages();F==null||F.forEach(ee=>{as(ee.name,ee.dataUrl)}),f.close()}function O(){var Ce;const ee=[["Participant ID","Stroke Valence","Stroke Intensity","Area (pixels)"]];for(const Ie of Object.values(v.participants)){const Ne=new Set;for(let qe of Object.values(Ie.drawing))for(let te of qe.strokes){const _e=`${te.valence}:${te.intensity}`;Ne.has(_e)||(ee.push([Ie.id,te.valence.toString(),te.intensity.toString(),((Ce=Ie.areas[_e])==null?void 0:Ce.toString())??""]),Ne.add(_e))}}const be=$a.unparse(ee);return"data:text/csv;base64,"+btoa(be)}function B(){const F=O();as("InteroMap-Strokes.csv",F),f.close()}async function ne(){const F=await window.showSaveFilePicker({suggestedName:`pixel-maps-${q}.zip`});t(3,o=!0),t(8,w="Exporting pixel maps...");const be=document.createElement("canvas").transferControlToOffscreen();P==null||P.postMessage({command:"get-pixelmaps-zip",params:{survey:v,fileHandle:F,canvas:be}},[be]),f.close()}async function ie(){const F=await gf(()=>import("../chunks/export.worker.7694c436.js"),[],import.meta.url);P=new F.default,P.onmessage=ee=>{if(ee.data.event==="pixelmaps-zip-progress"){const{current:be,total:Ce,msg:Ie}=ee.data.params;t(8,w=`(${Math.round(100*be/Ce)}%) ${Ie}`)}else ee.data.event==="done"&&t(3,o=!1)}}Sr(()=>{ie()});function Re(F){lt[F?"unshift":"push"](()=>{f=F,t(5,f)})}const Le=()=>W(Ze.LookingGlass),X=()=>W(Ze.DensityMap),Te=()=>W(Ze.ValenceMap);function se(F){lt[F?"unshift":"push"](()=>{c=F,t(4,c)})}function at(F){lt[F?"unshift":"push"](()=>{n=F,t(0,n)})}function He(F){lt[F?"unshift":"push"](()=>{a=F,t(1,a)})}return[n,a,l,o,c,f,g,p,w,I,re,Q,W,M,B,ne,Re,Le,X,Te,se,at,He]}class oc extends rt{constructor(e){super(),nt(this,e,ac,rc,Ge,{},null,[-1,-1])}}export{oc as default};
